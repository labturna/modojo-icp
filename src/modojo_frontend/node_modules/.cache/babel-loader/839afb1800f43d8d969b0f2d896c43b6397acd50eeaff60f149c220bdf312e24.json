{"ast":null,"code":"import { $, append } from '../../dom.js';\nimport { BaseActionViewItem } from '../actionbar/actionViewItems.js';\nimport { DropdownMenu } from './dropdown.js';\nimport { Emitter } from '../../../common/event.js';\nimport './dropdown.css';\nimport { getDefaultHoverDelegate } from '../hover/hoverDelegateFactory.js';\nimport { getBaseLayerHoverDelegate } from '../hover/hoverDelegate2.js';\nexport class DropdownMenuActionViewItem extends BaseActionViewItem {\n  constructor(action, menuActionsOrProvider, contextMenuProvider) {\n    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : Object.create(null);\n    super(null, action, options);\n    this.actionItem = null;\n    this._onDidChangeVisibility = this._register(new Emitter());\n    this.onDidChangeVisibility = this._onDidChangeVisibility.event;\n    this.menuActionsOrProvider = menuActionsOrProvider;\n    this.contextMenuProvider = contextMenuProvider;\n    this.options = options;\n    if (this.options.actionRunner) {\n      this.actionRunner = this.options.actionRunner;\n    }\n  }\n  render(container) {\n    this.actionItem = container;\n    const labelRenderer = el => {\n      var _a;\n      this.element = append(el, $('a.action-label'));\n      let classNames = [];\n      if (typeof this.options.classNames === 'string') {\n        classNames = this.options.classNames.split(/\\s+/g).filter(s => !!s);\n      } else if (this.options.classNames) {\n        classNames = this.options.classNames;\n      }\n      // todo@aeschli: remove codicon, should come through `this.options.classNames`\n      if (!classNames.find(c => c === 'icon')) {\n        classNames.push('codicon');\n      }\n      this.element.classList.add(...classNames);\n      this.element.setAttribute('role', 'button');\n      this.element.setAttribute('aria-haspopup', 'true');\n      this.element.setAttribute('aria-expanded', 'false');\n      if (this._action.label) {\n        this._register(getBaseLayerHoverDelegate().setupUpdatableHover((_a = this.options.hoverDelegate) !== null && _a !== void 0 ? _a : getDefaultHoverDelegate('mouse'), this.element, this._action.label));\n      }\n      this.element.ariaLabel = this._action.label || '';\n      return null;\n    };\n    const isActionsArray = Array.isArray(this.menuActionsOrProvider);\n    const options = {\n      contextMenuProvider: this.contextMenuProvider,\n      labelRenderer: labelRenderer,\n      menuAsChild: this.options.menuAsChild,\n      actions: isActionsArray ? this.menuActionsOrProvider : undefined,\n      actionProvider: isActionsArray ? undefined : this.menuActionsOrProvider,\n      skipTelemetry: this.options.skipTelemetry\n    };\n    this.dropdownMenu = this._register(new DropdownMenu(container, options));\n    this._register(this.dropdownMenu.onDidChangeVisibility(visible => {\n      var _a;\n      (_a = this.element) === null || _a === void 0 ? void 0 : _a.setAttribute('aria-expanded', `${visible}`);\n      this._onDidChangeVisibility.fire(visible);\n    }));\n    this.dropdownMenu.menuOptions = {\n      actionViewItemProvider: this.options.actionViewItemProvider,\n      actionRunner: this.actionRunner,\n      getKeyBinding: this.options.keybindingProvider,\n      context: this._context\n    };\n    if (this.options.anchorAlignmentProvider) {\n      const that = this;\n      this.dropdownMenu.menuOptions = {\n        ...this.dropdownMenu.menuOptions,\n        get anchorAlignment() {\n          return that.options.anchorAlignmentProvider();\n        }\n      };\n    }\n    this.updateTooltip();\n    this.updateEnabled();\n  }\n  getTooltip() {\n    let title = null;\n    if (this.action.tooltip) {\n      title = this.action.tooltip;\n    } else if (this.action.label) {\n      title = this.action.label;\n    }\n    return title !== null && title !== void 0 ? title : undefined;\n  }\n  setActionContext(newContext) {\n    super.setActionContext(newContext);\n    if (this.dropdownMenu) {\n      if (this.dropdownMenu.menuOptions) {\n        this.dropdownMenu.menuOptions.context = newContext;\n      } else {\n        this.dropdownMenu.menuOptions = {\n          context: newContext\n        };\n      }\n    }\n  }\n  show() {\n    var _a;\n    (_a = this.dropdownMenu) === null || _a === void 0 ? void 0 : _a.show();\n  }\n  updateEnabled() {\n    var _a, _b;\n    const disabled = !this.action.enabled;\n    (_a = this.actionItem) === null || _a === void 0 ? void 0 : _a.classList.toggle('disabled', disabled);\n    (_b = this.element) === null || _b === void 0 ? void 0 : _b.classList.toggle('disabled', disabled);\n  }\n}","map":{"version":3,"names":["$","append","BaseActionViewItem","DropdownMenu","Emitter","getDefaultHoverDelegate","getBaseLayerHoverDelegate","DropdownMenuActionViewItem","constructor","action","menuActionsOrProvider","contextMenuProvider","options","arguments","length","undefined","Object","create","actionItem","_onDidChangeVisibility","_register","onDidChangeVisibility","event","actionRunner","render","container","labelRenderer","el","_a","element","classNames","split","filter","s","find","c","push","classList","add","setAttribute","_action","label","setupUpdatableHover","hoverDelegate","ariaLabel","isActionsArray","Array","isArray","menuAsChild","actions","actionProvider","skipTelemetry","dropdownMenu","visible","fire","menuOptions","actionViewItemProvider","getKeyBinding","keybindingProvider","context","_context","anchorAlignmentProvider","that","anchorAlignment","updateTooltip","updateEnabled","getTooltip","title","tooltip","setActionContext","newContext","show","_b","disabled","enabled","toggle"],"sources":["/home/arslan/modojo/node_modules/monaco-editor/esm/vs/base/browser/ui/dropdown/dropdownActionViewItem.js"],"sourcesContent":["import { $, append } from '../../dom.js';\nimport { BaseActionViewItem } from '../actionbar/actionViewItems.js';\nimport { DropdownMenu } from './dropdown.js';\nimport { Emitter } from '../../../common/event.js';\nimport './dropdown.css';\nimport { getDefaultHoverDelegate } from '../hover/hoverDelegateFactory.js';\nimport { getBaseLayerHoverDelegate } from '../hover/hoverDelegate2.js';\nexport class DropdownMenuActionViewItem extends BaseActionViewItem {\n    constructor(action, menuActionsOrProvider, contextMenuProvider, options = Object.create(null)) {\n        super(null, action, options);\n        this.actionItem = null;\n        this._onDidChangeVisibility = this._register(new Emitter());\n        this.onDidChangeVisibility = this._onDidChangeVisibility.event;\n        this.menuActionsOrProvider = menuActionsOrProvider;\n        this.contextMenuProvider = contextMenuProvider;\n        this.options = options;\n        if (this.options.actionRunner) {\n            this.actionRunner = this.options.actionRunner;\n        }\n    }\n    render(container) {\n        this.actionItem = container;\n        const labelRenderer = (el) => {\n            var _a;\n            this.element = append(el, $('a.action-label'));\n            let classNames = [];\n            if (typeof this.options.classNames === 'string') {\n                classNames = this.options.classNames.split(/\\s+/g).filter(s => !!s);\n            }\n            else if (this.options.classNames) {\n                classNames = this.options.classNames;\n            }\n            // todo@aeschli: remove codicon, should come through `this.options.classNames`\n            if (!classNames.find(c => c === 'icon')) {\n                classNames.push('codicon');\n            }\n            this.element.classList.add(...classNames);\n            this.element.setAttribute('role', 'button');\n            this.element.setAttribute('aria-haspopup', 'true');\n            this.element.setAttribute('aria-expanded', 'false');\n            if (this._action.label) {\n                this._register(getBaseLayerHoverDelegate().setupUpdatableHover((_a = this.options.hoverDelegate) !== null && _a !== void 0 ? _a : getDefaultHoverDelegate('mouse'), this.element, this._action.label));\n            }\n            this.element.ariaLabel = this._action.label || '';\n            return null;\n        };\n        const isActionsArray = Array.isArray(this.menuActionsOrProvider);\n        const options = {\n            contextMenuProvider: this.contextMenuProvider,\n            labelRenderer: labelRenderer,\n            menuAsChild: this.options.menuAsChild,\n            actions: isActionsArray ? this.menuActionsOrProvider : undefined,\n            actionProvider: isActionsArray ? undefined : this.menuActionsOrProvider,\n            skipTelemetry: this.options.skipTelemetry\n        };\n        this.dropdownMenu = this._register(new DropdownMenu(container, options));\n        this._register(this.dropdownMenu.onDidChangeVisibility(visible => {\n            var _a;\n            (_a = this.element) === null || _a === void 0 ? void 0 : _a.setAttribute('aria-expanded', `${visible}`);\n            this._onDidChangeVisibility.fire(visible);\n        }));\n        this.dropdownMenu.menuOptions = {\n            actionViewItemProvider: this.options.actionViewItemProvider,\n            actionRunner: this.actionRunner,\n            getKeyBinding: this.options.keybindingProvider,\n            context: this._context\n        };\n        if (this.options.anchorAlignmentProvider) {\n            const that = this;\n            this.dropdownMenu.menuOptions = {\n                ...this.dropdownMenu.menuOptions,\n                get anchorAlignment() {\n                    return that.options.anchorAlignmentProvider();\n                }\n            };\n        }\n        this.updateTooltip();\n        this.updateEnabled();\n    }\n    getTooltip() {\n        let title = null;\n        if (this.action.tooltip) {\n            title = this.action.tooltip;\n        }\n        else if (this.action.label) {\n            title = this.action.label;\n        }\n        return title !== null && title !== void 0 ? title : undefined;\n    }\n    setActionContext(newContext) {\n        super.setActionContext(newContext);\n        if (this.dropdownMenu) {\n            if (this.dropdownMenu.menuOptions) {\n                this.dropdownMenu.menuOptions.context = newContext;\n            }\n            else {\n                this.dropdownMenu.menuOptions = { context: newContext };\n            }\n        }\n    }\n    show() {\n        var _a;\n        (_a = this.dropdownMenu) === null || _a === void 0 ? void 0 : _a.show();\n    }\n    updateEnabled() {\n        var _a, _b;\n        const disabled = !this.action.enabled;\n        (_a = this.actionItem) === null || _a === void 0 ? void 0 : _a.classList.toggle('disabled', disabled);\n        (_b = this.element) === null || _b === void 0 ? void 0 : _b.classList.toggle('disabled', disabled);\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}