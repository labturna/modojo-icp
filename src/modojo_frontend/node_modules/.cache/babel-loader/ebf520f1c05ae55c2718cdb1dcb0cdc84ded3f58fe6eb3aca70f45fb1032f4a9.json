{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport * as monaco from \"monaco-editor/esm/vs/editor/editor.api\";\nimport * as React from \"react\";\nimport { useEffect, useMemo, useRef } from \"react\";\nimport { noop, processSize, propCallbacks } from \"./utils\";\nfunction MonacoEditor(_a) {\n  var width = _a.width,\n    height = _a.height,\n    value = _a.value,\n    defaultValue = _a.defaultValue,\n    language = _a.language,\n    theme = _a.theme,\n    options = _a.options,\n    overrideServices = _a.overrideServices,\n    editorWillMount = _a.editorWillMount,\n    editorDidMount = _a.editorDidMount,\n    editorWillUnmount = _a.editorWillUnmount,\n    onChange = _a.onChange,\n    className = _a.className,\n    uri = _a.uri;\n  var containerElement = useRef(null);\n  var editor = useRef(null);\n  var _subscription = useRef(null);\n  var __prevent_trigger_change_event = useRef(null);\n  var fixedWidth = processSize(width);\n  var fixedHeight = processSize(height);\n  propCallbacks.onChange = onChange;\n  var style = useMemo(function () {\n    return {\n      width: fixedWidth,\n      height: fixedHeight\n    };\n  }, [fixedWidth, fixedHeight]);\n  var handleEditorWillMount = function () {\n    var finalOptions = editorWillMount(monaco);\n    return finalOptions || {};\n  };\n  var handleEditorDidMount = function () {\n    editorDidMount(editor.current, monaco);\n    _subscription.current = editor.current.onDidChangeModelContent(function (event) {\n      var _a;\n      if (!__prevent_trigger_change_event.current) {\n        (_a = propCallbacks.onChange) === null || _a === void 0 ? void 0 : _a.call(propCallbacks, editor.current.getValue(), event);\n      }\n    });\n  };\n  var handleEditorWillUnmount = function () {\n    editorWillUnmount(editor.current, monaco);\n  };\n  var initMonaco = function () {\n    var finalValue = value !== null ? value : defaultValue;\n    if (containerElement.current) {\n      // Before initializing monaco editor\n      var finalOptions = __assign(__assign({}, options), handleEditorWillMount());\n      var modelUri = uri === null || uri === void 0 ? void 0 : uri(monaco);\n      var model = modelUri && monaco.editor.getModel(modelUri);\n      if (model) {\n        // Cannot create two models with the same URI,\n        // if model with the given URI is already created, just update it.\n        model.setValue(finalValue);\n        monaco.editor.setModelLanguage(model, language);\n      } else {\n        model = monaco.editor.createModel(finalValue, language, modelUri);\n      }\n      editor.current = monaco.editor.create(containerElement.current, __assign(__assign(__assign({\n        model: model\n      }, className ? {\n        extraEditorClassName: className\n      } : {}), finalOptions), theme ? {\n        theme: theme\n      } : {}), overrideServices);\n      // After initializing monaco editor\n      handleEditorDidMount();\n    }\n  };\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(initMonaco, []);\n  useEffect(function () {\n    if (editor.current) {\n      if (value === editor.current.getValue()) {\n        return;\n      }\n      var model = editor.current.getModel();\n      __prevent_trigger_change_event.current = true;\n      editor.current.pushUndoStop();\n      // pushEditOperations says it expects a cursorComputer, but doesn't seem to need one.\n      model.pushEditOperations([], [{\n        range: model.getFullModelRange(),\n        text: value\n      }], undefined);\n      editor.current.pushUndoStop();\n      __prevent_trigger_change_event.current = false;\n    }\n  }, [value]);\n  useEffect(function () {\n    if (editor.current) {\n      var model = editor.current.getModel();\n      monaco.editor.setModelLanguage(model, language);\n    }\n  }, [language]);\n  useEffect(function () {\n    if (editor.current) {\n      // Don't pass in the model on update because monaco crashes if we pass the model\n      // a second time. See https://github.com/microsoft/monaco-editor/issues/2027\n      var _model = options.model,\n        optionsWithoutModel = __rest(options, [\"model\"]);\n      editor.current.updateOptions(__assign(__assign({}, className ? {\n        extraEditorClassName: className\n      } : {}), optionsWithoutModel));\n    }\n  }, [className, options]);\n  useEffect(function () {\n    if (editor.current) {\n      editor.current.layout();\n    }\n  }, [width, height]);\n  useEffect(function () {\n    monaco.editor.setTheme(theme);\n  }, [theme]);\n  useEffect(function () {\n    return function () {\n      if (editor.current) {\n        handleEditorWillUnmount();\n        editor.current.dispose();\n      }\n      if (_subscription.current) {\n        _subscription.current.dispose();\n      }\n    };\n  },\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  []);\n  return React.createElement(\"div\", {\n    ref: containerElement,\n    style: style,\n    className: \"react-monaco-editor-container\"\n  });\n}\nMonacoEditor.defaultProps = {\n  width: \"100%\",\n  height: \"100%\",\n  value: null,\n  defaultValue: \"\",\n  language: \"javascript\",\n  theme: null,\n  options: {},\n  overrideServices: {},\n  editorWillMount: noop,\n  editorDidMount: noop,\n  editorWillUnmount: noop,\n  onChange: noop,\n  className: null\n};\nMonacoEditor.displayName = \"MonacoEditor\";\nexport default MonacoEditor;","map":{"version":3,"names":["monaco","React","useEffect","useMemo","useRef","noop","processSize","propCallbacks","MonacoEditor","_a","width","height","value","defaultValue","language","theme","options","overrideServices","editorWillMount","editorDidMount","editorWillUnmount","onChange","className","uri","containerElement","editor","_subscription","__prevent_trigger_change_event","fixedWidth","fixedHeight","style","handleEditorWillMount","finalOptions","handleEditorDidMount","current","onDidChangeModelContent","event","call","getValue","handleEditorWillUnmount","initMonaco","finalValue","__assign","modelUri","model","getModel","setValue","setModelLanguage","createModel","create","extraEditorClassName","pushUndoStop","pushEditOperations","range","getFullModelRange","text","undefined","_model","optionsWithoutModel","__rest","updateOptions","layout","setTheme","dispose","createElement","ref","defaultProps","displayName"],"sources":["/home/arslan/modojo/node_modules/react-monaco-editor/src/editor.tsx"],"sourcesContent":["import * as monaco from \"monaco-editor/esm/vs/editor/editor.api\";\nimport * as React from \"react\";\nimport { useEffect, useMemo, useRef } from \"react\";\nimport { MonacoEditorProps } from \"./types\";\nimport { noop, processSize, propCallbacks } from \"./utils\";\n\nfunction MonacoEditor({\n  width,\n  height,\n  value,\n  defaultValue,\n  language,\n  theme,\n  options,\n  overrideServices,\n  editorWillMount,\n  editorDidMount,\n  editorWillUnmount,\n  onChange,\n  className,\n  uri,\n}: MonacoEditorProps) {\n  const containerElement = useRef<HTMLDivElement | null>(null);\n\n  const editor = useRef<monaco.editor.IStandaloneCodeEditor | null>(null);\n\n  const _subscription = useRef<monaco.IDisposable | null>(null);\n\n  const __prevent_trigger_change_event = useRef<boolean | null>(null);\n\n  const fixedWidth = processSize(width);\n\n  const fixedHeight = processSize(height);\n\n  propCallbacks.onChange = onChange;\n\n  const style = useMemo(\n    () => ({\n      width: fixedWidth,\n      height: fixedHeight,\n    }),\n    [fixedWidth, fixedHeight],\n  );\n\n  const handleEditorWillMount = () => {\n    const finalOptions = editorWillMount(monaco);\n    return finalOptions || {};\n  };\n\n  const handleEditorDidMount = () => {\n    editorDidMount(editor.current, monaco);\n\n    _subscription.current = editor.current.onDidChangeModelContent((event) => {\n      if (!__prevent_trigger_change_event.current) {\n        propCallbacks.onChange?.(editor.current.getValue(), event);\n      }\n    });\n  };\n\n  const handleEditorWillUnmount = () => {\n    editorWillUnmount(editor.current, monaco);\n  };\n\n  const initMonaco = () => {\n    const finalValue = value !== null ? value : defaultValue;\n\n    if (containerElement.current) {\n      // Before initializing monaco editor\n      const finalOptions = { ...options, ...handleEditorWillMount() };\n      const modelUri = uri?.(monaco);\n      let model = modelUri && monaco.editor.getModel(modelUri);\n      if (model) {\n        // Cannot create two models with the same URI,\n        // if model with the given URI is already created, just update it.\n        model.setValue(finalValue);\n        monaco.editor.setModelLanguage(model, language);\n      } else {\n        model = monaco.editor.createModel(finalValue, language, modelUri);\n      }\n      editor.current = monaco.editor.create(\n        containerElement.current,\n        {\n          model,\n          ...(className ? { extraEditorClassName: className } : {}),\n          ...finalOptions,\n          ...(theme ? { theme } : {}),\n        },\n        overrideServices,\n      );\n      // After initializing monaco editor\n      handleEditorDidMount();\n    }\n  };\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(initMonaco, []);\n\n  useEffect(() => {\n    if (editor.current) {\n      if (value === editor.current.getValue()) {\n        return;\n      }\n\n      const model = editor.current.getModel();\n      __prevent_trigger_change_event.current = true;\n      editor.current.pushUndoStop();\n      // pushEditOperations says it expects a cursorComputer, but doesn't seem to need one.\n      model.pushEditOperations(\n        [],\n        [\n          {\n            range: model.getFullModelRange(),\n            text: value,\n          },\n        ],\n        undefined,\n      );\n      editor.current.pushUndoStop();\n      __prevent_trigger_change_event.current = false;\n    }\n  }, [value]);\n\n  useEffect(() => {\n    if (editor.current) {\n      const model = editor.current.getModel();\n      monaco.editor.setModelLanguage(model, language);\n    }\n  }, [language]);\n\n  useEffect(() => {\n    if (editor.current) {\n      // Don't pass in the model on update because monaco crashes if we pass the model\n      // a second time. See https://github.com/microsoft/monaco-editor/issues/2027\n      const { model: _model, ...optionsWithoutModel } = options;\n      editor.current.updateOptions({\n        ...(className ? { extraEditorClassName: className } : {}),\n        ...optionsWithoutModel,\n      });\n    }\n  }, [className, options]);\n\n  useEffect(() => {\n    if (editor.current) {\n      editor.current.layout();\n    }\n  }, [width, height]);\n\n  useEffect(() => {\n    monaco.editor.setTheme(theme);\n  }, [theme]);\n\n  useEffect(\n    () => () => {\n      if (editor.current) {\n        handleEditorWillUnmount();\n        editor.current.dispose();\n      }\n      if (_subscription.current) {\n        _subscription.current.dispose();\n      }\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [],\n  );\n\n  return (\n    <div\n      ref={containerElement}\n      style={style}\n      className=\"react-monaco-editor-container\"\n    />\n  );\n}\n\nMonacoEditor.defaultProps = {\n  width: \"100%\",\n  height: \"100%\",\n  value: null,\n  defaultValue: \"\",\n  language: \"javascript\",\n  theme: null,\n  options: {},\n  overrideServices: {},\n  editorWillMount: noop,\n  editorDidMount: noop,\n  editorWillUnmount: noop,\n  onChange: noop,\n  className: null,\n};\n\nMonacoEditor.displayName = \"MonacoEditor\";\n\nexport default MonacoEditor;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}