{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { BrowserFeatures } from '../../canIUse.js';\nimport * as DOM from '../../dom.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../common/lifecycle.js';\nimport * as platform from '../../../common/platform.js';\nimport { Range } from '../../../common/range.js';\nimport './contextview.css';\nexport function isAnchor(obj) {\n  const anchor = obj;\n  return !!anchor && typeof anchor.x === 'number' && typeof anchor.y === 'number';\n}\nexport var LayoutAnchorMode;\n(function (LayoutAnchorMode) {\n  LayoutAnchorMode[LayoutAnchorMode[\"AVOID\"] = 0] = \"AVOID\";\n  LayoutAnchorMode[LayoutAnchorMode[\"ALIGN\"] = 1] = \"ALIGN\";\n})(LayoutAnchorMode || (LayoutAnchorMode = {}));\n/**\n * Lays out a one dimensional view next to an anchor in a viewport.\n *\n * @returns The view offset within the viewport.\n */\nexport function layout(viewportSize, viewSize, anchor) {\n  const layoutAfterAnchorBoundary = anchor.mode === LayoutAnchorMode.ALIGN ? anchor.offset : anchor.offset + anchor.size;\n  const layoutBeforeAnchorBoundary = anchor.mode === LayoutAnchorMode.ALIGN ? anchor.offset + anchor.size : anchor.offset;\n  if (anchor.position === 0 /* LayoutAnchorPosition.Before */) {\n    if (viewSize <= viewportSize - layoutAfterAnchorBoundary) {\n      return layoutAfterAnchorBoundary; // happy case, lay it out after the anchor\n    }\n    if (viewSize <= layoutBeforeAnchorBoundary) {\n      return layoutBeforeAnchorBoundary - viewSize; // ok case, lay it out before the anchor\n    }\n    return Math.max(viewportSize - viewSize, 0); // sad case, lay it over the anchor\n  } else {\n    if (viewSize <= layoutBeforeAnchorBoundary) {\n      return layoutBeforeAnchorBoundary - viewSize; // happy case, lay it out before the anchor\n    }\n    if (viewSize <= viewportSize - layoutAfterAnchorBoundary) {\n      return layoutAfterAnchorBoundary; // ok case, lay it out after the anchor\n    }\n    return 0; // sad case, lay it over the anchor\n  }\n}\nexport class ContextView extends Disposable {\n  constructor(container, domPosition) {\n    super();\n    this.container = null;\n    this.useFixedPosition = false;\n    this.useShadowDOM = false;\n    this.delegate = null;\n    this.toDisposeOnClean = Disposable.None;\n    this.toDisposeOnSetContainer = Disposable.None;\n    this.shadowRoot = null;\n    this.shadowRootHostElement = null;\n    this.view = DOM.$('.context-view');\n    DOM.hide(this.view);\n    this.setContainer(container, domPosition);\n    this._register(toDisposable(() => this.setContainer(null, 1 /* ContextViewDOMPosition.ABSOLUTE */)));\n  }\n  setContainer(container, domPosition) {\n    var _a;\n    this.useFixedPosition = domPosition !== 1 /* ContextViewDOMPosition.ABSOLUTE */;\n    const usedShadowDOM = this.useShadowDOM;\n    this.useShadowDOM = domPosition === 3 /* ContextViewDOMPosition.FIXED_SHADOW */;\n    if (container === this.container && usedShadowDOM === this.useShadowDOM) {\n      return; // container is the same and no shadow DOM usage has changed\n    }\n    if (this.container) {\n      this.toDisposeOnSetContainer.dispose();\n      if (this.shadowRoot) {\n        this.shadowRoot.removeChild(this.view);\n        this.shadowRoot = null;\n        (_a = this.shadowRootHostElement) === null || _a === void 0 ? void 0 : _a.remove();\n        this.shadowRootHostElement = null;\n      } else {\n        this.container.removeChild(this.view);\n      }\n      this.container = null;\n    }\n    if (container) {\n      this.container = container;\n      if (this.useShadowDOM) {\n        this.shadowRootHostElement = DOM.$('.shadow-root-host');\n        this.container.appendChild(this.shadowRootHostElement);\n        this.shadowRoot = this.shadowRootHostElement.attachShadow({\n          mode: 'open'\n        });\n        const style = document.createElement('style');\n        style.textContent = SHADOW_ROOT_CSS;\n        this.shadowRoot.appendChild(style);\n        this.shadowRoot.appendChild(this.view);\n        this.shadowRoot.appendChild(DOM.$('slot'));\n      } else {\n        this.container.appendChild(this.view);\n      }\n      const toDisposeOnSetContainer = new DisposableStore();\n      ContextView.BUBBLE_UP_EVENTS.forEach(event => {\n        toDisposeOnSetContainer.add(DOM.addStandardDisposableListener(this.container, event, e => {\n          this.onDOMEvent(e, false);\n        }));\n      });\n      ContextView.BUBBLE_DOWN_EVENTS.forEach(event => {\n        toDisposeOnSetContainer.add(DOM.addStandardDisposableListener(this.container, event, e => {\n          this.onDOMEvent(e, true);\n        }, true));\n      });\n      this.toDisposeOnSetContainer = toDisposeOnSetContainer;\n    }\n  }\n  show(delegate) {\n    var _a, _b, _c;\n    if (this.isVisible()) {\n      this.hide();\n    }\n    // Show static box\n    DOM.clearNode(this.view);\n    this.view.className = 'context-view monaco-component';\n    this.view.style.top = '0px';\n    this.view.style.left = '0px';\n    this.view.style.zIndex = `${2575 + ((_a = delegate.layer) !== null && _a !== void 0 ? _a : 0)}`;\n    this.view.style.position = this.useFixedPosition ? 'fixed' : 'absolute';\n    DOM.show(this.view);\n    // Render content\n    this.toDisposeOnClean = delegate.render(this.view) || Disposable.None;\n    // Set active delegate\n    this.delegate = delegate;\n    // Layout\n    this.doLayout();\n    // Focus\n    (_c = (_b = this.delegate).focus) === null || _c === void 0 ? void 0 : _c.call(_b);\n  }\n  getViewElement() {\n    return this.view;\n  }\n  layout() {\n    var _a, _b;\n    if (!this.isVisible()) {\n      return;\n    }\n    if (this.delegate.canRelayout === false && !(platform.isIOS && BrowserFeatures.pointerEvents)) {\n      this.hide();\n      return;\n    }\n    (_b = (_a = this.delegate) === null || _a === void 0 ? void 0 : _a.layout) === null || _b === void 0 ? void 0 : _b.call(_a);\n    this.doLayout();\n  }\n  doLayout() {\n    // Check that we still have a delegate - this.delegate.layout may have hidden\n    if (!this.isVisible()) {\n      return;\n    }\n    // Get anchor\n    const anchor = this.delegate.getAnchor();\n    // Compute around\n    let around;\n    // Get the element's position and size (to anchor the view)\n    if (DOM.isHTMLElement(anchor)) {\n      const elementPosition = DOM.getDomNodePagePosition(anchor);\n      // In areas where zoom is applied to the element or its ancestors, we need to adjust the size of the element\n      // e.g. The title bar has counter zoom behavior meaning it applies the inverse of zoom level.\n      // Window Zoom Level: 1.5, Title Bar Zoom: 1/1.5, Size Multiplier: 1.5\n      const zoom = DOM.getDomNodeZoomLevel(anchor);\n      around = {\n        top: elementPosition.top * zoom,\n        left: elementPosition.left * zoom,\n        width: elementPosition.width * zoom,\n        height: elementPosition.height * zoom\n      };\n    } else if (isAnchor(anchor)) {\n      around = {\n        top: anchor.y,\n        left: anchor.x,\n        width: anchor.width || 1,\n        height: anchor.height || 2\n      };\n    } else {\n      around = {\n        top: anchor.posy,\n        left: anchor.posx,\n        // We are about to position the context view where the mouse\n        // cursor is. To prevent the view being exactly under the mouse\n        // when showing and thus potentially triggering an action within,\n        // we treat the mouse location like a small sized block element.\n        width: 2,\n        height: 2\n      };\n    }\n    const viewSizeWidth = DOM.getTotalWidth(this.view);\n    const viewSizeHeight = DOM.getTotalHeight(this.view);\n    const anchorPosition = this.delegate.anchorPosition || 0 /* AnchorPosition.BELOW */;\n    const anchorAlignment = this.delegate.anchorAlignment || 0 /* AnchorAlignment.LEFT */;\n    const anchorAxisAlignment = this.delegate.anchorAxisAlignment || 0 /* AnchorAxisAlignment.VERTICAL */;\n    let top;\n    let left;\n    const activeWindow = DOM.getActiveWindow();\n    if (anchorAxisAlignment === 0 /* AnchorAxisAlignment.VERTICAL */) {\n      const verticalAnchor = {\n        offset: around.top - activeWindow.pageYOffset,\n        size: around.height,\n        position: anchorPosition === 0 /* AnchorPosition.BELOW */ ? 0 /* LayoutAnchorPosition.Before */ : 1 /* LayoutAnchorPosition.After */\n      };\n      const horizontalAnchor = {\n        offset: around.left,\n        size: around.width,\n        position: anchorAlignment === 0 /* AnchorAlignment.LEFT */ ? 0 /* LayoutAnchorPosition.Before */ : 1 /* LayoutAnchorPosition.After */,\n        mode: LayoutAnchorMode.ALIGN\n      };\n      top = layout(activeWindow.innerHeight, viewSizeHeight, verticalAnchor) + activeWindow.pageYOffset;\n      // if view intersects vertically with anchor,  we must avoid the anchor\n      if (Range.intersects({\n        start: top,\n        end: top + viewSizeHeight\n      }, {\n        start: verticalAnchor.offset,\n        end: verticalAnchor.offset + verticalAnchor.size\n      })) {\n        horizontalAnchor.mode = LayoutAnchorMode.AVOID;\n      }\n      left = layout(activeWindow.innerWidth, viewSizeWidth, horizontalAnchor);\n    } else {\n      const horizontalAnchor = {\n        offset: around.left,\n        size: around.width,\n        position: anchorAlignment === 0 /* AnchorAlignment.LEFT */ ? 0 /* LayoutAnchorPosition.Before */ : 1 /* LayoutAnchorPosition.After */\n      };\n      const verticalAnchor = {\n        offset: around.top,\n        size: around.height,\n        position: anchorPosition === 0 /* AnchorPosition.BELOW */ ? 0 /* LayoutAnchorPosition.Before */ : 1 /* LayoutAnchorPosition.After */,\n        mode: LayoutAnchorMode.ALIGN\n      };\n      left = layout(activeWindow.innerWidth, viewSizeWidth, horizontalAnchor);\n      // if view intersects horizontally with anchor, we must avoid the anchor\n      if (Range.intersects({\n        start: left,\n        end: left + viewSizeWidth\n      }, {\n        start: horizontalAnchor.offset,\n        end: horizontalAnchor.offset + horizontalAnchor.size\n      })) {\n        verticalAnchor.mode = LayoutAnchorMode.AVOID;\n      }\n      top = layout(activeWindow.innerHeight, viewSizeHeight, verticalAnchor) + activeWindow.pageYOffset;\n    }\n    this.view.classList.remove('top', 'bottom', 'left', 'right');\n    this.view.classList.add(anchorPosition === 0 /* AnchorPosition.BELOW */ ? 'bottom' : 'top');\n    this.view.classList.add(anchorAlignment === 0 /* AnchorAlignment.LEFT */ ? 'left' : 'right');\n    this.view.classList.toggle('fixed', this.useFixedPosition);\n    const containerPosition = DOM.getDomNodePagePosition(this.container);\n    this.view.style.top = `${top - (this.useFixedPosition ? DOM.getDomNodePagePosition(this.view).top : containerPosition.top)}px`;\n    this.view.style.left = `${left - (this.useFixedPosition ? DOM.getDomNodePagePosition(this.view).left : containerPosition.left)}px`;\n    this.view.style.width = 'initial';\n  }\n  hide(data) {\n    const delegate = this.delegate;\n    this.delegate = null;\n    if (delegate === null || delegate === void 0 ? void 0 : delegate.onHide) {\n      delegate.onHide(data);\n    }\n    this.toDisposeOnClean.dispose();\n    DOM.hide(this.view);\n  }\n  isVisible() {\n    return !!this.delegate;\n  }\n  onDOMEvent(e, onCapture) {\n    if (this.delegate) {\n      if (this.delegate.onDOMEvent) {\n        this.delegate.onDOMEvent(e, DOM.getWindow(e).document.activeElement);\n      } else if (onCapture && !DOM.isAncestor(e.target, this.container)) {\n        this.hide();\n      }\n    }\n  }\n  dispose() {\n    this.hide();\n    super.dispose();\n  }\n}\nContextView.BUBBLE_UP_EVENTS = ['click', 'keydown', 'focus', 'blur'];\nContextView.BUBBLE_DOWN_EVENTS = ['click'];\nconst SHADOW_ROOT_CSS = /* css */`\n\t:host {\n\t\tall: initial; /* 1st rule so subsequent properties are reset. */\n\t}\n\n\t.codicon[class*='codicon-'] {\n\t\tfont: normal normal normal 16px/1 codicon;\n\t\tdisplay: inline-block;\n\t\ttext-decoration: none;\n\t\ttext-rendering: auto;\n\t\ttext-align: center;\n\t\t-webkit-font-smoothing: antialiased;\n\t\t-moz-osx-font-smoothing: grayscale;\n\t\tuser-select: none;\n\t\t-webkit-user-select: none;\n\t\t-ms-user-select: none;\n\t}\n\n\t:host {\n\t\tfont-family: -apple-system, BlinkMacSystemFont, \"Segoe WPC\", \"Segoe UI\", \"HelveticaNeue-Light\", system-ui, \"Ubuntu\", \"Droid Sans\", sans-serif;\n\t}\n\n\t:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }\n\t:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, \"PingFang SC\", \"Hiragino Sans GB\", sans-serif; }\n\t:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, \"PingFang TC\", sans-serif; }\n\t:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, \"Hiragino Kaku Gothic Pro\", sans-serif; }\n\t:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, \"Nanum Gothic\", \"Apple SD Gothic Neo\", \"AppleGothic\", sans-serif; }\n\n\t:host-context(.windows) { font-family: \"Segoe WPC\", \"Segoe UI\", sans-serif; }\n\t:host-context(.windows:lang(zh-Hans)) { font-family: \"Segoe WPC\", \"Segoe UI\", \"Microsoft YaHei\", sans-serif; }\n\t:host-context(.windows:lang(zh-Hant)) { font-family: \"Segoe WPC\", \"Segoe UI\", \"Microsoft Jhenghei\", sans-serif; }\n\t:host-context(.windows:lang(ja)) { font-family: \"Segoe WPC\", \"Segoe UI\", \"Yu Gothic UI\", \"Meiryo UI\", sans-serif; }\n\t:host-context(.windows:lang(ko)) { font-family: \"Segoe WPC\", \"Segoe UI\", \"Malgun Gothic\", \"Dotom\", sans-serif; }\n\n\t:host-context(.linux) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", sans-serif; }\n\t:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", \"Source Han Sans SC\", \"Source Han Sans CN\", \"Source Han Sans\", sans-serif; }\n\t:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", \"Source Han Sans TC\", \"Source Han Sans TW\", \"Source Han Sans\", sans-serif; }\n\t:host-context(.linux:lang(ja)) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", \"Source Han Sans J\", \"Source Han Sans JP\", \"Source Han Sans\", sans-serif; }\n\t:host-context(.linux:lang(ko)) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", \"Source Han Sans K\", \"Source Han Sans JR\", \"Source Han Sans\", \"UnDotum\", \"FBaekmuk Gulim\", sans-serif; }\n`;","map":{"version":3,"names":["BrowserFeatures","DOM","Disposable","DisposableStore","toDisposable","platform","Range","isAnchor","obj","anchor","x","y","LayoutAnchorMode","layout","viewportSize","viewSize","layoutAfterAnchorBoundary","mode","ALIGN","offset","size","layoutBeforeAnchorBoundary","position","Math","max","ContextView","constructor","container","domPosition","useFixedPosition","useShadowDOM","delegate","toDisposeOnClean","None","toDisposeOnSetContainer","shadowRoot","shadowRootHostElement","view","$","hide","setContainer","_register","_a","usedShadowDOM","dispose","removeChild","remove","appendChild","attachShadow","style","document","createElement","textContent","SHADOW_ROOT_CSS","BUBBLE_UP_EVENTS","forEach","event","add","addStandardDisposableListener","e","onDOMEvent","BUBBLE_DOWN_EVENTS","show","_b","_c","isVisible","clearNode","className","top","left","zIndex","layer","render","doLayout","focus","call","getViewElement","canRelayout","isIOS","pointerEvents","getAnchor","around","isHTMLElement","elementPosition","getDomNodePagePosition","zoom","getDomNodeZoomLevel","width","height","posy","posx","viewSizeWidth","getTotalWidth","viewSizeHeight","getTotalHeight","anchorPosition","anchorAlignment","anchorAxisAlignment","activeWindow","getActiveWindow","verticalAnchor","pageYOffset","horizontalAnchor","innerHeight","intersects","start","end","AVOID","innerWidth","classList","toggle","containerPosition","data","onHide","onCapture","getWindow","activeElement","isAncestor","target"],"sources":["/home/arslan/modojo/node_modules/monaco-editor/esm/vs/base/browser/ui/contextview/contextview.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { BrowserFeatures } from '../../canIUse.js';\nimport * as DOM from '../../dom.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../common/lifecycle.js';\nimport * as platform from '../../../common/platform.js';\nimport { Range } from '../../../common/range.js';\nimport './contextview.css';\nexport function isAnchor(obj) {\n    const anchor = obj;\n    return !!anchor && typeof anchor.x === 'number' && typeof anchor.y === 'number';\n}\nexport var LayoutAnchorMode;\n(function (LayoutAnchorMode) {\n    LayoutAnchorMode[LayoutAnchorMode[\"AVOID\"] = 0] = \"AVOID\";\n    LayoutAnchorMode[LayoutAnchorMode[\"ALIGN\"] = 1] = \"ALIGN\";\n})(LayoutAnchorMode || (LayoutAnchorMode = {}));\n/**\n * Lays out a one dimensional view next to an anchor in a viewport.\n *\n * @returns The view offset within the viewport.\n */\nexport function layout(viewportSize, viewSize, anchor) {\n    const layoutAfterAnchorBoundary = anchor.mode === LayoutAnchorMode.ALIGN ? anchor.offset : anchor.offset + anchor.size;\n    const layoutBeforeAnchorBoundary = anchor.mode === LayoutAnchorMode.ALIGN ? anchor.offset + anchor.size : anchor.offset;\n    if (anchor.position === 0 /* LayoutAnchorPosition.Before */) {\n        if (viewSize <= viewportSize - layoutAfterAnchorBoundary) {\n            return layoutAfterAnchorBoundary; // happy case, lay it out after the anchor\n        }\n        if (viewSize <= layoutBeforeAnchorBoundary) {\n            return layoutBeforeAnchorBoundary - viewSize; // ok case, lay it out before the anchor\n        }\n        return Math.max(viewportSize - viewSize, 0); // sad case, lay it over the anchor\n    }\n    else {\n        if (viewSize <= layoutBeforeAnchorBoundary) {\n            return layoutBeforeAnchorBoundary - viewSize; // happy case, lay it out before the anchor\n        }\n        if (viewSize <= viewportSize - layoutAfterAnchorBoundary) {\n            return layoutAfterAnchorBoundary; // ok case, lay it out after the anchor\n        }\n        return 0; // sad case, lay it over the anchor\n    }\n}\nexport class ContextView extends Disposable {\n    constructor(container, domPosition) {\n        super();\n        this.container = null;\n        this.useFixedPosition = false;\n        this.useShadowDOM = false;\n        this.delegate = null;\n        this.toDisposeOnClean = Disposable.None;\n        this.toDisposeOnSetContainer = Disposable.None;\n        this.shadowRoot = null;\n        this.shadowRootHostElement = null;\n        this.view = DOM.$('.context-view');\n        DOM.hide(this.view);\n        this.setContainer(container, domPosition);\n        this._register(toDisposable(() => this.setContainer(null, 1 /* ContextViewDOMPosition.ABSOLUTE */)));\n    }\n    setContainer(container, domPosition) {\n        var _a;\n        this.useFixedPosition = domPosition !== 1 /* ContextViewDOMPosition.ABSOLUTE */;\n        const usedShadowDOM = this.useShadowDOM;\n        this.useShadowDOM = domPosition === 3 /* ContextViewDOMPosition.FIXED_SHADOW */;\n        if (container === this.container && usedShadowDOM === this.useShadowDOM) {\n            return; // container is the same and no shadow DOM usage has changed\n        }\n        if (this.container) {\n            this.toDisposeOnSetContainer.dispose();\n            if (this.shadowRoot) {\n                this.shadowRoot.removeChild(this.view);\n                this.shadowRoot = null;\n                (_a = this.shadowRootHostElement) === null || _a === void 0 ? void 0 : _a.remove();\n                this.shadowRootHostElement = null;\n            }\n            else {\n                this.container.removeChild(this.view);\n            }\n            this.container = null;\n        }\n        if (container) {\n            this.container = container;\n            if (this.useShadowDOM) {\n                this.shadowRootHostElement = DOM.$('.shadow-root-host');\n                this.container.appendChild(this.shadowRootHostElement);\n                this.shadowRoot = this.shadowRootHostElement.attachShadow({ mode: 'open' });\n                const style = document.createElement('style');\n                style.textContent = SHADOW_ROOT_CSS;\n                this.shadowRoot.appendChild(style);\n                this.shadowRoot.appendChild(this.view);\n                this.shadowRoot.appendChild(DOM.$('slot'));\n            }\n            else {\n                this.container.appendChild(this.view);\n            }\n            const toDisposeOnSetContainer = new DisposableStore();\n            ContextView.BUBBLE_UP_EVENTS.forEach(event => {\n                toDisposeOnSetContainer.add(DOM.addStandardDisposableListener(this.container, event, e => {\n                    this.onDOMEvent(e, false);\n                }));\n            });\n            ContextView.BUBBLE_DOWN_EVENTS.forEach(event => {\n                toDisposeOnSetContainer.add(DOM.addStandardDisposableListener(this.container, event, e => {\n                    this.onDOMEvent(e, true);\n                }, true));\n            });\n            this.toDisposeOnSetContainer = toDisposeOnSetContainer;\n        }\n    }\n    show(delegate) {\n        var _a, _b, _c;\n        if (this.isVisible()) {\n            this.hide();\n        }\n        // Show static box\n        DOM.clearNode(this.view);\n        this.view.className = 'context-view monaco-component';\n        this.view.style.top = '0px';\n        this.view.style.left = '0px';\n        this.view.style.zIndex = `${2575 + ((_a = delegate.layer) !== null && _a !== void 0 ? _a : 0)}`;\n        this.view.style.position = this.useFixedPosition ? 'fixed' : 'absolute';\n        DOM.show(this.view);\n        // Render content\n        this.toDisposeOnClean = delegate.render(this.view) || Disposable.None;\n        // Set active delegate\n        this.delegate = delegate;\n        // Layout\n        this.doLayout();\n        // Focus\n        (_c = (_b = this.delegate).focus) === null || _c === void 0 ? void 0 : _c.call(_b);\n    }\n    getViewElement() {\n        return this.view;\n    }\n    layout() {\n        var _a, _b;\n        if (!this.isVisible()) {\n            return;\n        }\n        if (this.delegate.canRelayout === false && !(platform.isIOS && BrowserFeatures.pointerEvents)) {\n            this.hide();\n            return;\n        }\n        (_b = (_a = this.delegate) === null || _a === void 0 ? void 0 : _a.layout) === null || _b === void 0 ? void 0 : _b.call(_a);\n        this.doLayout();\n    }\n    doLayout() {\n        // Check that we still have a delegate - this.delegate.layout may have hidden\n        if (!this.isVisible()) {\n            return;\n        }\n        // Get anchor\n        const anchor = this.delegate.getAnchor();\n        // Compute around\n        let around;\n        // Get the element's position and size (to anchor the view)\n        if (DOM.isHTMLElement(anchor)) {\n            const elementPosition = DOM.getDomNodePagePosition(anchor);\n            // In areas where zoom is applied to the element or its ancestors, we need to adjust the size of the element\n            // e.g. The title bar has counter zoom behavior meaning it applies the inverse of zoom level.\n            // Window Zoom Level: 1.5, Title Bar Zoom: 1/1.5, Size Multiplier: 1.5\n            const zoom = DOM.getDomNodeZoomLevel(anchor);\n            around = {\n                top: elementPosition.top * zoom,\n                left: elementPosition.left * zoom,\n                width: elementPosition.width * zoom,\n                height: elementPosition.height * zoom\n            };\n        }\n        else if (isAnchor(anchor)) {\n            around = {\n                top: anchor.y,\n                left: anchor.x,\n                width: anchor.width || 1,\n                height: anchor.height || 2\n            };\n        }\n        else {\n            around = {\n                top: anchor.posy,\n                left: anchor.posx,\n                // We are about to position the context view where the mouse\n                // cursor is. To prevent the view being exactly under the mouse\n                // when showing and thus potentially triggering an action within,\n                // we treat the mouse location like a small sized block element.\n                width: 2,\n                height: 2\n            };\n        }\n        const viewSizeWidth = DOM.getTotalWidth(this.view);\n        const viewSizeHeight = DOM.getTotalHeight(this.view);\n        const anchorPosition = this.delegate.anchorPosition || 0 /* AnchorPosition.BELOW */;\n        const anchorAlignment = this.delegate.anchorAlignment || 0 /* AnchorAlignment.LEFT */;\n        const anchorAxisAlignment = this.delegate.anchorAxisAlignment || 0 /* AnchorAxisAlignment.VERTICAL */;\n        let top;\n        let left;\n        const activeWindow = DOM.getActiveWindow();\n        if (anchorAxisAlignment === 0 /* AnchorAxisAlignment.VERTICAL */) {\n            const verticalAnchor = { offset: around.top - activeWindow.pageYOffset, size: around.height, position: anchorPosition === 0 /* AnchorPosition.BELOW */ ? 0 /* LayoutAnchorPosition.Before */ : 1 /* LayoutAnchorPosition.After */ };\n            const horizontalAnchor = { offset: around.left, size: around.width, position: anchorAlignment === 0 /* AnchorAlignment.LEFT */ ? 0 /* LayoutAnchorPosition.Before */ : 1 /* LayoutAnchorPosition.After */, mode: LayoutAnchorMode.ALIGN };\n            top = layout(activeWindow.innerHeight, viewSizeHeight, verticalAnchor) + activeWindow.pageYOffset;\n            // if view intersects vertically with anchor,  we must avoid the anchor\n            if (Range.intersects({ start: top, end: top + viewSizeHeight }, { start: verticalAnchor.offset, end: verticalAnchor.offset + verticalAnchor.size })) {\n                horizontalAnchor.mode = LayoutAnchorMode.AVOID;\n            }\n            left = layout(activeWindow.innerWidth, viewSizeWidth, horizontalAnchor);\n        }\n        else {\n            const horizontalAnchor = { offset: around.left, size: around.width, position: anchorAlignment === 0 /* AnchorAlignment.LEFT */ ? 0 /* LayoutAnchorPosition.Before */ : 1 /* LayoutAnchorPosition.After */ };\n            const verticalAnchor = { offset: around.top, size: around.height, position: anchorPosition === 0 /* AnchorPosition.BELOW */ ? 0 /* LayoutAnchorPosition.Before */ : 1 /* LayoutAnchorPosition.After */, mode: LayoutAnchorMode.ALIGN };\n            left = layout(activeWindow.innerWidth, viewSizeWidth, horizontalAnchor);\n            // if view intersects horizontally with anchor, we must avoid the anchor\n            if (Range.intersects({ start: left, end: left + viewSizeWidth }, { start: horizontalAnchor.offset, end: horizontalAnchor.offset + horizontalAnchor.size })) {\n                verticalAnchor.mode = LayoutAnchorMode.AVOID;\n            }\n            top = layout(activeWindow.innerHeight, viewSizeHeight, verticalAnchor) + activeWindow.pageYOffset;\n        }\n        this.view.classList.remove('top', 'bottom', 'left', 'right');\n        this.view.classList.add(anchorPosition === 0 /* AnchorPosition.BELOW */ ? 'bottom' : 'top');\n        this.view.classList.add(anchorAlignment === 0 /* AnchorAlignment.LEFT */ ? 'left' : 'right');\n        this.view.classList.toggle('fixed', this.useFixedPosition);\n        const containerPosition = DOM.getDomNodePagePosition(this.container);\n        this.view.style.top = `${top - (this.useFixedPosition ? DOM.getDomNodePagePosition(this.view).top : containerPosition.top)}px`;\n        this.view.style.left = `${left - (this.useFixedPosition ? DOM.getDomNodePagePosition(this.view).left : containerPosition.left)}px`;\n        this.view.style.width = 'initial';\n    }\n    hide(data) {\n        const delegate = this.delegate;\n        this.delegate = null;\n        if (delegate === null || delegate === void 0 ? void 0 : delegate.onHide) {\n            delegate.onHide(data);\n        }\n        this.toDisposeOnClean.dispose();\n        DOM.hide(this.view);\n    }\n    isVisible() {\n        return !!this.delegate;\n    }\n    onDOMEvent(e, onCapture) {\n        if (this.delegate) {\n            if (this.delegate.onDOMEvent) {\n                this.delegate.onDOMEvent(e, DOM.getWindow(e).document.activeElement);\n            }\n            else if (onCapture && !DOM.isAncestor(e.target, this.container)) {\n                this.hide();\n            }\n        }\n    }\n    dispose() {\n        this.hide();\n        super.dispose();\n    }\n}\nContextView.BUBBLE_UP_EVENTS = ['click', 'keydown', 'focus', 'blur'];\nContextView.BUBBLE_DOWN_EVENTS = ['click'];\nconst SHADOW_ROOT_CSS = /* css */ `\n\t:host {\n\t\tall: initial; /* 1st rule so subsequent properties are reset. */\n\t}\n\n\t.codicon[class*='codicon-'] {\n\t\tfont: normal normal normal 16px/1 codicon;\n\t\tdisplay: inline-block;\n\t\ttext-decoration: none;\n\t\ttext-rendering: auto;\n\t\ttext-align: center;\n\t\t-webkit-font-smoothing: antialiased;\n\t\t-moz-osx-font-smoothing: grayscale;\n\t\tuser-select: none;\n\t\t-webkit-user-select: none;\n\t\t-ms-user-select: none;\n\t}\n\n\t:host {\n\t\tfont-family: -apple-system, BlinkMacSystemFont, \"Segoe WPC\", \"Segoe UI\", \"HelveticaNeue-Light\", system-ui, \"Ubuntu\", \"Droid Sans\", sans-serif;\n\t}\n\n\t:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }\n\t:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, \"PingFang SC\", \"Hiragino Sans GB\", sans-serif; }\n\t:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, \"PingFang TC\", sans-serif; }\n\t:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, \"Hiragino Kaku Gothic Pro\", sans-serif; }\n\t:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, \"Nanum Gothic\", \"Apple SD Gothic Neo\", \"AppleGothic\", sans-serif; }\n\n\t:host-context(.windows) { font-family: \"Segoe WPC\", \"Segoe UI\", sans-serif; }\n\t:host-context(.windows:lang(zh-Hans)) { font-family: \"Segoe WPC\", \"Segoe UI\", \"Microsoft YaHei\", sans-serif; }\n\t:host-context(.windows:lang(zh-Hant)) { font-family: \"Segoe WPC\", \"Segoe UI\", \"Microsoft Jhenghei\", sans-serif; }\n\t:host-context(.windows:lang(ja)) { font-family: \"Segoe WPC\", \"Segoe UI\", \"Yu Gothic UI\", \"Meiryo UI\", sans-serif; }\n\t:host-context(.windows:lang(ko)) { font-family: \"Segoe WPC\", \"Segoe UI\", \"Malgun Gothic\", \"Dotom\", sans-serif; }\n\n\t:host-context(.linux) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", sans-serif; }\n\t:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", \"Source Han Sans SC\", \"Source Han Sans CN\", \"Source Han Sans\", sans-serif; }\n\t:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", \"Source Han Sans TC\", \"Source Han Sans TW\", \"Source Han Sans\", sans-serif; }\n\t:host-context(.linux:lang(ja)) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", \"Source Han Sans J\", \"Source Han Sans JP\", \"Source Han Sans\", sans-serif; }\n\t:host-context(.linux:lang(ko)) { font-family: system-ui, \"Ubuntu\", \"Droid Sans\", \"Source Han Sans K\", \"Source Han Sans JR\", \"Source Han Sans\", \"UnDotum\", \"FBaekmuk Gulim\", sans-serif; }\n`;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}