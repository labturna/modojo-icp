{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { applyFontInfo } from './domFontInfo.js';\nexport class CharWidthRequest {\n  constructor(chr, type) {\n    this.chr = chr;\n    this.type = type;\n    this.width = 0;\n  }\n  fulfill(width) {\n    this.width = width;\n  }\n}\nclass DomCharWidthReader {\n  constructor(bareFontInfo, requests) {\n    this._bareFontInfo = bareFontInfo;\n    this._requests = requests;\n    this._container = null;\n    this._testElements = null;\n  }\n  read(targetWindow) {\n    // Create a test container with all these test elements\n    this._createDomElements();\n    // Add the container to the DOM\n    targetWindow.document.body.appendChild(this._container);\n    // Read character widths\n    this._readFromDomElements();\n    // Remove the container from the DOM\n    targetWindow.document.body.removeChild(this._container);\n    this._container = null;\n    this._testElements = null;\n  }\n  _createDomElements() {\n    const container = document.createElement('div');\n    container.style.position = 'absolute';\n    container.style.top = '-50000px';\n    container.style.width = '50000px';\n    const regularDomNode = document.createElement('div');\n    applyFontInfo(regularDomNode, this._bareFontInfo);\n    container.appendChild(regularDomNode);\n    const boldDomNode = document.createElement('div');\n    applyFontInfo(boldDomNode, this._bareFontInfo);\n    boldDomNode.style.fontWeight = 'bold';\n    container.appendChild(boldDomNode);\n    const italicDomNode = document.createElement('div');\n    applyFontInfo(italicDomNode, this._bareFontInfo);\n    italicDomNode.style.fontStyle = 'italic';\n    container.appendChild(italicDomNode);\n    const testElements = [];\n    for (const request of this._requests) {\n      let parent;\n      if (request.type === 0 /* CharWidthRequestType.Regular */) {\n        parent = regularDomNode;\n      }\n      if (request.type === 2 /* CharWidthRequestType.Bold */) {\n        parent = boldDomNode;\n      }\n      if (request.type === 1 /* CharWidthRequestType.Italic */) {\n        parent = italicDomNode;\n      }\n      parent.appendChild(document.createElement('br'));\n      const testElement = document.createElement('span');\n      DomCharWidthReader._render(testElement, request);\n      parent.appendChild(testElement);\n      testElements.push(testElement);\n    }\n    this._container = container;\n    this._testElements = testElements;\n  }\n  static _render(testElement, request) {\n    if (request.chr === ' ') {\n      let htmlString = '\\u00a0';\n      // Repeat character 256 (2^8) times\n      for (let i = 0; i < 8; i++) {\n        htmlString += htmlString;\n      }\n      testElement.innerText = htmlString;\n    } else {\n      let testString = request.chr;\n      // Repeat character 256 (2^8) times\n      for (let i = 0; i < 8; i++) {\n        testString += testString;\n      }\n      testElement.textContent = testString;\n    }\n  }\n  _readFromDomElements() {\n    for (let i = 0, len = this._requests.length; i < len; i++) {\n      const request = this._requests[i];\n      const testElement = this._testElements[i];\n      request.fulfill(testElement.offsetWidth / 256);\n    }\n  }\n}\nexport function readCharWidths(targetWindow, bareFontInfo, requests) {\n  const reader = new DomCharWidthReader(bareFontInfo, requests);\n  reader.read(targetWindow);\n}","map":{"version":3,"names":["applyFontInfo","CharWidthRequest","constructor","chr","type","width","fulfill","DomCharWidthReader","bareFontInfo","requests","_bareFontInfo","_requests","_container","_testElements","read","targetWindow","_createDomElements","document","body","appendChild","_readFromDomElements","removeChild","container","createElement","style","position","top","regularDomNode","boldDomNode","fontWeight","italicDomNode","fontStyle","testElements","request","parent","testElement","_render","push","htmlString","i","innerText","testString","textContent","len","length","offsetWidth","readCharWidths","reader"],"sources":["/home/arslan/modojo/node_modules/monaco-editor/esm/vs/editor/browser/config/charWidthReader.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { applyFontInfo } from './domFontInfo.js';\nexport class CharWidthRequest {\n    constructor(chr, type) {\n        this.chr = chr;\n        this.type = type;\n        this.width = 0;\n    }\n    fulfill(width) {\n        this.width = width;\n    }\n}\nclass DomCharWidthReader {\n    constructor(bareFontInfo, requests) {\n        this._bareFontInfo = bareFontInfo;\n        this._requests = requests;\n        this._container = null;\n        this._testElements = null;\n    }\n    read(targetWindow) {\n        // Create a test container with all these test elements\n        this._createDomElements();\n        // Add the container to the DOM\n        targetWindow.document.body.appendChild(this._container);\n        // Read character widths\n        this._readFromDomElements();\n        // Remove the container from the DOM\n        targetWindow.document.body.removeChild(this._container);\n        this._container = null;\n        this._testElements = null;\n    }\n    _createDomElements() {\n        const container = document.createElement('div');\n        container.style.position = 'absolute';\n        container.style.top = '-50000px';\n        container.style.width = '50000px';\n        const regularDomNode = document.createElement('div');\n        applyFontInfo(regularDomNode, this._bareFontInfo);\n        container.appendChild(regularDomNode);\n        const boldDomNode = document.createElement('div');\n        applyFontInfo(boldDomNode, this._bareFontInfo);\n        boldDomNode.style.fontWeight = 'bold';\n        container.appendChild(boldDomNode);\n        const italicDomNode = document.createElement('div');\n        applyFontInfo(italicDomNode, this._bareFontInfo);\n        italicDomNode.style.fontStyle = 'italic';\n        container.appendChild(italicDomNode);\n        const testElements = [];\n        for (const request of this._requests) {\n            let parent;\n            if (request.type === 0 /* CharWidthRequestType.Regular */) {\n                parent = regularDomNode;\n            }\n            if (request.type === 2 /* CharWidthRequestType.Bold */) {\n                parent = boldDomNode;\n            }\n            if (request.type === 1 /* CharWidthRequestType.Italic */) {\n                parent = italicDomNode;\n            }\n            parent.appendChild(document.createElement('br'));\n            const testElement = document.createElement('span');\n            DomCharWidthReader._render(testElement, request);\n            parent.appendChild(testElement);\n            testElements.push(testElement);\n        }\n        this._container = container;\n        this._testElements = testElements;\n    }\n    static _render(testElement, request) {\n        if (request.chr === ' ') {\n            let htmlString = '\\u00a0';\n            // Repeat character 256 (2^8) times\n            for (let i = 0; i < 8; i++) {\n                htmlString += htmlString;\n            }\n            testElement.innerText = htmlString;\n        }\n        else {\n            let testString = request.chr;\n            // Repeat character 256 (2^8) times\n            for (let i = 0; i < 8; i++) {\n                testString += testString;\n            }\n            testElement.textContent = testString;\n        }\n    }\n    _readFromDomElements() {\n        for (let i = 0, len = this._requests.length; i < len; i++) {\n            const request = this._requests[i];\n            const testElement = this._testElements[i];\n            request.fulfill(testElement.offsetWidth / 256);\n        }\n    }\n}\nexport function readCharWidths(targetWindow, bareFontInfo, requests) {\n    const reader = new DomCharWidthReader(bareFontInfo, requests);\n    reader.read(targetWindow);\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}