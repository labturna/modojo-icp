{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { CoreEditingCommands } from '../../../browser/coreCommands.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { ReplaceCommand, ReplaceCommandThatPreservesSelection, ReplaceCommandThatSelectsText } from '../../../common/commands/replaceCommand.js';\nimport { TrimTrailingWhitespaceCommand } from '../../../common/commands/trimTrailingWhitespaceCommand.js';\nimport { TypeOperations } from '../../../common/cursor/cursorTypeOperations.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { CopyLinesCommand } from './copyLinesCommand.js';\nimport { MoveLinesCommand } from './moveLinesCommand.js';\nimport { SortLinesCommand } from './sortLinesCommand.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\n// copy lines\nclass AbstractCopyLinesAction extends EditorAction {\n  constructor(down, opts) {\n    super(opts);\n    this.down = down;\n  }\n  run(_accessor, editor) {\n    if (!editor.hasModel()) {\n      return;\n    }\n    const selections = editor.getSelections().map((selection, index) => ({\n      selection,\n      index,\n      ignore: false\n    }));\n    selections.sort((a, b) => Range.compareRangesUsingStarts(a.selection, b.selection));\n    // Remove selections that would result in copying the same line\n    let prev = selections[0];\n    for (let i = 1; i < selections.length; i++) {\n      const curr = selections[i];\n      if (prev.selection.endLineNumber === curr.selection.startLineNumber) {\n        // these two selections would copy the same line\n        if (prev.index < curr.index) {\n          // prev wins\n          curr.ignore = true;\n        } else {\n          // curr wins\n          prev.ignore = true;\n          prev = curr;\n        }\n      }\n    }\n    const commands = [];\n    for (const selection of selections) {\n      commands.push(new CopyLinesCommand(selection.selection, this.down, selection.ignore));\n    }\n    editor.pushUndoStop();\n    editor.executeCommands(this.id, commands);\n    editor.pushUndoStop();\n  }\n}\nclass CopyLinesUpAction extends AbstractCopyLinesAction {\n  constructor() {\n    super(false, {\n      id: 'editor.action.copyLinesUpAction',\n      label: nls.localize('lines.copyUp', \"Copy Line Up\"),\n      alias: 'Copy Line Up',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 16 /* KeyCode.UpArrow */,\n        linux: {\n          primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 16 /* KeyCode.UpArrow */\n        },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      menuOpts: {\n        menuId: MenuId.MenubarSelectionMenu,\n        group: '2_line',\n        title: nls.localize({\n          key: 'miCopyLinesUp',\n          comment: ['&& denotes a mnemonic']\n        }, \"&&Copy Line Up\"),\n        order: 1\n      }\n    });\n  }\n}\nclass CopyLinesDownAction extends AbstractCopyLinesAction {\n  constructor() {\n    super(true, {\n      id: 'editor.action.copyLinesDownAction',\n      label: nls.localize('lines.copyDown', \"Copy Line Down\"),\n      alias: 'Copy Line Down',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 18 /* KeyCode.DownArrow */,\n        linux: {\n          primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 18 /* KeyCode.DownArrow */\n        },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      menuOpts: {\n        menuId: MenuId.MenubarSelectionMenu,\n        group: '2_line',\n        title: nls.localize({\n          key: 'miCopyLinesDown',\n          comment: ['&& denotes a mnemonic']\n        }, \"Co&&py Line Down\"),\n        order: 2\n      }\n    });\n  }\n}\nexport class DuplicateSelectionAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.duplicateSelection',\n      label: nls.localize('duplicateSelection', \"Duplicate Selection\"),\n      alias: 'Duplicate Selection',\n      precondition: EditorContextKeys.writable,\n      menuOpts: {\n        menuId: MenuId.MenubarSelectionMenu,\n        group: '2_line',\n        title: nls.localize({\n          key: 'miDuplicateSelection',\n          comment: ['&& denotes a mnemonic']\n        }, \"&&Duplicate Selection\"),\n        order: 5\n      }\n    });\n  }\n  run(accessor, editor, args) {\n    if (!editor.hasModel()) {\n      return;\n    }\n    const commands = [];\n    const selections = editor.getSelections();\n    const model = editor.getModel();\n    for (const selection of selections) {\n      if (selection.isEmpty()) {\n        commands.push(new CopyLinesCommand(selection, true));\n      } else {\n        const insertSelection = new Selection(selection.endLineNumber, selection.endColumn, selection.endLineNumber, selection.endColumn);\n        commands.push(new ReplaceCommandThatSelectsText(insertSelection, model.getValueInRange(selection)));\n      }\n    }\n    editor.pushUndoStop();\n    editor.executeCommands(this.id, commands);\n    editor.pushUndoStop();\n  }\n}\n// move lines\nclass AbstractMoveLinesAction extends EditorAction {\n  constructor(down, opts) {\n    super(opts);\n    this.down = down;\n  }\n  run(accessor, editor) {\n    const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n    const commands = [];\n    const selections = editor.getSelections() || [];\n    const autoIndent = editor.getOption(12 /* EditorOption.autoIndent */);\n    for (const selection of selections) {\n      commands.push(new MoveLinesCommand(selection, this.down, autoIndent, languageConfigurationService));\n    }\n    editor.pushUndoStop();\n    editor.executeCommands(this.id, commands);\n    editor.pushUndoStop();\n  }\n}\nclass MoveLinesUpAction extends AbstractMoveLinesAction {\n  constructor() {\n    super(false, {\n      id: 'editor.action.moveLinesUpAction',\n      label: nls.localize('lines.moveUp', \"Move Line Up\"),\n      alias: 'Move Line Up',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */,\n        linux: {\n          primary: 512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */\n        },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      menuOpts: {\n        menuId: MenuId.MenubarSelectionMenu,\n        group: '2_line',\n        title: nls.localize({\n          key: 'miMoveLinesUp',\n          comment: ['&& denotes a mnemonic']\n        }, \"Mo&&ve Line Up\"),\n        order: 3\n      }\n    });\n  }\n}\nclass MoveLinesDownAction extends AbstractMoveLinesAction {\n  constructor() {\n    super(true, {\n      id: 'editor.action.moveLinesDownAction',\n      label: nls.localize('lines.moveDown', \"Move Line Down\"),\n      alias: 'Move Line Down',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */,\n        linux: {\n          primary: 512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */\n        },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      menuOpts: {\n        menuId: MenuId.MenubarSelectionMenu,\n        group: '2_line',\n        title: nls.localize({\n          key: 'miMoveLinesDown',\n          comment: ['&& denotes a mnemonic']\n        }, \"Move &&Line Down\"),\n        order: 4\n      }\n    });\n  }\n}\nexport class AbstractSortLinesAction extends EditorAction {\n  constructor(descending, opts) {\n    super(opts);\n    this.descending = descending;\n  }\n  run(_accessor, editor) {\n    if (!editor.hasModel()) {\n      return;\n    }\n    const model = editor.getModel();\n    let selections = editor.getSelections();\n    if (selections.length === 1 && selections[0].isEmpty()) {\n      // Apply to whole document.\n      selections = [new Selection(1, 1, model.getLineCount(), model.getLineMaxColumn(model.getLineCount()))];\n    }\n    for (const selection of selections) {\n      if (!SortLinesCommand.canRun(editor.getModel(), selection, this.descending)) {\n        return;\n      }\n    }\n    const commands = [];\n    for (let i = 0, len = selections.length; i < len; i++) {\n      commands[i] = new SortLinesCommand(selections[i], this.descending);\n    }\n    editor.pushUndoStop();\n    editor.executeCommands(this.id, commands);\n    editor.pushUndoStop();\n  }\n}\nexport class SortLinesAscendingAction extends AbstractSortLinesAction {\n  constructor() {\n    super(false, {\n      id: 'editor.action.sortLinesAscending',\n      label: nls.localize('lines.sortAscending', \"Sort Lines Ascending\"),\n      alias: 'Sort Lines Ascending',\n      precondition: EditorContextKeys.writable\n    });\n  }\n}\nexport class SortLinesDescendingAction extends AbstractSortLinesAction {\n  constructor() {\n    super(true, {\n      id: 'editor.action.sortLinesDescending',\n      label: nls.localize('lines.sortDescending', \"Sort Lines Descending\"),\n      alias: 'Sort Lines Descending',\n      precondition: EditorContextKeys.writable\n    });\n  }\n}\nexport class DeleteDuplicateLinesAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.removeDuplicateLines',\n      label: nls.localize('lines.deleteDuplicates', \"Delete Duplicate Lines\"),\n      alias: 'Delete Duplicate Lines',\n      precondition: EditorContextKeys.writable\n    });\n  }\n  run(_accessor, editor) {\n    if (!editor.hasModel()) {\n      return;\n    }\n    const model = editor.getModel();\n    if (model.getLineCount() === 1 && model.getLineMaxColumn(1) === 1) {\n      return;\n    }\n    const edits = [];\n    const endCursorState = [];\n    let linesDeleted = 0;\n    let updateSelection = true;\n    let selections = editor.getSelections();\n    if (selections.length === 1 && selections[0].isEmpty()) {\n      // Apply to whole document.\n      selections = [new Selection(1, 1, model.getLineCount(), model.getLineMaxColumn(model.getLineCount()))];\n      updateSelection = false;\n    }\n    for (const selection of selections) {\n      const uniqueLines = new Set();\n      const lines = [];\n      for (let i = selection.startLineNumber; i <= selection.endLineNumber; i++) {\n        const line = model.getLineContent(i);\n        if (uniqueLines.has(line)) {\n          continue;\n        }\n        lines.push(line);\n        uniqueLines.add(line);\n      }\n      const selectionToReplace = new Selection(selection.startLineNumber, 1, selection.endLineNumber, model.getLineMaxColumn(selection.endLineNumber));\n      const adjustedSelectionStart = selection.startLineNumber - linesDeleted;\n      const finalSelection = new Selection(adjustedSelectionStart, 1, adjustedSelectionStart + lines.length - 1, lines[lines.length - 1].length);\n      edits.push(EditOperation.replace(selectionToReplace, lines.join('\\n')));\n      endCursorState.push(finalSelection);\n      linesDeleted += selection.endLineNumber - selection.startLineNumber + 1 - lines.length;\n    }\n    editor.pushUndoStop();\n    editor.executeEdits(this.id, edits, updateSelection ? endCursorState : undefined);\n    editor.pushUndoStop();\n  }\n}\nexport class TrimTrailingWhitespaceAction extends EditorAction {\n  constructor() {\n    super({\n      id: TrimTrailingWhitespaceAction.ID,\n      label: nls.localize('lines.trimTrailingWhitespace', \"Trim Trailing Whitespace\"),\n      alias: 'Trim Trailing Whitespace',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 54 /* KeyCode.KeyX */),\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  run(_accessor, editor, args) {\n    let cursors = [];\n    if (args.reason === 'auto-save') {\n      // See https://github.com/editorconfig/editorconfig-vscode/issues/47\n      // It is very convenient for the editor config extension to invoke this action.\n      // So, if we get a reason:'auto-save' passed in, let's preserve cursor positions.\n      cursors = (editor.getSelections() || []).map(s => new Position(s.positionLineNumber, s.positionColumn));\n    }\n    const selection = editor.getSelection();\n    if (selection === null) {\n      return;\n    }\n    const config = _accessor.get(IConfigurationService);\n    const model = editor.getModel();\n    const trimInRegexAndStrings = config.getValue('files.trimTrailingWhitespaceInRegexAndStrings', {\n      overrideIdentifier: model === null || model === void 0 ? void 0 : model.getLanguageId(),\n      resource: model === null || model === void 0 ? void 0 : model.uri\n    });\n    const command = new TrimTrailingWhitespaceCommand(selection, cursors, trimInRegexAndStrings);\n    editor.pushUndoStop();\n    editor.executeCommands(this.id, [command]);\n    editor.pushUndoStop();\n  }\n}\nTrimTrailingWhitespaceAction.ID = 'editor.action.trimTrailingWhitespace';\nexport class DeleteLinesAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.deleteLines',\n      label: nls.localize('lines.delete', \"Delete Line\"),\n      alias: 'Delete Line',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 41 /* KeyCode.KeyK */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  run(_accessor, editor) {\n    if (!editor.hasModel()) {\n      return;\n    }\n    const ops = this._getLinesToRemove(editor);\n    const model = editor.getModel();\n    if (model.getLineCount() === 1 && model.getLineMaxColumn(1) === 1) {\n      // Model is empty\n      return;\n    }\n    let linesDeleted = 0;\n    const edits = [];\n    const cursorState = [];\n    for (let i = 0, len = ops.length; i < len; i++) {\n      const op = ops[i];\n      let startLineNumber = op.startLineNumber;\n      let endLineNumber = op.endLineNumber;\n      let startColumn = 1;\n      let endColumn = model.getLineMaxColumn(endLineNumber);\n      if (endLineNumber < model.getLineCount()) {\n        endLineNumber += 1;\n        endColumn = 1;\n      } else if (startLineNumber > 1) {\n        startLineNumber -= 1;\n        startColumn = model.getLineMaxColumn(startLineNumber);\n      }\n      edits.push(EditOperation.replace(new Selection(startLineNumber, startColumn, endLineNumber, endColumn), ''));\n      cursorState.push(new Selection(startLineNumber - linesDeleted, op.positionColumn, startLineNumber - linesDeleted, op.positionColumn));\n      linesDeleted += op.endLineNumber - op.startLineNumber + 1;\n    }\n    editor.pushUndoStop();\n    editor.executeEdits(this.id, edits, cursorState);\n    editor.pushUndoStop();\n  }\n  _getLinesToRemove(editor) {\n    // Construct delete operations\n    const operations = editor.getSelections().map(s => {\n      let endLineNumber = s.endLineNumber;\n      if (s.startLineNumber < s.endLineNumber && s.endColumn === 1) {\n        endLineNumber -= 1;\n      }\n      return {\n        startLineNumber: s.startLineNumber,\n        selectionStartColumn: s.selectionStartColumn,\n        endLineNumber: endLineNumber,\n        positionColumn: s.positionColumn\n      };\n    });\n    // Sort delete operations\n    operations.sort((a, b) => {\n      if (a.startLineNumber === b.startLineNumber) {\n        return a.endLineNumber - b.endLineNumber;\n      }\n      return a.startLineNumber - b.startLineNumber;\n    });\n    // Merge delete operations which are adjacent or overlapping\n    const mergedOperations = [];\n    let previousOperation = operations[0];\n    for (let i = 1; i < operations.length; i++) {\n      if (previousOperation.endLineNumber + 1 >= operations[i].startLineNumber) {\n        // Merge current operations into the previous one\n        previousOperation.endLineNumber = operations[i].endLineNumber;\n      } else {\n        // Push previous operation\n        mergedOperations.push(previousOperation);\n        previousOperation = operations[i];\n      }\n    }\n    // Push the last operation\n    mergedOperations.push(previousOperation);\n    return mergedOperations;\n  }\n}\nexport class IndentLinesAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.indentLines',\n      label: nls.localize('lines.indent', \"Indent Line\"),\n      alias: 'Indent Line',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 94 /* KeyCode.BracketRight */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  run(_accessor, editor) {\n    const viewModel = editor._getViewModel();\n    if (!viewModel) {\n      return;\n    }\n    editor.pushUndoStop();\n    editor.executeCommands(this.id, TypeOperations.indent(viewModel.cursorConfig, editor.getModel(), editor.getSelections()));\n    editor.pushUndoStop();\n  }\n}\nclass OutdentLinesAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.outdentLines',\n      label: nls.localize('lines.outdent', \"Outdent Line\"),\n      alias: 'Outdent Line',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 92 /* KeyCode.BracketLeft */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  run(_accessor, editor) {\n    CoreEditingCommands.Outdent.runEditorCommand(_accessor, editor, null);\n  }\n}\nexport class InsertLineBeforeAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.insertLineBefore',\n      label: nls.localize('lines.insertBefore', \"Insert Line Above\"),\n      alias: 'Insert Line Above',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 3 /* KeyCode.Enter */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  run(_accessor, editor) {\n    const viewModel = editor._getViewModel();\n    if (!viewModel) {\n      return;\n    }\n    editor.pushUndoStop();\n    editor.executeCommands(this.id, TypeOperations.lineInsertBefore(viewModel.cursorConfig, editor.getModel(), editor.getSelections()));\n  }\n}\nexport class InsertLineAfterAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.insertLineAfter',\n      label: nls.localize('lines.insertAfter', \"Insert Line Below\"),\n      alias: 'Insert Line Below',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 3 /* KeyCode.Enter */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  run(_accessor, editor) {\n    const viewModel = editor._getViewModel();\n    if (!viewModel) {\n      return;\n    }\n    editor.pushUndoStop();\n    editor.executeCommands(this.id, TypeOperations.lineInsertAfter(viewModel.cursorConfig, editor.getModel(), editor.getSelections()));\n  }\n}\nexport class AbstractDeleteAllToBoundaryAction extends EditorAction {\n  run(_accessor, editor) {\n    if (!editor.hasModel()) {\n      return;\n    }\n    const primaryCursor = editor.getSelection();\n    const rangesToDelete = this._getRangesToDelete(editor);\n    // merge overlapping selections\n    const effectiveRanges = [];\n    for (let i = 0, count = rangesToDelete.length - 1; i < count; i++) {\n      const range = rangesToDelete[i];\n      const nextRange = rangesToDelete[i + 1];\n      if (Range.intersectRanges(range, nextRange) === null) {\n        effectiveRanges.push(range);\n      } else {\n        rangesToDelete[i + 1] = Range.plusRange(range, nextRange);\n      }\n    }\n    effectiveRanges.push(rangesToDelete[rangesToDelete.length - 1]);\n    const endCursorState = this._getEndCursorState(primaryCursor, effectiveRanges);\n    const edits = effectiveRanges.map(range => {\n      return EditOperation.replace(range, '');\n    });\n    editor.pushUndoStop();\n    editor.executeEdits(this.id, edits, endCursorState);\n    editor.pushUndoStop();\n  }\n}\nexport class DeleteAllLeftAction extends AbstractDeleteAllToBoundaryAction {\n  constructor() {\n    super({\n      id: 'deleteAllLeft',\n      label: nls.localize('lines.deleteAllLeft', \"Delete All Left\"),\n      alias: 'Delete All Left',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 0,\n        mac: {\n          primary: 2048 /* KeyMod.CtrlCmd */ | 1 /* KeyCode.Backspace */\n        },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  _getEndCursorState(primaryCursor, rangesToDelete) {\n    let endPrimaryCursor = null;\n    const endCursorState = [];\n    let deletedLines = 0;\n    rangesToDelete.forEach(range => {\n      let endCursor;\n      if (range.endColumn === 1 && deletedLines > 0) {\n        const newStartLine = range.startLineNumber - deletedLines;\n        endCursor = new Selection(newStartLine, range.startColumn, newStartLine, range.startColumn);\n      } else {\n        endCursor = new Selection(range.startLineNumber, range.startColumn, range.startLineNumber, range.startColumn);\n      }\n      deletedLines += range.endLineNumber - range.startLineNumber;\n      if (range.intersectRanges(primaryCursor)) {\n        endPrimaryCursor = endCursor;\n      } else {\n        endCursorState.push(endCursor);\n      }\n    });\n    if (endPrimaryCursor) {\n      endCursorState.unshift(endPrimaryCursor);\n    }\n    return endCursorState;\n  }\n  _getRangesToDelete(editor) {\n    const selections = editor.getSelections();\n    if (selections === null) {\n      return [];\n    }\n    let rangesToDelete = selections;\n    const model = editor.getModel();\n    if (model === null) {\n      return [];\n    }\n    rangesToDelete.sort(Range.compareRangesUsingStarts);\n    rangesToDelete = rangesToDelete.map(selection => {\n      if (selection.isEmpty()) {\n        if (selection.startColumn === 1) {\n          const deleteFromLine = Math.max(1, selection.startLineNumber - 1);\n          const deleteFromColumn = selection.startLineNumber === 1 ? 1 : model.getLineLength(deleteFromLine) + 1;\n          return new Range(deleteFromLine, deleteFromColumn, selection.startLineNumber, 1);\n        } else {\n          return new Range(selection.startLineNumber, 1, selection.startLineNumber, selection.startColumn);\n        }\n      } else {\n        return new Range(selection.startLineNumber, 1, selection.endLineNumber, selection.endColumn);\n      }\n    });\n    return rangesToDelete;\n  }\n}\nexport class DeleteAllRightAction extends AbstractDeleteAllToBoundaryAction {\n  constructor() {\n    super({\n      id: 'deleteAllRight',\n      label: nls.localize('lines.deleteAllRight', \"Delete All Right\"),\n      alias: 'Delete All Right',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 0,\n        mac: {\n          primary: 256 /* KeyMod.WinCtrl */ | 41 /* KeyCode.KeyK */,\n          secondary: [2048 /* KeyMod.CtrlCmd */ | 20 /* KeyCode.Delete */]\n        },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  _getEndCursorState(primaryCursor, rangesToDelete) {\n    let endPrimaryCursor = null;\n    const endCursorState = [];\n    for (let i = 0, len = rangesToDelete.length, offset = 0; i < len; i++) {\n      const range = rangesToDelete[i];\n      const endCursor = new Selection(range.startLineNumber - offset, range.startColumn, range.startLineNumber - offset, range.startColumn);\n      if (range.intersectRanges(primaryCursor)) {\n        endPrimaryCursor = endCursor;\n      } else {\n        endCursorState.push(endCursor);\n      }\n    }\n    if (endPrimaryCursor) {\n      endCursorState.unshift(endPrimaryCursor);\n    }\n    return endCursorState;\n  }\n  _getRangesToDelete(editor) {\n    const model = editor.getModel();\n    if (model === null) {\n      return [];\n    }\n    const selections = editor.getSelections();\n    if (selections === null) {\n      return [];\n    }\n    const rangesToDelete = selections.map(sel => {\n      if (sel.isEmpty()) {\n        const maxColumn = model.getLineMaxColumn(sel.startLineNumber);\n        if (sel.startColumn === maxColumn) {\n          return new Range(sel.startLineNumber, sel.startColumn, sel.startLineNumber + 1, 1);\n        } else {\n          return new Range(sel.startLineNumber, sel.startColumn, sel.startLineNumber, maxColumn);\n        }\n      }\n      return sel;\n    });\n    rangesToDelete.sort(Range.compareRangesUsingStarts);\n    return rangesToDelete;\n  }\n}\nexport class JoinLinesAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.joinLines',\n      label: nls.localize('lines.joinLines', \"Join Lines\"),\n      alias: 'Join Lines',\n      precondition: EditorContextKeys.writable,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 0,\n        mac: {\n          primary: 256 /* KeyMod.WinCtrl */ | 40 /* KeyCode.KeyJ */\n        },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    });\n  }\n  run(_accessor, editor) {\n    const selections = editor.getSelections();\n    if (selections === null) {\n      return;\n    }\n    let primaryCursor = editor.getSelection();\n    if (primaryCursor === null) {\n      return;\n    }\n    selections.sort(Range.compareRangesUsingStarts);\n    const reducedSelections = [];\n    const lastSelection = selections.reduce((previousValue, currentValue) => {\n      if (previousValue.isEmpty()) {\n        if (previousValue.endLineNumber === currentValue.startLineNumber) {\n          if (primaryCursor.equalsSelection(previousValue)) {\n            primaryCursor = currentValue;\n          }\n          return currentValue;\n        }\n        if (currentValue.startLineNumber > previousValue.endLineNumber + 1) {\n          reducedSelections.push(previousValue);\n          return currentValue;\n        } else {\n          return new Selection(previousValue.startLineNumber, previousValue.startColumn, currentValue.endLineNumber, currentValue.endColumn);\n        }\n      } else {\n        if (currentValue.startLineNumber > previousValue.endLineNumber) {\n          reducedSelections.push(previousValue);\n          return currentValue;\n        } else {\n          return new Selection(previousValue.startLineNumber, previousValue.startColumn, currentValue.endLineNumber, currentValue.endColumn);\n        }\n      }\n    });\n    reducedSelections.push(lastSelection);\n    const model = editor.getModel();\n    if (model === null) {\n      return;\n    }\n    const edits = [];\n    const endCursorState = [];\n    let endPrimaryCursor = primaryCursor;\n    let lineOffset = 0;\n    for (let i = 0, len = reducedSelections.length; i < len; i++) {\n      const selection = reducedSelections[i];\n      const startLineNumber = selection.startLineNumber;\n      const startColumn = 1;\n      let columnDeltaOffset = 0;\n      let endLineNumber, endColumn;\n      const selectionEndPositionOffset = model.getLineLength(selection.endLineNumber) - selection.endColumn;\n      if (selection.isEmpty() || selection.startLineNumber === selection.endLineNumber) {\n        const position = selection.getStartPosition();\n        if (position.lineNumber < model.getLineCount()) {\n          endLineNumber = startLineNumber + 1;\n          endColumn = model.getLineMaxColumn(endLineNumber);\n        } else {\n          endLineNumber = position.lineNumber;\n          endColumn = model.getLineMaxColumn(position.lineNumber);\n        }\n      } else {\n        endLineNumber = selection.endLineNumber;\n        endColumn = model.getLineMaxColumn(endLineNumber);\n      }\n      let trimmedLinesContent = model.getLineContent(startLineNumber);\n      for (let i = startLineNumber + 1; i <= endLineNumber; i++) {\n        const lineText = model.getLineContent(i);\n        const firstNonWhitespaceIdx = model.getLineFirstNonWhitespaceColumn(i);\n        if (firstNonWhitespaceIdx >= 1) {\n          let insertSpace = true;\n          if (trimmedLinesContent === '') {\n            insertSpace = false;\n          }\n          if (insertSpace && (trimmedLinesContent.charAt(trimmedLinesContent.length - 1) === ' ' || trimmedLinesContent.charAt(trimmedLinesContent.length - 1) === '\\t')) {\n            insertSpace = false;\n            trimmedLinesContent = trimmedLinesContent.replace(/[\\s\\uFEFF\\xA0]+$/g, ' ');\n          }\n          const lineTextWithoutIndent = lineText.substr(firstNonWhitespaceIdx - 1);\n          trimmedLinesContent += (insertSpace ? ' ' : '') + lineTextWithoutIndent;\n          if (insertSpace) {\n            columnDeltaOffset = lineTextWithoutIndent.length + 1;\n          } else {\n            columnDeltaOffset = lineTextWithoutIndent.length;\n          }\n        } else {\n          columnDeltaOffset = 0;\n        }\n      }\n      const deleteSelection = new Range(startLineNumber, startColumn, endLineNumber, endColumn);\n      if (!deleteSelection.isEmpty()) {\n        let resultSelection;\n        if (selection.isEmpty()) {\n          edits.push(EditOperation.replace(deleteSelection, trimmedLinesContent));\n          resultSelection = new Selection(deleteSelection.startLineNumber - lineOffset, trimmedLinesContent.length - columnDeltaOffset + 1, startLineNumber - lineOffset, trimmedLinesContent.length - columnDeltaOffset + 1);\n        } else {\n          if (selection.startLineNumber === selection.endLineNumber) {\n            edits.push(EditOperation.replace(deleteSelection, trimmedLinesContent));\n            resultSelection = new Selection(selection.startLineNumber - lineOffset, selection.startColumn, selection.endLineNumber - lineOffset, selection.endColumn);\n          } else {\n            edits.push(EditOperation.replace(deleteSelection, trimmedLinesContent));\n            resultSelection = new Selection(selection.startLineNumber - lineOffset, selection.startColumn, selection.startLineNumber - lineOffset, trimmedLinesContent.length - selectionEndPositionOffset);\n          }\n        }\n        if (Range.intersectRanges(deleteSelection, primaryCursor) !== null) {\n          endPrimaryCursor = resultSelection;\n        } else {\n          endCursorState.push(resultSelection);\n        }\n      }\n      lineOffset += deleteSelection.endLineNumber - deleteSelection.startLineNumber;\n    }\n    endCursorState.unshift(endPrimaryCursor);\n    editor.pushUndoStop();\n    editor.executeEdits(this.id, edits, endCursorState);\n    editor.pushUndoStop();\n  }\n}\nexport class TransposeAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.transpose',\n      label: nls.localize('editor.transpose', \"Transpose Characters around the Cursor\"),\n      alias: 'Transpose Characters around the Cursor',\n      precondition: EditorContextKeys.writable\n    });\n  }\n  run(_accessor, editor) {\n    const selections = editor.getSelections();\n    if (selections === null) {\n      return;\n    }\n    const model = editor.getModel();\n    if (model === null) {\n      return;\n    }\n    const commands = [];\n    for (let i = 0, len = selections.length; i < len; i++) {\n      const selection = selections[i];\n      if (!selection.isEmpty()) {\n        continue;\n      }\n      const cursor = selection.getStartPosition();\n      const maxColumn = model.getLineMaxColumn(cursor.lineNumber);\n      if (cursor.column >= maxColumn) {\n        if (cursor.lineNumber === model.getLineCount()) {\n          continue;\n        }\n        // The cursor is at the end of current line and current line is not empty\n        // then we transpose the character before the cursor and the line break if there is any following line.\n        const deleteSelection = new Range(cursor.lineNumber, Math.max(1, cursor.column - 1), cursor.lineNumber + 1, 1);\n        const chars = model.getValueInRange(deleteSelection).split('').reverse().join('');\n        commands.push(new ReplaceCommand(new Selection(cursor.lineNumber, Math.max(1, cursor.column - 1), cursor.lineNumber + 1, 1), chars));\n      } else {\n        const deleteSelection = new Range(cursor.lineNumber, Math.max(1, cursor.column - 1), cursor.lineNumber, cursor.column + 1);\n        const chars = model.getValueInRange(deleteSelection).split('').reverse().join('');\n        commands.push(new ReplaceCommandThatPreservesSelection(deleteSelection, chars, new Selection(cursor.lineNumber, cursor.column + 1, cursor.lineNumber, cursor.column + 1)));\n      }\n    }\n    editor.pushUndoStop();\n    editor.executeCommands(this.id, commands);\n    editor.pushUndoStop();\n  }\n}\nexport class AbstractCaseAction extends EditorAction {\n  run(_accessor, editor) {\n    const selections = editor.getSelections();\n    if (selections === null) {\n      return;\n    }\n    const model = editor.getModel();\n    if (model === null) {\n      return;\n    }\n    const wordSeparators = editor.getOption(131 /* EditorOption.wordSeparators */);\n    const textEdits = [];\n    for (const selection of selections) {\n      if (selection.isEmpty()) {\n        const cursor = selection.getStartPosition();\n        const word = editor.getConfiguredWordAtPosition(cursor);\n        if (!word) {\n          continue;\n        }\n        const wordRange = new Range(cursor.lineNumber, word.startColumn, cursor.lineNumber, word.endColumn);\n        const text = model.getValueInRange(wordRange);\n        textEdits.push(EditOperation.replace(wordRange, this._modifyText(text, wordSeparators)));\n      } else {\n        const text = model.getValueInRange(selection);\n        textEdits.push(EditOperation.replace(selection, this._modifyText(text, wordSeparators)));\n      }\n    }\n    editor.pushUndoStop();\n    editor.executeEdits(this.id, textEdits);\n    editor.pushUndoStop();\n  }\n}\nexport class UpperCaseAction extends AbstractCaseAction {\n  constructor() {\n    super({\n      id: 'editor.action.transformToUppercase',\n      label: nls.localize('editor.transformToUppercase', \"Transform to Uppercase\"),\n      alias: 'Transform to Uppercase',\n      precondition: EditorContextKeys.writable\n    });\n  }\n  _modifyText(text, wordSeparators) {\n    return text.toLocaleUpperCase();\n  }\n}\nexport class LowerCaseAction extends AbstractCaseAction {\n  constructor() {\n    super({\n      id: 'editor.action.transformToLowercase',\n      label: nls.localize('editor.transformToLowercase', \"Transform to Lowercase\"),\n      alias: 'Transform to Lowercase',\n      precondition: EditorContextKeys.writable\n    });\n  }\n  _modifyText(text, wordSeparators) {\n    return text.toLocaleLowerCase();\n  }\n}\nclass BackwardsCompatibleRegExp {\n  constructor(_pattern, _flags) {\n    this._pattern = _pattern;\n    this._flags = _flags;\n    this._actual = null;\n    this._evaluated = false;\n  }\n  get() {\n    if (!this._evaluated) {\n      this._evaluated = true;\n      try {\n        this._actual = new RegExp(this._pattern, this._flags);\n      } catch (err) {\n        // this browser does not support this regular expression\n      }\n    }\n    return this._actual;\n  }\n  isSupported() {\n    return this.get() !== null;\n  }\n}\nexport class TitleCaseAction extends AbstractCaseAction {\n  constructor() {\n    super({\n      id: 'editor.action.transformToTitlecase',\n      label: nls.localize('editor.transformToTitlecase', \"Transform to Title Case\"),\n      alias: 'Transform to Title Case',\n      precondition: EditorContextKeys.writable\n    });\n  }\n  _modifyText(text, wordSeparators) {\n    const titleBoundary = TitleCaseAction.titleBoundary.get();\n    if (!titleBoundary) {\n      // cannot support this\n      return text;\n    }\n    return text.toLocaleLowerCase().replace(titleBoundary, b => b.toLocaleUpperCase());\n  }\n}\nTitleCaseAction.titleBoundary = new BackwardsCompatibleRegExp('(^|[^\\\\p{L}\\\\p{N}\\']|((^|\\\\P{L})\\'))\\\\p{L}', 'gmu');\nexport class SnakeCaseAction extends AbstractCaseAction {\n  constructor() {\n    super({\n      id: 'editor.action.transformToSnakecase',\n      label: nls.localize('editor.transformToSnakecase', \"Transform to Snake Case\"),\n      alias: 'Transform to Snake Case',\n      precondition: EditorContextKeys.writable\n    });\n  }\n  _modifyText(text, wordSeparators) {\n    const caseBoundary = SnakeCaseAction.caseBoundary.get();\n    const singleLetters = SnakeCaseAction.singleLetters.get();\n    if (!caseBoundary || !singleLetters) {\n      // cannot support this\n      return text;\n    }\n    return text.replace(caseBoundary, '$1_$2').replace(singleLetters, '$1_$2$3').toLocaleLowerCase();\n  }\n}\nSnakeCaseAction.caseBoundary = new BackwardsCompatibleRegExp('(\\\\p{Ll})(\\\\p{Lu})', 'gmu');\nSnakeCaseAction.singleLetters = new BackwardsCompatibleRegExp('(\\\\p{Lu}|\\\\p{N})(\\\\p{Lu})(\\\\p{Ll})', 'gmu');\nexport class CamelCaseAction extends AbstractCaseAction {\n  constructor() {\n    super({\n      id: 'editor.action.transformToCamelcase',\n      label: nls.localize('editor.transformToCamelcase', \"Transform to Camel Case\"),\n      alias: 'Transform to Camel Case',\n      precondition: EditorContextKeys.writable\n    });\n  }\n  _modifyText(text, wordSeparators) {\n    const wordBoundary = CamelCaseAction.wordBoundary.get();\n    if (!wordBoundary) {\n      // cannot support this\n      return text;\n    }\n    const words = text.split(wordBoundary);\n    const firstWord = words.shift();\n    return firstWord + words.map(word => word.substring(0, 1).toLocaleUpperCase() + word.substring(1)).join('');\n  }\n}\nCamelCaseAction.wordBoundary = new BackwardsCompatibleRegExp('[_\\\\s-]', 'gm');\nexport class PascalCaseAction extends AbstractCaseAction {\n  constructor() {\n    super({\n      id: 'editor.action.transformToPascalcase',\n      label: nls.localize('editor.transformToPascalcase', \"Transform to Pascal Case\"),\n      alias: 'Transform to Pascal Case',\n      precondition: EditorContextKeys.writable\n    });\n  }\n  _modifyText(text, wordSeparators) {\n    const wordBoundary = PascalCaseAction.wordBoundary.get();\n    const wordBoundaryToMaintain = PascalCaseAction.wordBoundaryToMaintain.get();\n    if (!wordBoundary || !wordBoundaryToMaintain) {\n      // cannot support this\n      return text;\n    }\n    const wordsWithMaintainBoundaries = text.split(wordBoundaryToMaintain);\n    const words = wordsWithMaintainBoundaries.map(word => word.split(wordBoundary)).flat();\n    return words.map(word => word.substring(0, 1).toLocaleUpperCase() + word.substring(1)).join('');\n  }\n}\nPascalCaseAction.wordBoundary = new BackwardsCompatibleRegExp('[_\\\\s-]', 'gm');\nPascalCaseAction.wordBoundaryToMaintain = new BackwardsCompatibleRegExp('(?<=\\\\.)', 'gm');\nexport class KebabCaseAction extends AbstractCaseAction {\n  static isSupported() {\n    const areAllRegexpsSupported = [this.caseBoundary, this.singleLetters, this.underscoreBoundary].every(regexp => regexp.isSupported());\n    return areAllRegexpsSupported;\n  }\n  constructor() {\n    super({\n      id: 'editor.action.transformToKebabcase',\n      label: nls.localize('editor.transformToKebabcase', 'Transform to Kebab Case'),\n      alias: 'Transform to Kebab Case',\n      precondition: EditorContextKeys.writable\n    });\n  }\n  _modifyText(text, _) {\n    const caseBoundary = KebabCaseAction.caseBoundary.get();\n    const singleLetters = KebabCaseAction.singleLetters.get();\n    const underscoreBoundary = KebabCaseAction.underscoreBoundary.get();\n    if (!caseBoundary || !singleLetters || !underscoreBoundary) {\n      // one or more regexps aren't supported\n      return text;\n    }\n    return text.replace(underscoreBoundary, '$1-$3').replace(caseBoundary, '$1-$2').replace(singleLetters, '$1-$2').toLocaleLowerCase();\n  }\n}\nKebabCaseAction.caseBoundary = new BackwardsCompatibleRegExp('(\\\\p{Ll})(\\\\p{Lu})', 'gmu');\nKebabCaseAction.singleLetters = new BackwardsCompatibleRegExp('(\\\\p{Lu}|\\\\p{N})(\\\\p{Lu}\\\\p{Ll})', 'gmu');\nKebabCaseAction.underscoreBoundary = new BackwardsCompatibleRegExp('(\\\\S)(_)(\\\\S)', 'gm');\nregisterEditorAction(CopyLinesUpAction);\nregisterEditorAction(CopyLinesDownAction);\nregisterEditorAction(DuplicateSelectionAction);\nregisterEditorAction(MoveLinesUpAction);\nregisterEditorAction(MoveLinesDownAction);\nregisterEditorAction(SortLinesAscendingAction);\nregisterEditorAction(SortLinesDescendingAction);\nregisterEditorAction(DeleteDuplicateLinesAction);\nregisterEditorAction(TrimTrailingWhitespaceAction);\nregisterEditorAction(DeleteLinesAction);\nregisterEditorAction(IndentLinesAction);\nregisterEditorAction(OutdentLinesAction);\nregisterEditorAction(InsertLineBeforeAction);\nregisterEditorAction(InsertLineAfterAction);\nregisterEditorAction(DeleteAllLeftAction);\nregisterEditorAction(DeleteAllRightAction);\nregisterEditorAction(JoinLinesAction);\nregisterEditorAction(TransposeAction);\nregisterEditorAction(UpperCaseAction);\nregisterEditorAction(LowerCaseAction);\nif (SnakeCaseAction.caseBoundary.isSupported() && SnakeCaseAction.singleLetters.isSupported()) {\n  registerEditorAction(SnakeCaseAction);\n}\nif (CamelCaseAction.wordBoundary.isSupported()) {\n  registerEditorAction(CamelCaseAction);\n}\nif (PascalCaseAction.wordBoundary.isSupported()) {\n  registerEditorAction(PascalCaseAction);\n}\nif (TitleCaseAction.titleBoundary.isSupported()) {\n  registerEditorAction(TitleCaseAction);\n}\nif (KebabCaseAction.isSupported()) {\n  registerEditorAction(KebabCaseAction);\n}","map":{"version":3,"names":["KeyChord","CoreEditingCommands","EditorAction","registerEditorAction","ReplaceCommand","ReplaceCommandThatPreservesSelection","ReplaceCommandThatSelectsText","TrimTrailingWhitespaceCommand","TypeOperations","EditOperation","Position","Range","Selection","EditorContextKeys","CopyLinesCommand","MoveLinesCommand","SortLinesCommand","nls","MenuId","ILanguageConfigurationService","IConfigurationService","AbstractCopyLinesAction","constructor","down","opts","run","_accessor","editor","hasModel","selections","getSelections","map","selection","index","ignore","sort","a","b","compareRangesUsingStarts","prev","i","length","curr","endLineNumber","startLineNumber","commands","push","pushUndoStop","executeCommands","id","CopyLinesUpAction","label","localize","alias","precondition","writable","kbOpts","kbExpr","editorTextFocus","primary","linux","weight","menuOpts","menuId","MenubarSelectionMenu","group","title","key","comment","order","CopyLinesDownAction","DuplicateSelectionAction","accessor","args","model","getModel","isEmpty","insertSelection","endColumn","getValueInRange","AbstractMoveLinesAction","languageConfigurationService","get","autoIndent","getOption","MoveLinesUpAction","MoveLinesDownAction","AbstractSortLinesAction","descending","getLineCount","getLineMaxColumn","canRun","len","SortLinesAscendingAction","SortLinesDescendingAction","DeleteDuplicateLinesAction","edits","endCursorState","linesDeleted","updateSelection","uniqueLines","Set","lines","line","getLineContent","has","add","selectionToReplace","adjustedSelectionStart","finalSelection","replace","join","executeEdits","undefined","TrimTrailingWhitespaceAction","ID","cursors","reason","s","positionLineNumber","positionColumn","getSelection","config","trimInRegexAndStrings","getValue","overrideIdentifier","getLanguageId","resource","uri","command","DeleteLinesAction","textInputFocus","ops","_getLinesToRemove","cursorState","op","startColumn","operations","selectionStartColumn","mergedOperations","previousOperation","IndentLinesAction","viewModel","_getViewModel","indent","cursorConfig","OutdentLinesAction","Outdent","runEditorCommand","InsertLineBeforeAction","lineInsertBefore","InsertLineAfterAction","lineInsertAfter","AbstractDeleteAllToBoundaryAction","primaryCursor","rangesToDelete","_getRangesToDelete","effectiveRanges","count","range","nextRange","intersectRanges","plusRange","_getEndCursorState","DeleteAllLeftAction","mac","endPrimaryCursor","deletedLines","forEach","endCursor","newStartLine","unshift","deleteFromLine","Math","max","deleteFromColumn","getLineLength","DeleteAllRightAction","secondary","offset","sel","maxColumn","JoinLinesAction","reducedSelections","lastSelection","reduce","previousValue","currentValue","equalsSelection","lineOffset","columnDeltaOffset","selectionEndPositionOffset","position","getStartPosition","lineNumber","trimmedLinesContent","lineText","firstNonWhitespaceIdx","getLineFirstNonWhitespaceColumn","insertSpace","charAt","lineTextWithoutIndent","substr","deleteSelection","resultSelection","TransposeAction","cursor","column","chars","split","reverse","AbstractCaseAction","wordSeparators","textEdits","word","getConfiguredWordAtPosition","wordRange","text","_modifyText","UpperCaseAction","toLocaleUpperCase","LowerCaseAction","toLocaleLowerCase","BackwardsCompatibleRegExp","_pattern","_flags","_actual","_evaluated","RegExp","err","isSupported","TitleCaseAction","titleBoundary","SnakeCaseAction","caseBoundary","singleLetters","CamelCaseAction","wordBoundary","words","firstWord","shift","substring","PascalCaseAction","wordBoundaryToMaintain","wordsWithMaintainBoundaries","flat","KebabCaseAction","areAllRegexpsSupported","underscoreBoundary","every","regexp","_"],"sources":["/home/arslan/modojo/node_modules/monaco-editor/esm/vs/editor/contrib/linesOperations/browser/linesOperations.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { CoreEditingCommands } from '../../../browser/coreCommands.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { ReplaceCommand, ReplaceCommandThatPreservesSelection, ReplaceCommandThatSelectsText } from '../../../common/commands/replaceCommand.js';\nimport { TrimTrailingWhitespaceCommand } from '../../../common/commands/trimTrailingWhitespaceCommand.js';\nimport { TypeOperations } from '../../../common/cursor/cursorTypeOperations.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { CopyLinesCommand } from './copyLinesCommand.js';\nimport { MoveLinesCommand } from './moveLinesCommand.js';\nimport { SortLinesCommand } from './sortLinesCommand.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\n// copy lines\nclass AbstractCopyLinesAction extends EditorAction {\n    constructor(down, opts) {\n        super(opts);\n        this.down = down;\n    }\n    run(_accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const selections = editor.getSelections().map((selection, index) => ({ selection, index, ignore: false }));\n        selections.sort((a, b) => Range.compareRangesUsingStarts(a.selection, b.selection));\n        // Remove selections that would result in copying the same line\n        let prev = selections[0];\n        for (let i = 1; i < selections.length; i++) {\n            const curr = selections[i];\n            if (prev.selection.endLineNumber === curr.selection.startLineNumber) {\n                // these two selections would copy the same line\n                if (prev.index < curr.index) {\n                    // prev wins\n                    curr.ignore = true;\n                }\n                else {\n                    // curr wins\n                    prev.ignore = true;\n                    prev = curr;\n                }\n            }\n        }\n        const commands = [];\n        for (const selection of selections) {\n            commands.push(new CopyLinesCommand(selection.selection, this.down, selection.ignore));\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nclass CopyLinesUpAction extends AbstractCopyLinesAction {\n    constructor() {\n        super(false, {\n            id: 'editor.action.copyLinesUpAction',\n            label: nls.localize('lines.copyUp', \"Copy Line Up\"),\n            alias: 'Copy Line Up',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 16 /* KeyCode.UpArrow */,\n                linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 16 /* KeyCode.UpArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '2_line',\n                title: nls.localize({ key: 'miCopyLinesUp', comment: ['&& denotes a mnemonic'] }, \"&&Copy Line Up\"),\n                order: 1\n            }\n        });\n    }\n}\nclass CopyLinesDownAction extends AbstractCopyLinesAction {\n    constructor() {\n        super(true, {\n            id: 'editor.action.copyLinesDownAction',\n            label: nls.localize('lines.copyDown', \"Copy Line Down\"),\n            alias: 'Copy Line Down',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 18 /* KeyCode.DownArrow */,\n                linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 18 /* KeyCode.DownArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '2_line',\n                title: nls.localize({ key: 'miCopyLinesDown', comment: ['&& denotes a mnemonic'] }, \"Co&&py Line Down\"),\n                order: 2\n            }\n        });\n    }\n}\nexport class DuplicateSelectionAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.duplicateSelection',\n            label: nls.localize('duplicateSelection', \"Duplicate Selection\"),\n            alias: 'Duplicate Selection',\n            precondition: EditorContextKeys.writable,\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '2_line',\n                title: nls.localize({ key: 'miDuplicateSelection', comment: ['&& denotes a mnemonic'] }, \"&&Duplicate Selection\"),\n                order: 5\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const commands = [];\n        const selections = editor.getSelections();\n        const model = editor.getModel();\n        for (const selection of selections) {\n            if (selection.isEmpty()) {\n                commands.push(new CopyLinesCommand(selection, true));\n            }\n            else {\n                const insertSelection = new Selection(selection.endLineNumber, selection.endColumn, selection.endLineNumber, selection.endColumn);\n                commands.push(new ReplaceCommandThatSelectsText(insertSelection, model.getValueInRange(selection)));\n            }\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\n// move lines\nclass AbstractMoveLinesAction extends EditorAction {\n    constructor(down, opts) {\n        super(opts);\n        this.down = down;\n    }\n    run(accessor, editor) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        const commands = [];\n        const selections = editor.getSelections() || [];\n        const autoIndent = editor.getOption(12 /* EditorOption.autoIndent */);\n        for (const selection of selections) {\n            commands.push(new MoveLinesCommand(selection, this.down, autoIndent, languageConfigurationService));\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nclass MoveLinesUpAction extends AbstractMoveLinesAction {\n    constructor() {\n        super(false, {\n            id: 'editor.action.moveLinesUpAction',\n            label: nls.localize('lines.moveUp', \"Move Line Up\"),\n            alias: 'Move Line Up',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */,\n                linux: { primary: 512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '2_line',\n                title: nls.localize({ key: 'miMoveLinesUp', comment: ['&& denotes a mnemonic'] }, \"Mo&&ve Line Up\"),\n                order: 3\n            }\n        });\n    }\n}\nclass MoveLinesDownAction extends AbstractMoveLinesAction {\n    constructor() {\n        super(true, {\n            id: 'editor.action.moveLinesDownAction',\n            label: nls.localize('lines.moveDown', \"Move Line Down\"),\n            alias: 'Move Line Down',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */,\n                linux: { primary: 512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '2_line',\n                title: nls.localize({ key: 'miMoveLinesDown', comment: ['&& denotes a mnemonic'] }, \"Move &&Line Down\"),\n                order: 4\n            }\n        });\n    }\n}\nexport class AbstractSortLinesAction extends EditorAction {\n    constructor(descending, opts) {\n        super(opts);\n        this.descending = descending;\n    }\n    run(_accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const model = editor.getModel();\n        let selections = editor.getSelections();\n        if (selections.length === 1 && selections[0].isEmpty()) {\n            // Apply to whole document.\n            selections = [new Selection(1, 1, model.getLineCount(), model.getLineMaxColumn(model.getLineCount()))];\n        }\n        for (const selection of selections) {\n            if (!SortLinesCommand.canRun(editor.getModel(), selection, this.descending)) {\n                return;\n            }\n        }\n        const commands = [];\n        for (let i = 0, len = selections.length; i < len; i++) {\n            commands[i] = new SortLinesCommand(selections[i], this.descending);\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nexport class SortLinesAscendingAction extends AbstractSortLinesAction {\n    constructor() {\n        super(false, {\n            id: 'editor.action.sortLinesAscending',\n            label: nls.localize('lines.sortAscending', \"Sort Lines Ascending\"),\n            alias: 'Sort Lines Ascending',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nexport class SortLinesDescendingAction extends AbstractSortLinesAction {\n    constructor() {\n        super(true, {\n            id: 'editor.action.sortLinesDescending',\n            label: nls.localize('lines.sortDescending', \"Sort Lines Descending\"),\n            alias: 'Sort Lines Descending',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nexport class DeleteDuplicateLinesAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.removeDuplicateLines',\n            label: nls.localize('lines.deleteDuplicates', \"Delete Duplicate Lines\"),\n            alias: 'Delete Duplicate Lines',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    run(_accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const model = editor.getModel();\n        if (model.getLineCount() === 1 && model.getLineMaxColumn(1) === 1) {\n            return;\n        }\n        const edits = [];\n        const endCursorState = [];\n        let linesDeleted = 0;\n        let updateSelection = true;\n        let selections = editor.getSelections();\n        if (selections.length === 1 && selections[0].isEmpty()) {\n            // Apply to whole document.\n            selections = [new Selection(1, 1, model.getLineCount(), model.getLineMaxColumn(model.getLineCount()))];\n            updateSelection = false;\n        }\n        for (const selection of selections) {\n            const uniqueLines = new Set();\n            const lines = [];\n            for (let i = selection.startLineNumber; i <= selection.endLineNumber; i++) {\n                const line = model.getLineContent(i);\n                if (uniqueLines.has(line)) {\n                    continue;\n                }\n                lines.push(line);\n                uniqueLines.add(line);\n            }\n            const selectionToReplace = new Selection(selection.startLineNumber, 1, selection.endLineNumber, model.getLineMaxColumn(selection.endLineNumber));\n            const adjustedSelectionStart = selection.startLineNumber - linesDeleted;\n            const finalSelection = new Selection(adjustedSelectionStart, 1, adjustedSelectionStart + lines.length - 1, lines[lines.length - 1].length);\n            edits.push(EditOperation.replace(selectionToReplace, lines.join('\\n')));\n            endCursorState.push(finalSelection);\n            linesDeleted += (selection.endLineNumber - selection.startLineNumber + 1) - lines.length;\n        }\n        editor.pushUndoStop();\n        editor.executeEdits(this.id, edits, updateSelection ? endCursorState : undefined);\n        editor.pushUndoStop();\n    }\n}\nexport class TrimTrailingWhitespaceAction extends EditorAction {\n    constructor() {\n        super({\n            id: TrimTrailingWhitespaceAction.ID,\n            label: nls.localize('lines.trimTrailingWhitespace', \"Trim Trailing Whitespace\"),\n            alias: 'Trim Trailing Whitespace',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 54 /* KeyCode.KeyX */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor, args) {\n        let cursors = [];\n        if (args.reason === 'auto-save') {\n            // See https://github.com/editorconfig/editorconfig-vscode/issues/47\n            // It is very convenient for the editor config extension to invoke this action.\n            // So, if we get a reason:'auto-save' passed in, let's preserve cursor positions.\n            cursors = (editor.getSelections() || []).map(s => new Position(s.positionLineNumber, s.positionColumn));\n        }\n        const selection = editor.getSelection();\n        if (selection === null) {\n            return;\n        }\n        const config = _accessor.get(IConfigurationService);\n        const model = editor.getModel();\n        const trimInRegexAndStrings = config.getValue('files.trimTrailingWhitespaceInRegexAndStrings', { overrideIdentifier: model === null || model === void 0 ? void 0 : model.getLanguageId(), resource: model === null || model === void 0 ? void 0 : model.uri });\n        const command = new TrimTrailingWhitespaceCommand(selection, cursors, trimInRegexAndStrings);\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, [command]);\n        editor.pushUndoStop();\n    }\n}\nTrimTrailingWhitespaceAction.ID = 'editor.action.trimTrailingWhitespace';\nexport class DeleteLinesAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.deleteLines',\n            label: nls.localize('lines.delete', \"Delete Line\"),\n            alias: 'Delete Line',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 41 /* KeyCode.KeyK */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const ops = this._getLinesToRemove(editor);\n        const model = editor.getModel();\n        if (model.getLineCount() === 1 && model.getLineMaxColumn(1) === 1) {\n            // Model is empty\n            return;\n        }\n        let linesDeleted = 0;\n        const edits = [];\n        const cursorState = [];\n        for (let i = 0, len = ops.length; i < len; i++) {\n            const op = ops[i];\n            let startLineNumber = op.startLineNumber;\n            let endLineNumber = op.endLineNumber;\n            let startColumn = 1;\n            let endColumn = model.getLineMaxColumn(endLineNumber);\n            if (endLineNumber < model.getLineCount()) {\n                endLineNumber += 1;\n                endColumn = 1;\n            }\n            else if (startLineNumber > 1) {\n                startLineNumber -= 1;\n                startColumn = model.getLineMaxColumn(startLineNumber);\n            }\n            edits.push(EditOperation.replace(new Selection(startLineNumber, startColumn, endLineNumber, endColumn), ''));\n            cursorState.push(new Selection(startLineNumber - linesDeleted, op.positionColumn, startLineNumber - linesDeleted, op.positionColumn));\n            linesDeleted += (op.endLineNumber - op.startLineNumber + 1);\n        }\n        editor.pushUndoStop();\n        editor.executeEdits(this.id, edits, cursorState);\n        editor.pushUndoStop();\n    }\n    _getLinesToRemove(editor) {\n        // Construct delete operations\n        const operations = editor.getSelections().map((s) => {\n            let endLineNumber = s.endLineNumber;\n            if (s.startLineNumber < s.endLineNumber && s.endColumn === 1) {\n                endLineNumber -= 1;\n            }\n            return {\n                startLineNumber: s.startLineNumber,\n                selectionStartColumn: s.selectionStartColumn,\n                endLineNumber: endLineNumber,\n                positionColumn: s.positionColumn\n            };\n        });\n        // Sort delete operations\n        operations.sort((a, b) => {\n            if (a.startLineNumber === b.startLineNumber) {\n                return a.endLineNumber - b.endLineNumber;\n            }\n            return a.startLineNumber - b.startLineNumber;\n        });\n        // Merge delete operations which are adjacent or overlapping\n        const mergedOperations = [];\n        let previousOperation = operations[0];\n        for (let i = 1; i < operations.length; i++) {\n            if (previousOperation.endLineNumber + 1 >= operations[i].startLineNumber) {\n                // Merge current operations into the previous one\n                previousOperation.endLineNumber = operations[i].endLineNumber;\n            }\n            else {\n                // Push previous operation\n                mergedOperations.push(previousOperation);\n                previousOperation = operations[i];\n            }\n        }\n        // Push the last operation\n        mergedOperations.push(previousOperation);\n        return mergedOperations;\n    }\n}\nexport class IndentLinesAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.indentLines',\n            label: nls.localize('lines.indent', \"Indent Line\"),\n            alias: 'Indent Line',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 94 /* KeyCode.BracketRight */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        const viewModel = editor._getViewModel();\n        if (!viewModel) {\n            return;\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, TypeOperations.indent(viewModel.cursorConfig, editor.getModel(), editor.getSelections()));\n        editor.pushUndoStop();\n    }\n}\nclass OutdentLinesAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.outdentLines',\n            label: nls.localize('lines.outdent', \"Outdent Line\"),\n            alias: 'Outdent Line',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 92 /* KeyCode.BracketLeft */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        CoreEditingCommands.Outdent.runEditorCommand(_accessor, editor, null);\n    }\n}\nexport class InsertLineBeforeAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.insertLineBefore',\n            label: nls.localize('lines.insertBefore', \"Insert Line Above\"),\n            alias: 'Insert Line Above',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 3 /* KeyCode.Enter */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        const viewModel = editor._getViewModel();\n        if (!viewModel) {\n            return;\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, TypeOperations.lineInsertBefore(viewModel.cursorConfig, editor.getModel(), editor.getSelections()));\n    }\n}\nexport class InsertLineAfterAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.insertLineAfter',\n            label: nls.localize('lines.insertAfter', \"Insert Line Below\"),\n            alias: 'Insert Line Below',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 3 /* KeyCode.Enter */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        const viewModel = editor._getViewModel();\n        if (!viewModel) {\n            return;\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, TypeOperations.lineInsertAfter(viewModel.cursorConfig, editor.getModel(), editor.getSelections()));\n    }\n}\nexport class AbstractDeleteAllToBoundaryAction extends EditorAction {\n    run(_accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const primaryCursor = editor.getSelection();\n        const rangesToDelete = this._getRangesToDelete(editor);\n        // merge overlapping selections\n        const effectiveRanges = [];\n        for (let i = 0, count = rangesToDelete.length - 1; i < count; i++) {\n            const range = rangesToDelete[i];\n            const nextRange = rangesToDelete[i + 1];\n            if (Range.intersectRanges(range, nextRange) === null) {\n                effectiveRanges.push(range);\n            }\n            else {\n                rangesToDelete[i + 1] = Range.plusRange(range, nextRange);\n            }\n        }\n        effectiveRanges.push(rangesToDelete[rangesToDelete.length - 1]);\n        const endCursorState = this._getEndCursorState(primaryCursor, effectiveRanges);\n        const edits = effectiveRanges.map(range => {\n            return EditOperation.replace(range, '');\n        });\n        editor.pushUndoStop();\n        editor.executeEdits(this.id, edits, endCursorState);\n        editor.pushUndoStop();\n    }\n}\nexport class DeleteAllLeftAction extends AbstractDeleteAllToBoundaryAction {\n    constructor() {\n        super({\n            id: 'deleteAllLeft',\n            label: nls.localize('lines.deleteAllLeft', \"Delete All Left\"),\n            alias: 'Delete All Left',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 1 /* KeyCode.Backspace */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    _getEndCursorState(primaryCursor, rangesToDelete) {\n        let endPrimaryCursor = null;\n        const endCursorState = [];\n        let deletedLines = 0;\n        rangesToDelete.forEach(range => {\n            let endCursor;\n            if (range.endColumn === 1 && deletedLines > 0) {\n                const newStartLine = range.startLineNumber - deletedLines;\n                endCursor = new Selection(newStartLine, range.startColumn, newStartLine, range.startColumn);\n            }\n            else {\n                endCursor = new Selection(range.startLineNumber, range.startColumn, range.startLineNumber, range.startColumn);\n            }\n            deletedLines += range.endLineNumber - range.startLineNumber;\n            if (range.intersectRanges(primaryCursor)) {\n                endPrimaryCursor = endCursor;\n            }\n            else {\n                endCursorState.push(endCursor);\n            }\n        });\n        if (endPrimaryCursor) {\n            endCursorState.unshift(endPrimaryCursor);\n        }\n        return endCursorState;\n    }\n    _getRangesToDelete(editor) {\n        const selections = editor.getSelections();\n        if (selections === null) {\n            return [];\n        }\n        let rangesToDelete = selections;\n        const model = editor.getModel();\n        if (model === null) {\n            return [];\n        }\n        rangesToDelete.sort(Range.compareRangesUsingStarts);\n        rangesToDelete = rangesToDelete.map(selection => {\n            if (selection.isEmpty()) {\n                if (selection.startColumn === 1) {\n                    const deleteFromLine = Math.max(1, selection.startLineNumber - 1);\n                    const deleteFromColumn = selection.startLineNumber === 1 ? 1 : model.getLineLength(deleteFromLine) + 1;\n                    return new Range(deleteFromLine, deleteFromColumn, selection.startLineNumber, 1);\n                }\n                else {\n                    return new Range(selection.startLineNumber, 1, selection.startLineNumber, selection.startColumn);\n                }\n            }\n            else {\n                return new Range(selection.startLineNumber, 1, selection.endLineNumber, selection.endColumn);\n            }\n        });\n        return rangesToDelete;\n    }\n}\nexport class DeleteAllRightAction extends AbstractDeleteAllToBoundaryAction {\n    constructor() {\n        super({\n            id: 'deleteAllRight',\n            label: nls.localize('lines.deleteAllRight', \"Delete All Right\"),\n            alias: 'Delete All Right',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 41 /* KeyCode.KeyK */, secondary: [2048 /* KeyMod.CtrlCmd */ | 20 /* KeyCode.Delete */] },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    _getEndCursorState(primaryCursor, rangesToDelete) {\n        let endPrimaryCursor = null;\n        const endCursorState = [];\n        for (let i = 0, len = rangesToDelete.length, offset = 0; i < len; i++) {\n            const range = rangesToDelete[i];\n            const endCursor = new Selection(range.startLineNumber - offset, range.startColumn, range.startLineNumber - offset, range.startColumn);\n            if (range.intersectRanges(primaryCursor)) {\n                endPrimaryCursor = endCursor;\n            }\n            else {\n                endCursorState.push(endCursor);\n            }\n        }\n        if (endPrimaryCursor) {\n            endCursorState.unshift(endPrimaryCursor);\n        }\n        return endCursorState;\n    }\n    _getRangesToDelete(editor) {\n        const model = editor.getModel();\n        if (model === null) {\n            return [];\n        }\n        const selections = editor.getSelections();\n        if (selections === null) {\n            return [];\n        }\n        const rangesToDelete = selections.map((sel) => {\n            if (sel.isEmpty()) {\n                const maxColumn = model.getLineMaxColumn(sel.startLineNumber);\n                if (sel.startColumn === maxColumn) {\n                    return new Range(sel.startLineNumber, sel.startColumn, sel.startLineNumber + 1, 1);\n                }\n                else {\n                    return new Range(sel.startLineNumber, sel.startColumn, sel.startLineNumber, maxColumn);\n                }\n            }\n            return sel;\n        });\n        rangesToDelete.sort(Range.compareRangesUsingStarts);\n        return rangesToDelete;\n    }\n}\nexport class JoinLinesAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.joinLines',\n            label: nls.localize('lines.joinLines', \"Join Lines\"),\n            alias: 'Join Lines',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 0,\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 40 /* KeyCode.KeyJ */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        const selections = editor.getSelections();\n        if (selections === null) {\n            return;\n        }\n        let primaryCursor = editor.getSelection();\n        if (primaryCursor === null) {\n            return;\n        }\n        selections.sort(Range.compareRangesUsingStarts);\n        const reducedSelections = [];\n        const lastSelection = selections.reduce((previousValue, currentValue) => {\n            if (previousValue.isEmpty()) {\n                if (previousValue.endLineNumber === currentValue.startLineNumber) {\n                    if (primaryCursor.equalsSelection(previousValue)) {\n                        primaryCursor = currentValue;\n                    }\n                    return currentValue;\n                }\n                if (currentValue.startLineNumber > previousValue.endLineNumber + 1) {\n                    reducedSelections.push(previousValue);\n                    return currentValue;\n                }\n                else {\n                    return new Selection(previousValue.startLineNumber, previousValue.startColumn, currentValue.endLineNumber, currentValue.endColumn);\n                }\n            }\n            else {\n                if (currentValue.startLineNumber > previousValue.endLineNumber) {\n                    reducedSelections.push(previousValue);\n                    return currentValue;\n                }\n                else {\n                    return new Selection(previousValue.startLineNumber, previousValue.startColumn, currentValue.endLineNumber, currentValue.endColumn);\n                }\n            }\n        });\n        reducedSelections.push(lastSelection);\n        const model = editor.getModel();\n        if (model === null) {\n            return;\n        }\n        const edits = [];\n        const endCursorState = [];\n        let endPrimaryCursor = primaryCursor;\n        let lineOffset = 0;\n        for (let i = 0, len = reducedSelections.length; i < len; i++) {\n            const selection = reducedSelections[i];\n            const startLineNumber = selection.startLineNumber;\n            const startColumn = 1;\n            let columnDeltaOffset = 0;\n            let endLineNumber, endColumn;\n            const selectionEndPositionOffset = model.getLineLength(selection.endLineNumber) - selection.endColumn;\n            if (selection.isEmpty() || selection.startLineNumber === selection.endLineNumber) {\n                const position = selection.getStartPosition();\n                if (position.lineNumber < model.getLineCount()) {\n                    endLineNumber = startLineNumber + 1;\n                    endColumn = model.getLineMaxColumn(endLineNumber);\n                }\n                else {\n                    endLineNumber = position.lineNumber;\n                    endColumn = model.getLineMaxColumn(position.lineNumber);\n                }\n            }\n            else {\n                endLineNumber = selection.endLineNumber;\n                endColumn = model.getLineMaxColumn(endLineNumber);\n            }\n            let trimmedLinesContent = model.getLineContent(startLineNumber);\n            for (let i = startLineNumber + 1; i <= endLineNumber; i++) {\n                const lineText = model.getLineContent(i);\n                const firstNonWhitespaceIdx = model.getLineFirstNonWhitespaceColumn(i);\n                if (firstNonWhitespaceIdx >= 1) {\n                    let insertSpace = true;\n                    if (trimmedLinesContent === '') {\n                        insertSpace = false;\n                    }\n                    if (insertSpace && (trimmedLinesContent.charAt(trimmedLinesContent.length - 1) === ' ' ||\n                        trimmedLinesContent.charAt(trimmedLinesContent.length - 1) === '\\t')) {\n                        insertSpace = false;\n                        trimmedLinesContent = trimmedLinesContent.replace(/[\\s\\uFEFF\\xA0]+$/g, ' ');\n                    }\n                    const lineTextWithoutIndent = lineText.substr(firstNonWhitespaceIdx - 1);\n                    trimmedLinesContent += (insertSpace ? ' ' : '') + lineTextWithoutIndent;\n                    if (insertSpace) {\n                        columnDeltaOffset = lineTextWithoutIndent.length + 1;\n                    }\n                    else {\n                        columnDeltaOffset = lineTextWithoutIndent.length;\n                    }\n                }\n                else {\n                    columnDeltaOffset = 0;\n                }\n            }\n            const deleteSelection = new Range(startLineNumber, startColumn, endLineNumber, endColumn);\n            if (!deleteSelection.isEmpty()) {\n                let resultSelection;\n                if (selection.isEmpty()) {\n                    edits.push(EditOperation.replace(deleteSelection, trimmedLinesContent));\n                    resultSelection = new Selection(deleteSelection.startLineNumber - lineOffset, trimmedLinesContent.length - columnDeltaOffset + 1, startLineNumber - lineOffset, trimmedLinesContent.length - columnDeltaOffset + 1);\n                }\n                else {\n                    if (selection.startLineNumber === selection.endLineNumber) {\n                        edits.push(EditOperation.replace(deleteSelection, trimmedLinesContent));\n                        resultSelection = new Selection(selection.startLineNumber - lineOffset, selection.startColumn, selection.endLineNumber - lineOffset, selection.endColumn);\n                    }\n                    else {\n                        edits.push(EditOperation.replace(deleteSelection, trimmedLinesContent));\n                        resultSelection = new Selection(selection.startLineNumber - lineOffset, selection.startColumn, selection.startLineNumber - lineOffset, trimmedLinesContent.length - selectionEndPositionOffset);\n                    }\n                }\n                if (Range.intersectRanges(deleteSelection, primaryCursor) !== null) {\n                    endPrimaryCursor = resultSelection;\n                }\n                else {\n                    endCursorState.push(resultSelection);\n                }\n            }\n            lineOffset += deleteSelection.endLineNumber - deleteSelection.startLineNumber;\n        }\n        endCursorState.unshift(endPrimaryCursor);\n        editor.pushUndoStop();\n        editor.executeEdits(this.id, edits, endCursorState);\n        editor.pushUndoStop();\n    }\n}\nexport class TransposeAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.transpose',\n            label: nls.localize('editor.transpose', \"Transpose Characters around the Cursor\"),\n            alias: 'Transpose Characters around the Cursor',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    run(_accessor, editor) {\n        const selections = editor.getSelections();\n        if (selections === null) {\n            return;\n        }\n        const model = editor.getModel();\n        if (model === null) {\n            return;\n        }\n        const commands = [];\n        for (let i = 0, len = selections.length; i < len; i++) {\n            const selection = selections[i];\n            if (!selection.isEmpty()) {\n                continue;\n            }\n            const cursor = selection.getStartPosition();\n            const maxColumn = model.getLineMaxColumn(cursor.lineNumber);\n            if (cursor.column >= maxColumn) {\n                if (cursor.lineNumber === model.getLineCount()) {\n                    continue;\n                }\n                // The cursor is at the end of current line and current line is not empty\n                // then we transpose the character before the cursor and the line break if there is any following line.\n                const deleteSelection = new Range(cursor.lineNumber, Math.max(1, cursor.column - 1), cursor.lineNumber + 1, 1);\n                const chars = model.getValueInRange(deleteSelection).split('').reverse().join('');\n                commands.push(new ReplaceCommand(new Selection(cursor.lineNumber, Math.max(1, cursor.column - 1), cursor.lineNumber + 1, 1), chars));\n            }\n            else {\n                const deleteSelection = new Range(cursor.lineNumber, Math.max(1, cursor.column - 1), cursor.lineNumber, cursor.column + 1);\n                const chars = model.getValueInRange(deleteSelection).split('').reverse().join('');\n                commands.push(new ReplaceCommandThatPreservesSelection(deleteSelection, chars, new Selection(cursor.lineNumber, cursor.column + 1, cursor.lineNumber, cursor.column + 1)));\n            }\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nexport class AbstractCaseAction extends EditorAction {\n    run(_accessor, editor) {\n        const selections = editor.getSelections();\n        if (selections === null) {\n            return;\n        }\n        const model = editor.getModel();\n        if (model === null) {\n            return;\n        }\n        const wordSeparators = editor.getOption(131 /* EditorOption.wordSeparators */);\n        const textEdits = [];\n        for (const selection of selections) {\n            if (selection.isEmpty()) {\n                const cursor = selection.getStartPosition();\n                const word = editor.getConfiguredWordAtPosition(cursor);\n                if (!word) {\n                    continue;\n                }\n                const wordRange = new Range(cursor.lineNumber, word.startColumn, cursor.lineNumber, word.endColumn);\n                const text = model.getValueInRange(wordRange);\n                textEdits.push(EditOperation.replace(wordRange, this._modifyText(text, wordSeparators)));\n            }\n            else {\n                const text = model.getValueInRange(selection);\n                textEdits.push(EditOperation.replace(selection, this._modifyText(text, wordSeparators)));\n            }\n        }\n        editor.pushUndoStop();\n        editor.executeEdits(this.id, textEdits);\n        editor.pushUndoStop();\n    }\n}\nexport class UpperCaseAction extends AbstractCaseAction {\n    constructor() {\n        super({\n            id: 'editor.action.transformToUppercase',\n            label: nls.localize('editor.transformToUppercase', \"Transform to Uppercase\"),\n            alias: 'Transform to Uppercase',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    _modifyText(text, wordSeparators) {\n        return text.toLocaleUpperCase();\n    }\n}\nexport class LowerCaseAction extends AbstractCaseAction {\n    constructor() {\n        super({\n            id: 'editor.action.transformToLowercase',\n            label: nls.localize('editor.transformToLowercase', \"Transform to Lowercase\"),\n            alias: 'Transform to Lowercase',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    _modifyText(text, wordSeparators) {\n        return text.toLocaleLowerCase();\n    }\n}\nclass BackwardsCompatibleRegExp {\n    constructor(_pattern, _flags) {\n        this._pattern = _pattern;\n        this._flags = _flags;\n        this._actual = null;\n        this._evaluated = false;\n    }\n    get() {\n        if (!this._evaluated) {\n            this._evaluated = true;\n            try {\n                this._actual = new RegExp(this._pattern, this._flags);\n            }\n            catch (err) {\n                // this browser does not support this regular expression\n            }\n        }\n        return this._actual;\n    }\n    isSupported() {\n        return (this.get() !== null);\n    }\n}\nexport class TitleCaseAction extends AbstractCaseAction {\n    constructor() {\n        super({\n            id: 'editor.action.transformToTitlecase',\n            label: nls.localize('editor.transformToTitlecase', \"Transform to Title Case\"),\n            alias: 'Transform to Title Case',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    _modifyText(text, wordSeparators) {\n        const titleBoundary = TitleCaseAction.titleBoundary.get();\n        if (!titleBoundary) {\n            // cannot support this\n            return text;\n        }\n        return text\n            .toLocaleLowerCase()\n            .replace(titleBoundary, (b) => b.toLocaleUpperCase());\n    }\n}\nTitleCaseAction.titleBoundary = new BackwardsCompatibleRegExp('(^|[^\\\\p{L}\\\\p{N}\\']|((^|\\\\P{L})\\'))\\\\p{L}', 'gmu');\nexport class SnakeCaseAction extends AbstractCaseAction {\n    constructor() {\n        super({\n            id: 'editor.action.transformToSnakecase',\n            label: nls.localize('editor.transformToSnakecase', \"Transform to Snake Case\"),\n            alias: 'Transform to Snake Case',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    _modifyText(text, wordSeparators) {\n        const caseBoundary = SnakeCaseAction.caseBoundary.get();\n        const singleLetters = SnakeCaseAction.singleLetters.get();\n        if (!caseBoundary || !singleLetters) {\n            // cannot support this\n            return text;\n        }\n        return (text\n            .replace(caseBoundary, '$1_$2')\n            .replace(singleLetters, '$1_$2$3')\n            .toLocaleLowerCase());\n    }\n}\nSnakeCaseAction.caseBoundary = new BackwardsCompatibleRegExp('(\\\\p{Ll})(\\\\p{Lu})', 'gmu');\nSnakeCaseAction.singleLetters = new BackwardsCompatibleRegExp('(\\\\p{Lu}|\\\\p{N})(\\\\p{Lu})(\\\\p{Ll})', 'gmu');\nexport class CamelCaseAction extends AbstractCaseAction {\n    constructor() {\n        super({\n            id: 'editor.action.transformToCamelcase',\n            label: nls.localize('editor.transformToCamelcase', \"Transform to Camel Case\"),\n            alias: 'Transform to Camel Case',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    _modifyText(text, wordSeparators) {\n        const wordBoundary = CamelCaseAction.wordBoundary.get();\n        if (!wordBoundary) {\n            // cannot support this\n            return text;\n        }\n        const words = text.split(wordBoundary);\n        const firstWord = words.shift();\n        return firstWord + words.map((word) => word.substring(0, 1).toLocaleUpperCase() + word.substring(1))\n            .join('');\n    }\n}\nCamelCaseAction.wordBoundary = new BackwardsCompatibleRegExp('[_\\\\s-]', 'gm');\nexport class PascalCaseAction extends AbstractCaseAction {\n    constructor() {\n        super({\n            id: 'editor.action.transformToPascalcase',\n            label: nls.localize('editor.transformToPascalcase', \"Transform to Pascal Case\"),\n            alias: 'Transform to Pascal Case',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    _modifyText(text, wordSeparators) {\n        const wordBoundary = PascalCaseAction.wordBoundary.get();\n        const wordBoundaryToMaintain = PascalCaseAction.wordBoundaryToMaintain.get();\n        if (!wordBoundary || !wordBoundaryToMaintain) {\n            // cannot support this\n            return text;\n        }\n        const wordsWithMaintainBoundaries = text.split(wordBoundaryToMaintain);\n        const words = wordsWithMaintainBoundaries.map((word) => word.split(wordBoundary)).flat();\n        return words.map((word) => word.substring(0, 1).toLocaleUpperCase() + word.substring(1))\n            .join('');\n    }\n}\nPascalCaseAction.wordBoundary = new BackwardsCompatibleRegExp('[_\\\\s-]', 'gm');\nPascalCaseAction.wordBoundaryToMaintain = new BackwardsCompatibleRegExp('(?<=\\\\.)', 'gm');\nexport class KebabCaseAction extends AbstractCaseAction {\n    static isSupported() {\n        const areAllRegexpsSupported = [\n            this.caseBoundary,\n            this.singleLetters,\n            this.underscoreBoundary,\n        ].every((regexp) => regexp.isSupported());\n        return areAllRegexpsSupported;\n    }\n    constructor() {\n        super({\n            id: 'editor.action.transformToKebabcase',\n            label: nls.localize('editor.transformToKebabcase', 'Transform to Kebab Case'),\n            alias: 'Transform to Kebab Case',\n            precondition: EditorContextKeys.writable\n        });\n    }\n    _modifyText(text, _) {\n        const caseBoundary = KebabCaseAction.caseBoundary.get();\n        const singleLetters = KebabCaseAction.singleLetters.get();\n        const underscoreBoundary = KebabCaseAction.underscoreBoundary.get();\n        if (!caseBoundary || !singleLetters || !underscoreBoundary) {\n            // one or more regexps aren't supported\n            return text;\n        }\n        return text\n            .replace(underscoreBoundary, '$1-$3')\n            .replace(caseBoundary, '$1-$2')\n            .replace(singleLetters, '$1-$2')\n            .toLocaleLowerCase();\n    }\n}\nKebabCaseAction.caseBoundary = new BackwardsCompatibleRegExp('(\\\\p{Ll})(\\\\p{Lu})', 'gmu');\nKebabCaseAction.singleLetters = new BackwardsCompatibleRegExp('(\\\\p{Lu}|\\\\p{N})(\\\\p{Lu}\\\\p{Ll})', 'gmu');\nKebabCaseAction.underscoreBoundary = new BackwardsCompatibleRegExp('(\\\\S)(_)(\\\\S)', 'gm');\nregisterEditorAction(CopyLinesUpAction);\nregisterEditorAction(CopyLinesDownAction);\nregisterEditorAction(DuplicateSelectionAction);\nregisterEditorAction(MoveLinesUpAction);\nregisterEditorAction(MoveLinesDownAction);\nregisterEditorAction(SortLinesAscendingAction);\nregisterEditorAction(SortLinesDescendingAction);\nregisterEditorAction(DeleteDuplicateLinesAction);\nregisterEditorAction(TrimTrailingWhitespaceAction);\nregisterEditorAction(DeleteLinesAction);\nregisterEditorAction(IndentLinesAction);\nregisterEditorAction(OutdentLinesAction);\nregisterEditorAction(InsertLineBeforeAction);\nregisterEditorAction(InsertLineAfterAction);\nregisterEditorAction(DeleteAllLeftAction);\nregisterEditorAction(DeleteAllRightAction);\nregisterEditorAction(JoinLinesAction);\nregisterEditorAction(TransposeAction);\nregisterEditorAction(UpperCaseAction);\nregisterEditorAction(LowerCaseAction);\nif (SnakeCaseAction.caseBoundary.isSupported() && SnakeCaseAction.singleLetters.isSupported()) {\n    registerEditorAction(SnakeCaseAction);\n}\nif (CamelCaseAction.wordBoundary.isSupported()) {\n    registerEditorAction(CamelCaseAction);\n}\nif (PascalCaseAction.wordBoundary.isSupported()) {\n    registerEditorAction(PascalCaseAction);\n}\nif (TitleCaseAction.titleBoundary.isSupported()) {\n    registerEditorAction(TitleCaseAction);\n}\nif (KebabCaseAction.isSupported()) {\n    registerEditorAction(KebabCaseAction);\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAASA,QAAQ,QAAQ,qCAAqC;AAC9D,SAASC,mBAAmB,QAAQ,kCAAkC;AACtE,SAASC,YAAY,EAAEC,oBAAoB,QAAQ,sCAAsC;AACzF,SAASC,cAAc,EAAEC,oCAAoC,EAAEC,6BAA6B,QAAQ,4CAA4C;AAChJ,SAASC,6BAA6B,QAAQ,2DAA2D;AACzG,SAASC,cAAc,QAAQ,gDAAgD;AAC/E,SAASC,aAAa,QAAQ,uCAAuC;AACrE,SAASC,QAAQ,QAAQ,kCAAkC;AAC3D,SAASC,KAAK,QAAQ,+BAA+B;AACrD,SAASC,SAAS,QAAQ,mCAAmC;AAC7D,SAASC,iBAAiB,QAAQ,sCAAsC;AACxE,SAASC,gBAAgB,QAAQ,uBAAuB;AACxD,SAASC,gBAAgB,QAAQ,uBAAuB;AACxD,SAASC,gBAAgB,QAAQ,uBAAuB;AACxD,OAAO,KAAKC,GAAG,MAAM,oBAAoB;AACzC,SAASC,MAAM,QAAQ,gDAAgD;AACvE,SAASC,6BAA6B,QAAQ,4DAA4D;AAC1G,SAASC,qBAAqB,QAAQ,4DAA4D;AAClG;AACA,MAAMC,uBAAuB,SAASnB,YAAY,CAAC;EAC/CoB,WAAWA,CAACC,IAAI,EAAEC,IAAI,EAAE;IACpB,KAAK,CAACA,IAAI,CAAC;IACX,IAAI,CAACD,IAAI,GAAGA,IAAI;EACpB;EACAE,GAAGA,CAACC,SAAS,EAAEC,MAAM,EAAE;IACnB,IAAI,CAACA,MAAM,CAACC,QAAQ,CAAC,CAAC,EAAE;MACpB;IACJ;IACA,MAAMC,UAAU,GAAGF,MAAM,CAACG,aAAa,CAAC,CAAC,CAACC,GAAG,CAAC,CAACC,SAAS,EAAEC,KAAK,MAAM;MAAED,SAAS;MAAEC,KAAK;MAAEC,MAAM,EAAE;IAAM,CAAC,CAAC,CAAC;IAC1GL,UAAU,CAACM,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK1B,KAAK,CAAC2B,wBAAwB,CAACF,CAAC,CAACJ,SAAS,EAAEK,CAAC,CAACL,SAAS,CAAC,CAAC;IACnF;IACA,IAAIO,IAAI,GAAGV,UAAU,CAAC,CAAC,CAAC;IACxB,KAAK,IAAIW,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGX,UAAU,CAACY,MAAM,EAAED,CAAC,EAAE,EAAE;MACxC,MAAME,IAAI,GAAGb,UAAU,CAACW,CAAC,CAAC;MAC1B,IAAID,IAAI,CAACP,SAAS,CAACW,aAAa,KAAKD,IAAI,CAACV,SAAS,CAACY,eAAe,EAAE;QACjE;QACA,IAAIL,IAAI,CAACN,KAAK,GAAGS,IAAI,CAACT,KAAK,EAAE;UACzB;UACAS,IAAI,CAACR,MAAM,GAAG,IAAI;QACtB,CAAC,MACI;UACD;UACAK,IAAI,CAACL,MAAM,GAAG,IAAI;UAClBK,IAAI,GAAGG,IAAI;QACf;MACJ;IACJ;IACA,MAAMG,QAAQ,GAAG,EAAE;IACnB,KAAK,MAAMb,SAAS,IAAIH,UAAU,EAAE;MAChCgB,QAAQ,CAACC,IAAI,CAAC,IAAIhC,gBAAgB,CAACkB,SAAS,CAACA,SAAS,EAAE,IAAI,CAACT,IAAI,EAAES,SAAS,CAACE,MAAM,CAAC,CAAC;IACzF;IACAP,MAAM,CAACoB,YAAY,CAAC,CAAC;IACrBpB,MAAM,CAACqB,eAAe,CAAC,IAAI,CAACC,EAAE,EAAEJ,QAAQ,CAAC;IACzClB,MAAM,CAACoB,YAAY,CAAC,CAAC;EACzB;AACJ;AACA,MAAMG,iBAAiB,SAAS7B,uBAAuB,CAAC;EACpDC,WAAWA,CAAA,EAAG;IACV,KAAK,CAAC,KAAK,EAAE;MACT2B,EAAE,EAAE,iCAAiC;MACrCE,KAAK,EAAElC,GAAG,CAACmC,QAAQ,CAAC,cAAc,EAAE,cAAc,CAAC;MACnDC,KAAK,EAAE,cAAc;MACrBC,YAAY,EAAEzC,iBAAiB,CAAC0C,QAAQ;MACxCC,MAAM,EAAE;QACJC,MAAM,EAAE5C,iBAAiB,CAAC6C,eAAe;QACzCC,OAAO,EAAE,GAAG,CAAC,mBAAmB,IAAI,CAAC,qBAAqB,EAAE,CAAC;QAC7DC,KAAK,EAAE;UAAED,OAAO,EAAE,IAAI,CAAC,uBAAuB,GAAG,CAAC,mBAAmB,IAAI,CAAC,qBAAqB,EAAE,CAAC;QAAsB,CAAC;QACzHE,MAAM,EAAE,GAAG,CAAC;MAChB,CAAC;MACDC,QAAQ,EAAE;QACNC,MAAM,EAAE7C,MAAM,CAAC8C,oBAAoB;QACnCC,KAAK,EAAE,QAAQ;QACfC,KAAK,EAAEjD,GAAG,CAACmC,QAAQ,CAAC;UAAEe,GAAG,EAAE,eAAe;UAAEC,OAAO,EAAE,CAAC,uBAAuB;QAAE,CAAC,EAAE,gBAAgB,CAAC;QACnGC,KAAK,EAAE;MACX;IACJ,CAAC,CAAC;EACN;AACJ;AACA,MAAMC,mBAAmB,SAASjD,uBAAuB,CAAC;EACtDC,WAAWA,CAAA,EAAG;IACV,KAAK,CAAC,IAAI,EAAE;MACR2B,EAAE,EAAE,mCAAmC;MACvCE,KAAK,EAAElC,GAAG,CAACmC,QAAQ,CAAC,gBAAgB,EAAE,gBAAgB,CAAC;MACvDC,KAAK,EAAE,gBAAgB;MACvBC,YAAY,EAAEzC,iBAAiB,CAAC0C,QAAQ;MACxCC,MAAM,EAAE;QACJC,MAAM,EAAE5C,iBAAiB,CAAC6C,eAAe;QACzCC,OAAO,EAAE,GAAG,CAAC,mBAAmB,IAAI,CAAC,qBAAqB,EAAE,CAAC;QAC7DC,KAAK,EAAE;UAAED,OAAO,EAAE,IAAI,CAAC,uBAAuB,GAAG,CAAC,mBAAmB,IAAI,CAAC,qBAAqB,EAAE,CAAC;QAAwB,CAAC;QAC3HE,MAAM,EAAE,GAAG,CAAC;MAChB,CAAC;MACDC,QAAQ,EAAE;QACNC,MAAM,EAAE7C,MAAM,CAAC8C,oBAAoB;QACnCC,KAAK,EAAE,QAAQ;QACfC,KAAK,EAAEjD,GAAG,CAACmC,QAAQ,CAAC;UAAEe,GAAG,EAAE,iBAAiB;UAAEC,OAAO,EAAE,CAAC,uBAAuB;QAAE,CAAC,EAAE,kBAAkB,CAAC;QACvGC,KAAK,EAAE;MACX;IACJ,CAAC,CAAC;EACN;AACJ;AACA,OAAO,MAAME,wBAAwB,SAASrE,YAAY,CAAC;EACvDoB,WAAWA,CAAA,EAAG;IACV,KAAK,CAAC;MACF2B,EAAE,EAAE,kCAAkC;MACtCE,KAAK,EAAElC,GAAG,CAACmC,QAAQ,CAAC,oBAAoB,EAAE,qBAAqB,CAAC;MAChEC,KAAK,EAAE,qBAAqB;MAC5BC,YAAY,EAAEzC,iBAAiB,CAAC0C,QAAQ;MACxCO,QAAQ,EAAE;QACNC,MAAM,EAAE7C,MAAM,CAAC8C,oBAAoB;QACnCC,KAAK,EAAE,QAAQ;QACfC,KAAK,EAAEjD,GAAG,CAACmC,QAAQ,CAAC;UAAEe,GAAG,EAAE,sBAAsB;UAAEC,OAAO,EAAE,CAAC,uBAAuB;QAAE,CAAC,EAAE,uBAAuB,CAAC;QACjHC,KAAK,EAAE;MACX;IACJ,CAAC,CAAC;EACN;EACA5C,GAAGA,CAAC+C,QAAQ,EAAE7C,MAAM,EAAE8C,IAAI,EAAE;IACxB,IAAI,CAAC9C,MAAM,CAACC,QAAQ,CAAC,CAAC,EAAE;MACpB;IACJ;IACA,MAAMiB,QAAQ,GAAG,EAAE;IACnB,MAAMhB,UAAU,GAAGF,MAAM,CAACG,aAAa,CAAC,CAAC;IACzC,MAAM4C,KAAK,GAAG/C,MAAM,CAACgD,QAAQ,CAAC,CAAC;IAC/B,KAAK,MAAM3C,SAAS,IAAIH,UAAU,EAAE;MAChC,IAAIG,SAAS,CAAC4C,OAAO,CAAC,CAAC,EAAE;QACrB/B,QAAQ,CAACC,IAAI,CAAC,IAAIhC,gBAAgB,CAACkB,SAAS,EAAE,IAAI,CAAC,CAAC;MACxD,CAAC,MACI;QACD,MAAM6C,eAAe,GAAG,IAAIjE,SAAS,CAACoB,SAAS,CAACW,aAAa,EAAEX,SAAS,CAAC8C,SAAS,EAAE9C,SAAS,CAACW,aAAa,EAAEX,SAAS,CAAC8C,SAAS,CAAC;QACjIjC,QAAQ,CAACC,IAAI,CAAC,IAAIxC,6BAA6B,CAACuE,eAAe,EAAEH,KAAK,CAACK,eAAe,CAAC/C,SAAS,CAAC,CAAC,CAAC;MACvG;IACJ;IACAL,MAAM,CAACoB,YAAY,CAAC,CAAC;IACrBpB,MAAM,CAACqB,eAAe,CAAC,IAAI,CAACC,EAAE,EAAEJ,QAAQ,CAAC;IACzClB,MAAM,CAACoB,YAAY,CAAC,CAAC;EACzB;AACJ;AACA;AACA,MAAMiC,uBAAuB,SAAS9E,YAAY,CAAC;EAC/CoB,WAAWA,CAACC,IAAI,EAAEC,IAAI,EAAE;IACpB,KAAK,CAACA,IAAI,CAAC;IACX,IAAI,CAACD,IAAI,GAAGA,IAAI;EACpB;EACAE,GAAGA,CAAC+C,QAAQ,EAAE7C,MAAM,EAAE;IAClB,MAAMsD,4BAA4B,GAAGT,QAAQ,CAACU,GAAG,CAAC/D,6BAA6B,CAAC;IAChF,MAAM0B,QAAQ,GAAG,EAAE;IACnB,MAAMhB,UAAU,GAAGF,MAAM,CAACG,aAAa,CAAC,CAAC,IAAI,EAAE;IAC/C,MAAMqD,UAAU,GAAGxD,MAAM,CAACyD,SAAS,CAAC,EAAE,CAAC,6BAA6B,CAAC;IACrE,KAAK,MAAMpD,SAAS,IAAIH,UAAU,EAAE;MAChCgB,QAAQ,CAACC,IAAI,CAAC,IAAI/B,gBAAgB,CAACiB,SAAS,EAAE,IAAI,CAACT,IAAI,EAAE4D,UAAU,EAAEF,4BAA4B,CAAC,CAAC;IACvG;IACAtD,MAAM,CAACoB,YAAY,CAAC,CAAC;IACrBpB,MAAM,CAACqB,eAAe,CAAC,IAAI,CAACC,EAAE,EAAEJ,QAAQ,CAAC;IACzClB,MAAM,CAACoB,YAAY,CAAC,CAAC;EACzB;AACJ;AACA,MAAMsC,iBAAiB,SAASL,uBAAuB,CAAC;EACpD1D,WAAWA,CAAA,EAAG;IACV,KAAK,CAAC,KAAK,EAAE;MACT2B,EAAE,EAAE,iCAAiC;MACrCE,KAAK,EAAElC,GAAG,CAACmC,QAAQ,CAAC,cAAc,EAAE,cAAc,CAAC;MACnDC,KAAK,EAAE,cAAc;MACrBC,YAAY,EAAEzC,iBAAiB,CAAC0C,QAAQ;MACxCC,MAAM,EAAE;QACJC,MAAM,EAAE5C,iBAAiB,CAAC6C,eAAe;QACzCC,OAAO,EAAE,GAAG,CAAC,mBAAmB,EAAE,CAAC;QACnCC,KAAK,EAAE;UAAED,OAAO,EAAE,GAAG,CAAC,mBAAmB,EAAE,CAAC;QAAsB,CAAC;QACnEE,MAAM,EAAE,GAAG,CAAC;MAChB,CAAC;MACDC,QAAQ,EAAE;QACNC,MAAM,EAAE7C,MAAM,CAAC8C,oBAAoB;QACnCC,KAAK,EAAE,QAAQ;QACfC,KAAK,EAAEjD,GAAG,CAACmC,QAAQ,CAAC;UAAEe,GAAG,EAAE,eAAe;UAAEC,OAAO,EAAE,CAAC,uBAAuB;QAAE,CAAC,EAAE,gBAAgB,CAAC;QACnGC,KAAK,EAAE;MACX;IACJ,CAAC,CAAC;EACN;AACJ;AACA,MAAMiB,mBAAmB,SAASN,uBAAuB,CAAC;EACtD1D,WAAWA,CAAA,EAAG;IACV,KAAK,CAAC,IAAI,EAAE;MACR2B,EAAE,EAAE,mCAAmC;MACvCE,KAAK,EAAElC,GAAG,CAACmC,QAAQ,CAAC,gBAAgB,EAAE,gBAAgB,CAAC;MACvDC,KAAK,EAAE,gBAAgB;MACvBC,YAAY,EAAEzC,iBAAiB,CAAC0C,QAAQ;MACxCC,MAAM,EAAE;QACJC,MAAM,EAAE5C,iBAAiB,CAAC6C,eAAe;QACzCC,OAAO,EAAE,GAAG,CAAC,mBAAmB,EAAE,CAAC;QACnCC,KAAK,EAAE;UAAED,OAAO,EAAE,GAAG,CAAC,mBAAmB,EAAE,CAAC;QAAwB,CAAC;QACrEE,MAAM,EAAE,GAAG,CAAC;MAChB,CAAC;MACDC,QAAQ,EAAE;QACNC,MAAM,EAAE7C,MAAM,CAAC8C,oBAAoB;QACnCC,KAAK,EAAE,QAAQ;QACfC,KAAK,EAAEjD,GAAG,CAACmC,QAAQ,CAAC;UAAEe,GAAG,EAAE,iBAAiB;UAAEC,OAAO,EAAE,CAAC,uBAAuB;QAAE,CAAC,EAAE,kBAAkB,CAAC;QACvGC,KAAK,EAAE;MACX;IACJ,CAAC,CAAC;EACN;AACJ;AACA,OAAO,MAAMkB,uBAAuB,SAASrF,YAAY,CAAC;EACtDoB,WAAWA,CAACkE,UAAU,EAAEhE,IAAI,EAAE;IAC1B,KAAK,CAACA,IAAI,CAAC;IACX,IAAI,CAACgE,UAAU,GAAGA,UAAU;EAChC;EACA/D,GAAGA,CAACC,SAAS,EAAEC,MAAM,EAAE;IACnB,IAAI,CAACA,MAAM,CAACC,QAAQ,CAAC,CAAC,EAAE;MACpB;IACJ;IACA,MAAM8C,KAAK,GAAG/C,MAAM,CAACgD,QAAQ,CAAC,CAAC;IAC/B,IAAI9C,UAAU,GAAGF,MAAM,CAACG,aAAa,CAAC,CAAC;IACvC,IAAID,UAAU,CAACY,MAAM,KAAK,CAAC,IAAIZ,UAAU,CAAC,CAAC,CAAC,CAAC+C,OAAO,CAAC,CAAC,EAAE;MACpD;MACA/C,UAAU,GAAG,CAAC,IAAIjB,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE8D,KAAK,CAACe,YAAY,CAAC,CAAC,EAAEf,KAAK,CAACgB,gBAAgB,CAAChB,KAAK,CAACe,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC;IAC1G;IACA,KAAK,MAAMzD,SAAS,IAAIH,UAAU,EAAE;MAChC,IAAI,CAACb,gBAAgB,CAAC2E,MAAM,CAAChE,MAAM,CAACgD,QAAQ,CAAC,CAAC,EAAE3C,SAAS,EAAE,IAAI,CAACwD,UAAU,CAAC,EAAE;QACzE;MACJ;IACJ;IACA,MAAM3C,QAAQ,GAAG,EAAE;IACnB,KAAK,IAAIL,CAAC,GAAG,CAAC,EAAEoD,GAAG,GAAG/D,UAAU,CAACY,MAAM,EAAED,CAAC,GAAGoD,GAAG,EAAEpD,CAAC,EAAE,EAAE;MACnDK,QAAQ,CAACL,CAAC,CAAC,GAAG,IAAIxB,gBAAgB,CAACa,UAAU,CAACW,CAAC,CAAC,EAAE,IAAI,CAACgD,UAAU,CAAC;IACtE;IACA7D,MAAM,CAACoB,YAAY,CAAC,CAAC;IACrBpB,MAAM,CAACqB,eAAe,CAAC,IAAI,CAACC,EAAE,EAAEJ,QAAQ,CAAC;IACzClB,MAAM,CAACoB,YAAY,CAAC,CAAC;EACzB;AACJ;AACA,OAAO,MAAM8C,wBAAwB,SAASN,uBAAuB,CAAC;EAClEjE,WAAWA,CAAA,EAAG;IACV,KAAK,CAAC,KAAK,EAAE;MACT2B,EAAE,EAAE,kCAAkC;MACtCE,KAAK,EAAElC,GAAG,CAACmC,QAAQ,CAAC,qBAAqB,EAAE,sBAAsB,CAAC;MAClEC,KAAK,EAAE,sBAAsB;MAC7BC,YAAY,EAAEzC,iBAAiB,CAAC0C;IACpC,CAAC,CAAC;EACN;AACJ;AACA,OAAO,MAAMuC,yBAAyB,SAASP,uBAAuB,CAAC;EACnEjE,WAAWA,CAAA,EAAG;IACV,KAAK,CAAC,IAAI,EAAE;MACR2B,EAAE,EAAE,mCAAmC;MACvCE,KAAK,EAAElC,GAAG,CAACmC,QAAQ,CAAC,sBAAsB,EAAE,uBAAuB,CAAC;MACpEC,KAAK,EAAE,uBAAuB;MAC9BC,YAAY,EAAEzC,iBAAiB,CAAC0C;IACpC,CAAC,CAAC;EACN;AACJ;AACA,OAAO,MAAMwC,0BAA0B,SAAS7F,YAAY,CAAC;EACzDoB,WAAWA,CAAA,EAAG;IACV,KAAK,CAAC;MACF2B,EAAE,EAAE,oCAAoC;MACxCE,KAAK,EAAElC,GAAG,CAACmC,QAAQ,CAAC,wBAAwB,EAAE,wBAAwB,CAAC;MACvEC,KAAK,EAAE,wBAAwB;MAC/BC,YAAY,EAAEzC,iBAAiB,CAAC0C;IACpC,CAAC,CAAC;EACN;EACA9B,GAAGA,CAACC,SAAS,EAAEC,MAAM,EAAE;IACnB,IAAI,CAACA,MAAM,CAACC,QAAQ,CAAC,CAAC,EAAE;MACpB;IACJ;IACA,MAAM8C,KAAK,GAAG/C,MAAM,CAACgD,QAAQ,CAAC,CAAC;IAC/B,IAAID,KAAK,CAACe,YAAY,CAAC,CAAC,KAAK,CAAC,IAAIf,KAAK,CAACgB,gBAAgB,CAAC,CAAC,CAAC,KAAK,CAAC,EAAE;MAC/D;IACJ;IACA,MAAMM,KAAK,GAAG,EAAE;IAChB,MAAMC,cAAc,GAAG,EAAE;IACzB,IAAIC,YAAY,GAAG,CAAC;IACpB,IAAIC,eAAe,GAAG,IAAI;IAC1B,IAAItE,UAAU,GAAGF,MAAM,CAACG,aAAa,CAAC,CAAC;IACvC,IAAID,UAAU,CAACY,MAAM,KAAK,CAAC,IAAIZ,UAAU,CAAC,CAAC,CAAC,CAAC+C,OAAO,CAAC,CAAC,EAAE;MACpD;MACA/C,UAAU,GAAG,CAAC,IAAIjB,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE8D,KAAK,CAACe,YAAY,CAAC,CAAC,EAAEf,KAAK,CAACgB,gBAAgB,CAAChB,KAAK,CAACe,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC;MACtGU,eAAe,GAAG,KAAK;IAC3B;IACA,KAAK,MAAMnE,SAAS,IAAIH,UAAU,EAAE;MAChC,MAAMuE,WAAW,GAAG,IAAIC,GAAG,CAAC,CAAC;MAC7B,MAAMC,KAAK,GAAG,EAAE;MAChB,KAAK,IAAI9D,CAAC,GAAGR,SAAS,CAACY,eAAe,EAAEJ,CAAC,IAAIR,SAAS,CAACW,aAAa,EAAEH,CAAC,EAAE,EAAE;QACvE,MAAM+D,IAAI,GAAG7B,KAAK,CAAC8B,cAAc,CAAChE,CAAC,CAAC;QACpC,IAAI4D,WAAW,CAACK,GAAG,CAACF,IAAI,CAAC,EAAE;UACvB;QACJ;QACAD,KAAK,CAACxD,IAAI,CAACyD,IAAI,CAAC;QAChBH,WAAW,CAACM,GAAG,CAACH,IAAI,CAAC;MACzB;MACA,MAAMI,kBAAkB,GAAG,IAAI/F,SAAS,CAACoB,SAAS,CAACY,eAAe,EAAE,CAAC,EAAEZ,SAAS,CAACW,aAAa,EAAE+B,KAAK,CAACgB,gBAAgB,CAAC1D,SAAS,CAACW,aAAa,CAAC,CAAC;MAChJ,MAAMiE,sBAAsB,GAAG5E,SAAS,CAACY,eAAe,GAAGsD,YAAY;MACvE,MAAMW,cAAc,GAAG,IAAIjG,SAAS,CAACgG,sBAAsB,EAAE,CAAC,EAAEA,sBAAsB,GAAGN,KAAK,CAAC7D,MAAM,GAAG,CAAC,EAAE6D,KAAK,CAACA,KAAK,CAAC7D,MAAM,GAAG,CAAC,CAAC,CAACA,MAAM,CAAC;MAC1IuD,KAAK,CAAClD,IAAI,CAACrC,aAAa,CAACqG,OAAO,CAACH,kBAAkB,EAAEL,KAAK,CAACS,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;MACvEd,cAAc,CAACnD,IAAI,CAAC+D,cAAc,CAAC;MACnCX,YAAY,IAAKlE,SAAS,CAACW,aAAa,GAAGX,SAAS,CAACY,eAAe,GAAG,CAAC,GAAI0D,KAAK,CAAC7D,MAAM;IAC5F;IACAd,MAAM,CAACoB,YAAY,CAAC,CAAC;IACrBpB,MAAM,CAACqF,YAAY,CAAC,IAAI,CAAC/D,EAAE,EAAE+C,KAAK,EAAEG,eAAe,GAAGF,cAAc,GAAGgB,SAAS,CAAC;IACjFtF,MAAM,CAACoB,YAAY,CAAC,CAAC;EACzB;AACJ;AACA,OAAO,MAAMmE,4BAA4B,SAAShH,YAAY,CAAC;EAC3DoB,WAAWA,CAAA,EAAG;IACV,KAAK,CAAC;MACF2B,EAAE,EAAEiE,4BAA4B,CAACC,EAAE;MACnChE,KAAK,EAAElC,GAAG,CAACmC,QAAQ,CAAC,8BAA8B,EAAE,0BAA0B,CAAC;MAC/EC,KAAK,EAAE,0BAA0B;MACjCC,YAAY,EAAEzC,iBAAiB,CAAC0C,QAAQ;MACxCC,MAAM,EAAE;QACJC,MAAM,EAAE5C,iBAAiB,CAAC6C,eAAe;QACzCC,OAAO,EAAE3D,QAAQ,CAAC,IAAI,CAAC,uBAAuB,EAAE,CAAC,oBAAoB,IAAI,CAAC,uBAAuB,EAAE,CAAC,kBAAkB,CAAC;QACvH6D,MAAM,EAAE,GAAG,CAAC;MAChB;IACJ,CAAC,CAAC;EACN;EACApC,GAAGA,CAACC,SAAS,EAAEC,MAAM,EAAE8C,IAAI,EAAE;IACzB,IAAI2C,OAAO,GAAG,EAAE;IAChB,IAAI3C,IAAI,CAAC4C,MAAM,KAAK,WAAW,EAAE;MAC7B;MACA;MACA;MACAD,OAAO,GAAG,CAACzF,MAAM,CAACG,aAAa,CAAC,CAAC,IAAI,EAAE,EAAEC,GAAG,CAACuF,CAAC,IAAI,IAAI5G,QAAQ,CAAC4G,CAAC,CAACC,kBAAkB,EAAED,CAAC,CAACE,cAAc,CAAC,CAAC;IAC3G;IACA,MAAMxF,SAAS,GAAGL,MAAM,CAAC8F,YAAY,CAAC,CAAC;IACvC,IAAIzF,SAAS,KAAK,IAAI,EAAE;MACpB;IACJ;IACA,MAAM0F,MAAM,GAAGhG,SAAS,CAACwD,GAAG,CAAC9D,qBAAqB,CAAC;IACnD,MAAMsD,KAAK,GAAG/C,MAAM,CAACgD,QAAQ,CAAC,CAAC;IAC/B,MAAMgD,qBAAqB,GAAGD,MAAM,CAACE,QAAQ,CAAC,+CAA+C,EAAE;MAAEC,kBAAkB,EAAEnD,KAAK,KAAK,IAAI,IAAIA,KAAK,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,KAAK,CAACoD,aAAa,CAAC,CAAC;MAAEC,QAAQ,EAAErD,KAAK,KAAK,IAAI,IAAIA,KAAK,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,KAAK,CAACsD;IAAI,CAAC,CAAC;IAC9P,MAAMC,OAAO,GAAG,IAAI1H,6BAA6B,CAACyB,SAAS,EAAEoF,OAAO,EAAEO,qBAAqB,CAAC;IAC5FhG,MAAM,CAACoB,YAAY,CAAC,CAAC;IACrBpB,MAAM,CAACqB,eAAe,CAAC,IAAI,CAACC,EAAE,EAAE,CAACgF,OAAO,CAAC,CAAC;IAC1CtG,MAAM,CAACoB,YAAY,CAAC,CAAC;EACzB;AACJ;AACAmE,4BAA4B,CAACC,EAAE,GAAG,sCAAsC;AACxE,OAAO,MAAMe,iBAAiB,SAAShI,YAAY,CAAC;EAChDoB,WAAWA,CAAA,EAAG;IACV,KAAK,CAAC;MACF2B,EAAE,EAAE,2BAA2B;MAC/BE,KAAK,EAAElC,GAAG,CAACmC,QAAQ,CAAC,cAAc,EAAE,aAAa,CAAC;MAClDC,KAAK,EAAE,aAAa;MACpBC,YAAY,EAAEzC,iBAAiB,CAAC0C,QAAQ;MACxCC,MAAM,EAAE;QACJC,MAAM,EAAE5C,iBAAiB,CAACsH,cAAc;QACxCxE,OAAO,EAAE,IAAI,CAAC,uBAAuB,IAAI,CAAC,qBAAqB,EAAE,CAAC;QAClEE,MAAM,EAAE,GAAG,CAAC;MAChB;IACJ,CAAC,CAAC;EACN;EACApC,GAAGA,CAACC,SAAS,EAAEC,MAAM,EAAE;IACnB,IAAI,CAACA,MAAM,CAACC,QAAQ,CAAC,CAAC,EAAE;MACpB;IACJ;IACA,MAAMwG,GAAG,GAAG,IAAI,CAACC,iBAAiB,CAAC1G,MAAM,CAAC;IAC1C,MAAM+C,KAAK,GAAG/C,MAAM,CAACgD,QAAQ,CAAC,CAAC;IAC/B,IAAID,KAAK,CAACe,YAAY,CAAC,CAAC,KAAK,CAAC,IAAIf,KAAK,CAACgB,gBAAgB,CAAC,CAAC,CAAC,KAAK,CAAC,EAAE;MAC/D;MACA;IACJ;IACA,IAAIQ,YAAY,GAAG,CAAC;IACpB,MAAMF,KAAK,GAAG,EAAE;IAChB,MAAMsC,WAAW,GAAG,EAAE;IACtB,KAAK,IAAI9F,CAAC,GAAG,CAAC,EAAEoD,GAAG,GAAGwC,GAAG,CAAC3F,MAAM,EAAED,CAAC,GAAGoD,GAAG,EAAEpD,CAAC,EAAE,EAAE;MAC5C,MAAM+F,EAAE,GAAGH,GAAG,CAAC5F,CAAC,CAAC;MACjB,IAAII,eAAe,GAAG2F,EAAE,CAAC3F,eAAe;MACxC,IAAID,aAAa,GAAG4F,EAAE,CAAC5F,aAAa;MACpC,IAAI6F,WAAW,GAAG,CAAC;MACnB,IAAI1D,SAAS,GAAGJ,KAAK,CAACgB,gBAAgB,CAAC/C,aAAa,CAAC;MACrD,IAAIA,aAAa,GAAG+B,KAAK,CAACe,YAAY,CAAC,CAAC,EAAE;QACtC9C,aAAa,IAAI,CAAC;QAClBmC,SAAS,GAAG,CAAC;MACjB,CAAC,MACI,IAAIlC,eAAe,GAAG,CAAC,EAAE;QAC1BA,eAAe,IAAI,CAAC;QACpB4F,WAAW,GAAG9D,KAAK,CAACgB,gBAAgB,CAAC9C,eAAe,CAAC;MACzD;MACAoD,KAAK,CAAClD,IAAI,CAACrC,aAAa,CAACqG,OAAO,CAAC,IAAIlG,SAAS,CAACgC,eAAe,EAAE4F,WAAW,EAAE7F,aAAa,EAAEmC,SAAS,CAAC,EAAE,EAAE,CAAC,CAAC;MAC5GwD,WAAW,CAACxF,IAAI,CAAC,IAAIlC,SAAS,CAACgC,eAAe,GAAGsD,YAAY,EAAEqC,EAAE,CAACf,cAAc,EAAE5E,eAAe,GAAGsD,YAAY,EAAEqC,EAAE,CAACf,cAAc,CAAC,CAAC;MACrItB,YAAY,IAAKqC,EAAE,CAAC5F,aAAa,GAAG4F,EAAE,CAAC3F,eAAe,GAAG,CAAE;IAC/D;IACAjB,MAAM,CAACoB,YAAY,CAAC,CAAC;IACrBpB,MAAM,CAACqF,YAAY,CAAC,IAAI,CAAC/D,EAAE,EAAE+C,KAAK,EAAEsC,WAAW,CAAC;IAChD3G,MAAM,CAACoB,YAAY,CAAC,CAAC;EACzB;EACAsF,iBAAiBA,CAAC1G,MAAM,EAAE;IACtB;IACA,MAAM8G,UAAU,GAAG9G,MAAM,CAACG,aAAa,CAAC,CAAC,CAACC,GAAG,CAAEuF,CAAC,IAAK;MACjD,IAAI3E,aAAa,GAAG2E,CAAC,CAAC3E,aAAa;MACnC,IAAI2E,CAAC,CAAC1E,eAAe,GAAG0E,CAAC,CAAC3E,aAAa,IAAI2E,CAAC,CAACxC,SAAS,KAAK,CAAC,EAAE;QAC1DnC,aAAa,IAAI,CAAC;MACtB;MACA,OAAO;QACHC,eAAe,EAAE0E,CAAC,CAAC1E,eAAe;QAClC8F,oBAAoB,EAAEpB,CAAC,CAACoB,oBAAoB;QAC5C/F,aAAa,EAAEA,aAAa;QAC5B6E,cAAc,EAAEF,CAAC,CAACE;MACtB,CAAC;IACL,CAAC,CAAC;IACF;IACAiB,UAAU,CAACtG,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK;MACtB,IAAID,CAAC,CAACQ,eAAe,KAAKP,CAAC,CAACO,eAAe,EAAE;QACzC,OAAOR,CAAC,CAACO,aAAa,GAAGN,CAAC,CAACM,aAAa;MAC5C;MACA,OAAOP,CAAC,CAACQ,eAAe,GAAGP,CAAC,CAACO,eAAe;IAChD,CAAC,CAAC;IACF;IACA,MAAM+F,gBAAgB,GAAG,EAAE;IAC3B,IAAIC,iBAAiB,GAAGH,UAAU,CAAC,CAAC,CAAC;IACrC,KAAK,IAAIjG,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGiG,UAAU,CAAChG,MAAM,EAAED,CAAC,EAAE,EAAE;MACxC,IAAIoG,iBAAiB,CAACjG,aAAa,GAAG,CAAC,IAAI8F,UAAU,CAACjG,CAAC,CAAC,CAACI,eAAe,EAAE;QACtE;QACAgG,iBAAiB,CAACjG,aAAa,GAAG8F,UAAU,CAACjG,CAAC,CAAC,CAACG,aAAa;MACjE,CAAC,MACI;QACD;QACAgG,gBAAgB,CAAC7F,IAAI,CAAC8F,iBAAiB,CAAC;QACxCA,iBAAiB,GAAGH,UAAU,CAACjG,CAAC,CAAC;MACrC;IACJ;IACA;IACAmG,gBAAgB,CAAC7F,IAAI,CAAC8F,iBAAiB,CAAC;IACxC,OAAOD,gBAAgB;EAC3B;AACJ;AACA,OAAO,MAAME,iBAAiB,SAAS3I,YAAY,CAAC;EAChDoB,WAAWA,CAAA,EAAG;IACV,KAAK,CAAC;MACF2B,EAAE,EAAE,2BAA2B;MAC/BE,KAAK,EAAElC,GAAG,CAACmC,QAAQ,CAAC,cAAc,EAAE,aAAa,CAAC;MAClDC,KAAK,EAAE,aAAa;MACpBC,YAAY,EAAEzC,iBAAiB,CAAC0C,QAAQ;MACxCC,MAAM,EAAE;QACJC,MAAM,EAAE5C,iBAAiB,CAAC6C,eAAe;QACzCC,OAAO,EAAE,IAAI,CAAC,uBAAuB,EAAE,CAAC;QACxCE,MAAM,EAAE,GAAG,CAAC;MAChB;IACJ,CAAC,CAAC;EACN;EACApC,GAAGA,CAACC,SAAS,EAAEC,MAAM,EAAE;IACnB,MAAMmH,SAAS,GAAGnH,MAAM,CAACoH,aAAa,CAAC,CAAC;IACxC,IAAI,CAACD,SAAS,EAAE;MACZ;IACJ;IACAnH,MAAM,CAACoB,YAAY,CAAC,CAAC;IACrBpB,MAAM,CAACqB,eAAe,CAAC,IAAI,CAACC,EAAE,EAAEzC,cAAc,CAACwI,MAAM,CAACF,SAAS,CAACG,YAAY,EAAEtH,MAAM,CAACgD,QAAQ,CAAC,CAAC,EAAEhD,MAAM,CAACG,aAAa,CAAC,CAAC,CAAC,CAAC;IACzHH,MAAM,CAACoB,YAAY,CAAC,CAAC;EACzB;AACJ;AACA,MAAMmG,kBAAkB,SAAShJ,YAAY,CAAC;EAC1CoB,WAAWA,CAAA,EAAG;IACV,KAAK,CAAC;MACF2B,EAAE,EAAE,4BAA4B;MAChCE,KAAK,EAAElC,GAAG,CAACmC,QAAQ,CAAC,eAAe,EAAE,cAAc,CAAC;MACpDC,KAAK,EAAE,cAAc;MACrBC,YAAY,EAAEzC,iBAAiB,CAAC0C,QAAQ;MACxCC,MAAM,EAAE;QACJC,MAAM,EAAE5C,iBAAiB,CAAC6C,eAAe;QACzCC,OAAO,EAAE,IAAI,CAAC,uBAAuB,EAAE,CAAC;QACxCE,MAAM,EAAE,GAAG,CAAC;MAChB;IACJ,CAAC,CAAC;EACN;EACApC,GAAGA,CAACC,SAAS,EAAEC,MAAM,EAAE;IACnB1B,mBAAmB,CAACkJ,OAAO,CAACC,gBAAgB,CAAC1H,SAAS,EAAEC,MAAM,EAAE,IAAI,CAAC;EACzE;AACJ;AACA,OAAO,MAAM0H,sBAAsB,SAASnJ,YAAY,CAAC;EACrDoB,WAAWA,CAAA,EAAG;IACV,KAAK,CAAC;MACF2B,EAAE,EAAE,gCAAgC;MACpCE,KAAK,EAAElC,GAAG,CAACmC,QAAQ,CAAC,oBAAoB,EAAE,mBAAmB,CAAC;MAC9DC,KAAK,EAAE,mBAAmB;MAC1BC,YAAY,EAAEzC,iBAAiB,CAAC0C,QAAQ;MACxCC,MAAM,EAAE;QACJC,MAAM,EAAE5C,iBAAiB,CAAC6C,eAAe;QACzCC,OAAO,EAAE,IAAI,CAAC,uBAAuB,IAAI,CAAC,qBAAqB,CAAC,CAAC;QACjEE,MAAM,EAAE,GAAG,CAAC;MAChB;IACJ,CAAC,CAAC;EACN;EACApC,GAAGA,CAACC,SAAS,EAAEC,MAAM,EAAE;IACnB,MAAMmH,SAAS,GAAGnH,MAAM,CAACoH,aAAa,CAAC,CAAC;IACxC,IAAI,CAACD,SAAS,EAAE;MACZ;IACJ;IACAnH,MAAM,CAACoB,YAAY,CAAC,CAAC;IACrBpB,MAAM,CAACqB,eAAe,CAAC,IAAI,CAACC,EAAE,EAAEzC,cAAc,CAAC8I,gBAAgB,CAACR,SAAS,CAACG,YAAY,EAAEtH,MAAM,CAACgD,QAAQ,CAAC,CAAC,EAAEhD,MAAM,CAACG,aAAa,CAAC,CAAC,CAAC,CAAC;EACvI;AACJ;AACA,OAAO,MAAMyH,qBAAqB,SAASrJ,YAAY,CAAC;EACpDoB,WAAWA,CAAA,EAAG;IACV,KAAK,CAAC;MACF2B,EAAE,EAAE,+BAA+B;MACnCE,KAAK,EAAElC,GAAG,CAACmC,QAAQ,CAAC,mBAAmB,EAAE,mBAAmB,CAAC;MAC7DC,KAAK,EAAE,mBAAmB;MAC1BC,YAAY,EAAEzC,iBAAiB,CAAC0C,QAAQ;MACxCC,MAAM,EAAE;QACJC,MAAM,EAAE5C,iBAAiB,CAAC6C,eAAe;QACzCC,OAAO,EAAE,IAAI,CAAC,uBAAuB,CAAC,CAAC;QACvCE,MAAM,EAAE,GAAG,CAAC;MAChB;IACJ,CAAC,CAAC;EACN;EACApC,GAAGA,CAACC,SAAS,EAAEC,MAAM,EAAE;IACnB,MAAMmH,SAAS,GAAGnH,MAAM,CAACoH,aAAa,CAAC,CAAC;IACxC,IAAI,CAACD,SAAS,EAAE;MACZ;IACJ;IACAnH,MAAM,CAACoB,YAAY,CAAC,CAAC;IACrBpB,MAAM,CAACqB,eAAe,CAAC,IAAI,CAACC,EAAE,EAAEzC,cAAc,CAACgJ,eAAe,CAACV,SAAS,CAACG,YAAY,EAAEtH,MAAM,CAACgD,QAAQ,CAAC,CAAC,EAAEhD,MAAM,CAACG,aAAa,CAAC,CAAC,CAAC,CAAC;EACtI;AACJ;AACA,OAAO,MAAM2H,iCAAiC,SAASvJ,YAAY,CAAC;EAChEuB,GAAGA,CAACC,SAAS,EAAEC,MAAM,EAAE;IACnB,IAAI,CAACA,MAAM,CAACC,QAAQ,CAAC,CAAC,EAAE;MACpB;IACJ;IACA,MAAM8H,aAAa,GAAG/H,MAAM,CAAC8F,YAAY,CAAC,CAAC;IAC3C,MAAMkC,cAAc,GAAG,IAAI,CAACC,kBAAkB,CAACjI,MAAM,CAAC;IACtD;IACA,MAAMkI,eAAe,GAAG,EAAE;IAC1B,KAAK,IAAIrH,CAAC,GAAG,CAAC,EAAEsH,KAAK,GAAGH,cAAc,CAAClH,MAAM,GAAG,CAAC,EAAED,CAAC,GAAGsH,KAAK,EAAEtH,CAAC,EAAE,EAAE;MAC/D,MAAMuH,KAAK,GAAGJ,cAAc,CAACnH,CAAC,CAAC;MAC/B,MAAMwH,SAAS,GAAGL,cAAc,CAACnH,CAAC,GAAG,CAAC,CAAC;MACvC,IAAI7B,KAAK,CAACsJ,eAAe,CAACF,KAAK,EAAEC,SAAS,CAAC,KAAK,IAAI,EAAE;QAClDH,eAAe,CAAC/G,IAAI,CAACiH,KAAK,CAAC;MAC/B,CAAC,MACI;QACDJ,cAAc,CAACnH,CAAC,GAAG,CAAC,CAAC,GAAG7B,KAAK,CAACuJ,SAAS,CAACH,KAAK,EAAEC,SAAS,CAAC;MAC7D;IACJ;IACAH,eAAe,CAAC/G,IAAI,CAAC6G,cAAc,CAACA,cAAc,CAAClH,MAAM,GAAG,CAAC,CAAC,CAAC;IAC/D,MAAMwD,cAAc,GAAG,IAAI,CAACkE,kBAAkB,CAACT,aAAa,EAAEG,eAAe,CAAC;IAC9E,MAAM7D,KAAK,GAAG6D,eAAe,CAAC9H,GAAG,CAACgI,KAAK,IAAI;MACvC,OAAOtJ,aAAa,CAACqG,OAAO,CAACiD,KAAK,EAAE,EAAE,CAAC;IAC3C,CAAC,CAAC;IACFpI,MAAM,CAACoB,YAAY,CAAC,CAAC;IACrBpB,MAAM,CAACqF,YAAY,CAAC,IAAI,CAAC/D,EAAE,EAAE+C,KAAK,EAAEC,cAAc,CAAC;IACnDtE,MAAM,CAACoB,YAAY,CAAC,CAAC;EACzB;AACJ;AACA,OAAO,MAAMqH,mBAAmB,SAASX,iCAAiC,CAAC;EACvEnI,WAAWA,CAAA,EAAG;IACV,KAAK,CAAC;MACF2B,EAAE,EAAE,eAAe;MACnBE,KAAK,EAAElC,GAAG,CAACmC,QAAQ,CAAC,qBAAqB,EAAE,iBAAiB,CAAC;MAC7DC,KAAK,EAAE,iBAAiB;MACxBC,YAAY,EAAEzC,iBAAiB,CAAC0C,QAAQ;MACxCC,MAAM,EAAE;QACJC,MAAM,EAAE5C,iBAAiB,CAACsH,cAAc;QACxCxE,OAAO,EAAE,CAAC;QACV0G,GAAG,EAAE;UAAE1G,OAAO,EAAE,IAAI,CAAC,uBAAuB,CAAC,CAAC;QAAwB,CAAC;QACvEE,MAAM,EAAE,GAAG,CAAC;MAChB;IACJ,CAAC,CAAC;EACN;EACAsG,kBAAkBA,CAACT,aAAa,EAAEC,cAAc,EAAE;IAC9C,IAAIW,gBAAgB,GAAG,IAAI;IAC3B,MAAMrE,cAAc,GAAG,EAAE;IACzB,IAAIsE,YAAY,GAAG,CAAC;IACpBZ,cAAc,CAACa,OAAO,CAACT,KAAK,IAAI;MAC5B,IAAIU,SAAS;MACb,IAAIV,KAAK,CAACjF,SAAS,KAAK,CAAC,IAAIyF,YAAY,GAAG,CAAC,EAAE;QAC3C,MAAMG,YAAY,GAAGX,KAAK,CAACnH,eAAe,GAAG2H,YAAY;QACzDE,SAAS,GAAG,IAAI7J,SAAS,CAAC8J,YAAY,EAAEX,KAAK,CAACvB,WAAW,EAAEkC,YAAY,EAAEX,KAAK,CAACvB,WAAW,CAAC;MAC/F,CAAC,MACI;QACDiC,SAAS,GAAG,IAAI7J,SAAS,CAACmJ,KAAK,CAACnH,eAAe,EAAEmH,KAAK,CAACvB,WAAW,EAAEuB,KAAK,CAACnH,eAAe,EAAEmH,KAAK,CAACvB,WAAW,CAAC;MACjH;MACA+B,YAAY,IAAIR,KAAK,CAACpH,aAAa,GAAGoH,KAAK,CAACnH,eAAe;MAC3D,IAAImH,KAAK,CAACE,eAAe,CAACP,aAAa,CAAC,EAAE;QACtCY,gBAAgB,GAAGG,SAAS;MAChC,CAAC,MACI;QACDxE,cAAc,CAACnD,IAAI,CAAC2H,SAAS,CAAC;MAClC;IACJ,CAAC,CAAC;IACF,IAAIH,gBAAgB,EAAE;MAClBrE,cAAc,CAAC0E,OAAO,CAACL,gBAAgB,CAAC;IAC5C;IACA,OAAOrE,cAAc;EACzB;EACA2D,kBAAkBA,CAACjI,MAAM,EAAE;IACvB,MAAME,UAAU,GAAGF,MAAM,CAACG,aAAa,CAAC,CAAC;IACzC,IAAID,UAAU,KAAK,IAAI,EAAE;MACrB,OAAO,EAAE;IACb;IACA,IAAI8H,cAAc,GAAG9H,UAAU;IAC/B,MAAM6C,KAAK,GAAG/C,MAAM,CAACgD,QAAQ,CAAC,CAAC;IAC/B,IAAID,KAAK,KAAK,IAAI,EAAE;MAChB,OAAO,EAAE;IACb;IACAiF,cAAc,CAACxH,IAAI,CAACxB,KAAK,CAAC2B,wBAAwB,CAAC;IACnDqH,cAAc,GAAGA,cAAc,CAAC5H,GAAG,CAACC,SAAS,IAAI;MAC7C,IAAIA,SAAS,CAAC4C,OAAO,CAAC,CAAC,EAAE;QACrB,IAAI5C,SAAS,CAACwG,WAAW,KAAK,CAAC,EAAE;UAC7B,MAAMoC,cAAc,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE9I,SAAS,CAACY,eAAe,GAAG,CAAC,CAAC;UACjE,MAAMmI,gBAAgB,GAAG/I,SAAS,CAACY,eAAe,KAAK,CAAC,GAAG,CAAC,GAAG8B,KAAK,CAACsG,aAAa,CAACJ,cAAc,CAAC,GAAG,CAAC;UACtG,OAAO,IAAIjK,KAAK,CAACiK,cAAc,EAAEG,gBAAgB,EAAE/I,SAAS,CAACY,eAAe,EAAE,CAAC,CAAC;QACpF,CAAC,MACI;UACD,OAAO,IAAIjC,KAAK,CAACqB,SAAS,CAACY,eAAe,EAAE,CAAC,EAAEZ,SAAS,CAACY,eAAe,EAAEZ,SAAS,CAACwG,WAAW,CAAC;QACpG;MACJ,CAAC,MACI;QACD,OAAO,IAAI7H,KAAK,CAACqB,SAAS,CAACY,eAAe,EAAE,CAAC,EAAEZ,SAAS,CAACW,aAAa,EAAEX,SAAS,CAAC8C,SAAS,CAAC;MAChG;IACJ,CAAC,CAAC;IACF,OAAO6E,cAAc;EACzB;AACJ;AACA,OAAO,MAAMsB,oBAAoB,SAASxB,iCAAiC,CAAC;EACxEnI,WAAWA,CAAA,EAAG;IACV,KAAK,CAAC;MACF2B,EAAE,EAAE,gBAAgB;MACpBE,KAAK,EAAElC,GAAG,CAACmC,QAAQ,CAAC,sBAAsB,EAAE,kBAAkB,CAAC;MAC/DC,KAAK,EAAE,kBAAkB;MACzBC,YAAY,EAAEzC,iBAAiB,CAAC0C,QAAQ;MACxCC,MAAM,EAAE;QACJC,MAAM,EAAE5C,iBAAiB,CAACsH,cAAc;QACxCxE,OAAO,EAAE,CAAC;QACV0G,GAAG,EAAE;UAAE1G,OAAO,EAAE,GAAG,CAAC,uBAAuB,EAAE,CAAC;UAAoBuH,SAAS,EAAE,CAAC,IAAI,CAAC,uBAAuB,EAAE,CAAC;QAAsB,CAAC;QACpIrH,MAAM,EAAE,GAAG,CAAC;MAChB;IACJ,CAAC,CAAC;EACN;EACAsG,kBAAkBA,CAACT,aAAa,EAAEC,cAAc,EAAE;IAC9C,IAAIW,gBAAgB,GAAG,IAAI;IAC3B,MAAMrE,cAAc,GAAG,EAAE;IACzB,KAAK,IAAIzD,CAAC,GAAG,CAAC,EAAEoD,GAAG,GAAG+D,cAAc,CAAClH,MAAM,EAAE0I,MAAM,GAAG,CAAC,EAAE3I,CAAC,GAAGoD,GAAG,EAAEpD,CAAC,EAAE,EAAE;MACnE,MAAMuH,KAAK,GAAGJ,cAAc,CAACnH,CAAC,CAAC;MAC/B,MAAMiI,SAAS,GAAG,IAAI7J,SAAS,CAACmJ,KAAK,CAACnH,eAAe,GAAGuI,MAAM,EAAEpB,KAAK,CAACvB,WAAW,EAAEuB,KAAK,CAACnH,eAAe,GAAGuI,MAAM,EAAEpB,KAAK,CAACvB,WAAW,CAAC;MACrI,IAAIuB,KAAK,CAACE,eAAe,CAACP,aAAa,CAAC,EAAE;QACtCY,gBAAgB,GAAGG,SAAS;MAChC,CAAC,MACI;QACDxE,cAAc,CAACnD,IAAI,CAAC2H,SAAS,CAAC;MAClC;IACJ;IACA,IAAIH,gBAAgB,EAAE;MAClBrE,cAAc,CAAC0E,OAAO,CAACL,gBAAgB,CAAC;IAC5C;IACA,OAAOrE,cAAc;EACzB;EACA2D,kBAAkBA,CAACjI,MAAM,EAAE;IACvB,MAAM+C,KAAK,GAAG/C,MAAM,CAACgD,QAAQ,CAAC,CAAC;IAC/B,IAAID,KAAK,KAAK,IAAI,EAAE;MAChB,OAAO,EAAE;IACb;IACA,MAAM7C,UAAU,GAAGF,MAAM,CAACG,aAAa,CAAC,CAAC;IACzC,IAAID,UAAU,KAAK,IAAI,EAAE;MACrB,OAAO,EAAE;IACb;IACA,MAAM8H,cAAc,GAAG9H,UAAU,CAACE,GAAG,CAAEqJ,GAAG,IAAK;MAC3C,IAAIA,GAAG,CAACxG,OAAO,CAAC,CAAC,EAAE;QACf,MAAMyG,SAAS,GAAG3G,KAAK,CAACgB,gBAAgB,CAAC0F,GAAG,CAACxI,eAAe,CAAC;QAC7D,IAAIwI,GAAG,CAAC5C,WAAW,KAAK6C,SAAS,EAAE;UAC/B,OAAO,IAAI1K,KAAK,CAACyK,GAAG,CAACxI,eAAe,EAAEwI,GAAG,CAAC5C,WAAW,EAAE4C,GAAG,CAACxI,eAAe,GAAG,CAAC,EAAE,CAAC,CAAC;QACtF,CAAC,MACI;UACD,OAAO,IAAIjC,KAAK,CAACyK,GAAG,CAACxI,eAAe,EAAEwI,GAAG,CAAC5C,WAAW,EAAE4C,GAAG,CAACxI,eAAe,EAAEyI,SAAS,CAAC;QAC1F;MACJ;MACA,OAAOD,GAAG;IACd,CAAC,CAAC;IACFzB,cAAc,CAACxH,IAAI,CAACxB,KAAK,CAAC2B,wBAAwB,CAAC;IACnD,OAAOqH,cAAc;EACzB;AACJ;AACA,OAAO,MAAM2B,eAAe,SAASpL,YAAY,CAAC;EAC9CoB,WAAWA,CAAA,EAAG;IACV,KAAK,CAAC;MACF2B,EAAE,EAAE,yBAAyB;MAC7BE,KAAK,EAAElC,GAAG,CAACmC,QAAQ,CAAC,iBAAiB,EAAE,YAAY,CAAC;MACpDC,KAAK,EAAE,YAAY;MACnBC,YAAY,EAAEzC,iBAAiB,CAAC0C,QAAQ;MACxCC,MAAM,EAAE;QACJC,MAAM,EAAE5C,iBAAiB,CAAC6C,eAAe;QACzCC,OAAO,EAAE,CAAC;QACV0G,GAAG,EAAE;UAAE1G,OAAO,EAAE,GAAG,CAAC,uBAAuB,EAAE,CAAC;QAAmB,CAAC;QAClEE,MAAM,EAAE,GAAG,CAAC;MAChB;IACJ,CAAC,CAAC;EACN;EACApC,GAAGA,CAACC,SAAS,EAAEC,MAAM,EAAE;IACnB,MAAME,UAAU,GAAGF,MAAM,CAACG,aAAa,CAAC,CAAC;IACzC,IAAID,UAAU,KAAK,IAAI,EAAE;MACrB;IACJ;IACA,IAAI6H,aAAa,GAAG/H,MAAM,CAAC8F,YAAY,CAAC,CAAC;IACzC,IAAIiC,aAAa,KAAK,IAAI,EAAE;MACxB;IACJ;IACA7H,UAAU,CAACM,IAAI,CAACxB,KAAK,CAAC2B,wBAAwB,CAAC;IAC/C,MAAMiJ,iBAAiB,GAAG,EAAE;IAC5B,MAAMC,aAAa,GAAG3J,UAAU,CAAC4J,MAAM,CAAC,CAACC,aAAa,EAAEC,YAAY,KAAK;MACrE,IAAID,aAAa,CAAC9G,OAAO,CAAC,CAAC,EAAE;QACzB,IAAI8G,aAAa,CAAC/I,aAAa,KAAKgJ,YAAY,CAAC/I,eAAe,EAAE;UAC9D,IAAI8G,aAAa,CAACkC,eAAe,CAACF,aAAa,CAAC,EAAE;YAC9ChC,aAAa,GAAGiC,YAAY;UAChC;UACA,OAAOA,YAAY;QACvB;QACA,IAAIA,YAAY,CAAC/I,eAAe,GAAG8I,aAAa,CAAC/I,aAAa,GAAG,CAAC,EAAE;UAChE4I,iBAAiB,CAACzI,IAAI,CAAC4I,aAAa,CAAC;UACrC,OAAOC,YAAY;QACvB,CAAC,MACI;UACD,OAAO,IAAI/K,SAAS,CAAC8K,aAAa,CAAC9I,eAAe,EAAE8I,aAAa,CAAClD,WAAW,EAAEmD,YAAY,CAAChJ,aAAa,EAAEgJ,YAAY,CAAC7G,SAAS,CAAC;QACtI;MACJ,CAAC,MACI;QACD,IAAI6G,YAAY,CAAC/I,eAAe,GAAG8I,aAAa,CAAC/I,aAAa,EAAE;UAC5D4I,iBAAiB,CAACzI,IAAI,CAAC4I,aAAa,CAAC;UACrC,OAAOC,YAAY;QACvB,CAAC,MACI;UACD,OAAO,IAAI/K,SAAS,CAAC8K,aAAa,CAAC9I,eAAe,EAAE8I,aAAa,CAAClD,WAAW,EAAEmD,YAAY,CAAChJ,aAAa,EAAEgJ,YAAY,CAAC7G,SAAS,CAAC;QACtI;MACJ;IACJ,CAAC,CAAC;IACFyG,iBAAiB,CAACzI,IAAI,CAAC0I,aAAa,CAAC;IACrC,MAAM9G,KAAK,GAAG/C,MAAM,CAACgD,QAAQ,CAAC,CAAC;IAC/B,IAAID,KAAK,KAAK,IAAI,EAAE;MAChB;IACJ;IACA,MAAMsB,KAAK,GAAG,EAAE;IAChB,MAAMC,cAAc,GAAG,EAAE;IACzB,IAAIqE,gBAAgB,GAAGZ,aAAa;IACpC,IAAImC,UAAU,GAAG,CAAC;IAClB,KAAK,IAAIrJ,CAAC,GAAG,CAAC,EAAEoD,GAAG,GAAG2F,iBAAiB,CAAC9I,MAAM,EAAED,CAAC,GAAGoD,GAAG,EAAEpD,CAAC,EAAE,EAAE;MAC1D,MAAMR,SAAS,GAAGuJ,iBAAiB,CAAC/I,CAAC,CAAC;MACtC,MAAMI,eAAe,GAAGZ,SAAS,CAACY,eAAe;MACjD,MAAM4F,WAAW,GAAG,CAAC;MACrB,IAAIsD,iBAAiB,GAAG,CAAC;MACzB,IAAInJ,aAAa,EAAEmC,SAAS;MAC5B,MAAMiH,0BAA0B,GAAGrH,KAAK,CAACsG,aAAa,CAAChJ,SAAS,CAACW,aAAa,CAAC,GAAGX,SAAS,CAAC8C,SAAS;MACrG,IAAI9C,SAAS,CAAC4C,OAAO,CAAC,CAAC,IAAI5C,SAAS,CAACY,eAAe,KAAKZ,SAAS,CAACW,aAAa,EAAE;QAC9E,MAAMqJ,QAAQ,GAAGhK,SAAS,CAACiK,gBAAgB,CAAC,CAAC;QAC7C,IAAID,QAAQ,CAACE,UAAU,GAAGxH,KAAK,CAACe,YAAY,CAAC,CAAC,EAAE;UAC5C9C,aAAa,GAAGC,eAAe,GAAG,CAAC;UACnCkC,SAAS,GAAGJ,KAAK,CAACgB,gBAAgB,CAAC/C,aAAa,CAAC;QACrD,CAAC,MACI;UACDA,aAAa,GAAGqJ,QAAQ,CAACE,UAAU;UACnCpH,SAAS,GAAGJ,KAAK,CAACgB,gBAAgB,CAACsG,QAAQ,CAACE,UAAU,CAAC;QAC3D;MACJ,CAAC,MACI;QACDvJ,aAAa,GAAGX,SAAS,CAACW,aAAa;QACvCmC,SAAS,GAAGJ,KAAK,CAACgB,gBAAgB,CAAC/C,aAAa,CAAC;MACrD;MACA,IAAIwJ,mBAAmB,GAAGzH,KAAK,CAAC8B,cAAc,CAAC5D,eAAe,CAAC;MAC/D,KAAK,IAAIJ,CAAC,GAAGI,eAAe,GAAG,CAAC,EAAEJ,CAAC,IAAIG,aAAa,EAAEH,CAAC,EAAE,EAAE;QACvD,MAAM4J,QAAQ,GAAG1H,KAAK,CAAC8B,cAAc,CAAChE,CAAC,CAAC;QACxC,MAAM6J,qBAAqB,GAAG3H,KAAK,CAAC4H,+BAA+B,CAAC9J,CAAC,CAAC;QACtE,IAAI6J,qBAAqB,IAAI,CAAC,EAAE;UAC5B,IAAIE,WAAW,GAAG,IAAI;UACtB,IAAIJ,mBAAmB,KAAK,EAAE,EAAE;YAC5BI,WAAW,GAAG,KAAK;UACvB;UACA,IAAIA,WAAW,KAAKJ,mBAAmB,CAACK,MAAM,CAACL,mBAAmB,CAAC1J,MAAM,GAAG,CAAC,CAAC,KAAK,GAAG,IAClF0J,mBAAmB,CAACK,MAAM,CAACL,mBAAmB,CAAC1J,MAAM,GAAG,CAAC,CAAC,KAAK,IAAI,CAAC,EAAE;YACtE8J,WAAW,GAAG,KAAK;YACnBJ,mBAAmB,GAAGA,mBAAmB,CAACrF,OAAO,CAAC,mBAAmB,EAAE,GAAG,CAAC;UAC/E;UACA,MAAM2F,qBAAqB,GAAGL,QAAQ,CAACM,MAAM,CAACL,qBAAqB,GAAG,CAAC,CAAC;UACxEF,mBAAmB,IAAI,CAACI,WAAW,GAAG,GAAG,GAAG,EAAE,IAAIE,qBAAqB;UACvE,IAAIF,WAAW,EAAE;YACbT,iBAAiB,GAAGW,qBAAqB,CAAChK,MAAM,GAAG,CAAC;UACxD,CAAC,MACI;YACDqJ,iBAAiB,GAAGW,qBAAqB,CAAChK,MAAM;UACpD;QACJ,CAAC,MACI;UACDqJ,iBAAiB,GAAG,CAAC;QACzB;MACJ;MACA,MAAMa,eAAe,GAAG,IAAIhM,KAAK,CAACiC,eAAe,EAAE4F,WAAW,EAAE7F,aAAa,EAAEmC,SAAS,CAAC;MACzF,IAAI,CAAC6H,eAAe,CAAC/H,OAAO,CAAC,CAAC,EAAE;QAC5B,IAAIgI,eAAe;QACnB,IAAI5K,SAAS,CAAC4C,OAAO,CAAC,CAAC,EAAE;UACrBoB,KAAK,CAAClD,IAAI,CAACrC,aAAa,CAACqG,OAAO,CAAC6F,eAAe,EAAER,mBAAmB,CAAC,CAAC;UACvES,eAAe,GAAG,IAAIhM,SAAS,CAAC+L,eAAe,CAAC/J,eAAe,GAAGiJ,UAAU,EAAEM,mBAAmB,CAAC1J,MAAM,GAAGqJ,iBAAiB,GAAG,CAAC,EAAElJ,eAAe,GAAGiJ,UAAU,EAAEM,mBAAmB,CAAC1J,MAAM,GAAGqJ,iBAAiB,GAAG,CAAC,CAAC;QACvN,CAAC,MACI;UACD,IAAI9J,SAAS,CAACY,eAAe,KAAKZ,SAAS,CAACW,aAAa,EAAE;YACvDqD,KAAK,CAAClD,IAAI,CAACrC,aAAa,CAACqG,OAAO,CAAC6F,eAAe,EAAER,mBAAmB,CAAC,CAAC;YACvES,eAAe,GAAG,IAAIhM,SAAS,CAACoB,SAAS,CAACY,eAAe,GAAGiJ,UAAU,EAAE7J,SAAS,CAACwG,WAAW,EAAExG,SAAS,CAACW,aAAa,GAAGkJ,UAAU,EAAE7J,SAAS,CAAC8C,SAAS,CAAC;UAC7J,CAAC,MACI;YACDkB,KAAK,CAAClD,IAAI,CAACrC,aAAa,CAACqG,OAAO,CAAC6F,eAAe,EAAER,mBAAmB,CAAC,CAAC;YACvES,eAAe,GAAG,IAAIhM,SAAS,CAACoB,SAAS,CAACY,eAAe,GAAGiJ,UAAU,EAAE7J,SAAS,CAACwG,WAAW,EAAExG,SAAS,CAACY,eAAe,GAAGiJ,UAAU,EAAEM,mBAAmB,CAAC1J,MAAM,GAAGsJ,0BAA0B,CAAC;UACnM;QACJ;QACA,IAAIpL,KAAK,CAACsJ,eAAe,CAAC0C,eAAe,EAAEjD,aAAa,CAAC,KAAK,IAAI,EAAE;UAChEY,gBAAgB,GAAGsC,eAAe;QACtC,CAAC,MACI;UACD3G,cAAc,CAACnD,IAAI,CAAC8J,eAAe,CAAC;QACxC;MACJ;MACAf,UAAU,IAAIc,eAAe,CAAChK,aAAa,GAAGgK,eAAe,CAAC/J,eAAe;IACjF;IACAqD,cAAc,CAAC0E,OAAO,CAACL,gBAAgB,CAAC;IACxC3I,MAAM,CAACoB,YAAY,CAAC,CAAC;IACrBpB,MAAM,CAACqF,YAAY,CAAC,IAAI,CAAC/D,EAAE,EAAE+C,KAAK,EAAEC,cAAc,CAAC;IACnDtE,MAAM,CAACoB,YAAY,CAAC,CAAC;EACzB;AACJ;AACA,OAAO,MAAM8J,eAAe,SAAS3M,YAAY,CAAC;EAC9CoB,WAAWA,CAAA,EAAG;IACV,KAAK,CAAC;MACF2B,EAAE,EAAE,yBAAyB;MAC7BE,KAAK,EAAElC,GAAG,CAACmC,QAAQ,CAAC,kBAAkB,EAAE,wCAAwC,CAAC;MACjFC,KAAK,EAAE,wCAAwC;MAC/CC,YAAY,EAAEzC,iBAAiB,CAAC0C;IACpC,CAAC,CAAC;EACN;EACA9B,GAAGA,CAACC,SAAS,EAAEC,MAAM,EAAE;IACnB,MAAME,UAAU,GAAGF,MAAM,CAACG,aAAa,CAAC,CAAC;IACzC,IAAID,UAAU,KAAK,IAAI,EAAE;MACrB;IACJ;IACA,MAAM6C,KAAK,GAAG/C,MAAM,CAACgD,QAAQ,CAAC,CAAC;IAC/B,IAAID,KAAK,KAAK,IAAI,EAAE;MAChB;IACJ;IACA,MAAM7B,QAAQ,GAAG,EAAE;IACnB,KAAK,IAAIL,CAAC,GAAG,CAAC,EAAEoD,GAAG,GAAG/D,UAAU,CAACY,MAAM,EAAED,CAAC,GAAGoD,GAAG,EAAEpD,CAAC,EAAE,EAAE;MACnD,MAAMR,SAAS,GAAGH,UAAU,CAACW,CAAC,CAAC;MAC/B,IAAI,CAACR,SAAS,CAAC4C,OAAO,CAAC,CAAC,EAAE;QACtB;MACJ;MACA,MAAMkI,MAAM,GAAG9K,SAAS,CAACiK,gBAAgB,CAAC,CAAC;MAC3C,MAAMZ,SAAS,GAAG3G,KAAK,CAACgB,gBAAgB,CAACoH,MAAM,CAACZ,UAAU,CAAC;MAC3D,IAAIY,MAAM,CAACC,MAAM,IAAI1B,SAAS,EAAE;QAC5B,IAAIyB,MAAM,CAACZ,UAAU,KAAKxH,KAAK,CAACe,YAAY,CAAC,CAAC,EAAE;UAC5C;QACJ;QACA;QACA;QACA,MAAMkH,eAAe,GAAG,IAAIhM,KAAK,CAACmM,MAAM,CAACZ,UAAU,EAAErB,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEgC,MAAM,CAACC,MAAM,GAAG,CAAC,CAAC,EAAED,MAAM,CAACZ,UAAU,GAAG,CAAC,EAAE,CAAC,CAAC;QAC9G,MAAMc,KAAK,GAAGtI,KAAK,CAACK,eAAe,CAAC4H,eAAe,CAAC,CAACM,KAAK,CAAC,EAAE,CAAC,CAACC,OAAO,CAAC,CAAC,CAACnG,IAAI,CAAC,EAAE,CAAC;QACjFlE,QAAQ,CAACC,IAAI,CAAC,IAAI1C,cAAc,CAAC,IAAIQ,SAAS,CAACkM,MAAM,CAACZ,UAAU,EAAErB,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEgC,MAAM,CAACC,MAAM,GAAG,CAAC,CAAC,EAAED,MAAM,CAACZ,UAAU,GAAG,CAAC,EAAE,CAAC,CAAC,EAAEc,KAAK,CAAC,CAAC;MACxI,CAAC,MACI;QACD,MAAML,eAAe,GAAG,IAAIhM,KAAK,CAACmM,MAAM,CAACZ,UAAU,EAAErB,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEgC,MAAM,CAACC,MAAM,GAAG,CAAC,CAAC,EAAED,MAAM,CAACZ,UAAU,EAAEY,MAAM,CAACC,MAAM,GAAG,CAAC,CAAC;QAC1H,MAAMC,KAAK,GAAGtI,KAAK,CAACK,eAAe,CAAC4H,eAAe,CAAC,CAACM,KAAK,CAAC,EAAE,CAAC,CAACC,OAAO,CAAC,CAAC,CAACnG,IAAI,CAAC,EAAE,CAAC;QACjFlE,QAAQ,CAACC,IAAI,CAAC,IAAIzC,oCAAoC,CAACsM,eAAe,EAAEK,KAAK,EAAE,IAAIpM,SAAS,CAACkM,MAAM,CAACZ,UAAU,EAAEY,MAAM,CAACC,MAAM,GAAG,CAAC,EAAED,MAAM,CAACZ,UAAU,EAAEY,MAAM,CAACC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;MAC9K;IACJ;IACApL,MAAM,CAACoB,YAAY,CAAC,CAAC;IACrBpB,MAAM,CAACqB,eAAe,CAAC,IAAI,CAACC,EAAE,EAAEJ,QAAQ,CAAC;IACzClB,MAAM,CAACoB,YAAY,CAAC,CAAC;EACzB;AACJ;AACA,OAAO,MAAMoK,kBAAkB,SAASjN,YAAY,CAAC;EACjDuB,GAAGA,CAACC,SAAS,EAAEC,MAAM,EAAE;IACnB,MAAME,UAAU,GAAGF,MAAM,CAACG,aAAa,CAAC,CAAC;IACzC,IAAID,UAAU,KAAK,IAAI,EAAE;MACrB;IACJ;IACA,MAAM6C,KAAK,GAAG/C,MAAM,CAACgD,QAAQ,CAAC,CAAC;IAC/B,IAAID,KAAK,KAAK,IAAI,EAAE;MAChB;IACJ;IACA,MAAM0I,cAAc,GAAGzL,MAAM,CAACyD,SAAS,CAAC,GAAG,CAAC,iCAAiC,CAAC;IAC9E,MAAMiI,SAAS,GAAG,EAAE;IACpB,KAAK,MAAMrL,SAAS,IAAIH,UAAU,EAAE;MAChC,IAAIG,SAAS,CAAC4C,OAAO,CAAC,CAAC,EAAE;QACrB,MAAMkI,MAAM,GAAG9K,SAAS,CAACiK,gBAAgB,CAAC,CAAC;QAC3C,MAAMqB,IAAI,GAAG3L,MAAM,CAAC4L,2BAA2B,CAACT,MAAM,CAAC;QACvD,IAAI,CAACQ,IAAI,EAAE;UACP;QACJ;QACA,MAAME,SAAS,GAAG,IAAI7M,KAAK,CAACmM,MAAM,CAACZ,UAAU,EAAEoB,IAAI,CAAC9E,WAAW,EAAEsE,MAAM,CAACZ,UAAU,EAAEoB,IAAI,CAACxI,SAAS,CAAC;QACnG,MAAM2I,IAAI,GAAG/I,KAAK,CAACK,eAAe,CAACyI,SAAS,CAAC;QAC7CH,SAAS,CAACvK,IAAI,CAACrC,aAAa,CAACqG,OAAO,CAAC0G,SAAS,EAAE,IAAI,CAACE,WAAW,CAACD,IAAI,EAAEL,cAAc,CAAC,CAAC,CAAC;MAC5F,CAAC,MACI;QACD,MAAMK,IAAI,GAAG/I,KAAK,CAACK,eAAe,CAAC/C,SAAS,CAAC;QAC7CqL,SAAS,CAACvK,IAAI,CAACrC,aAAa,CAACqG,OAAO,CAAC9E,SAAS,EAAE,IAAI,CAAC0L,WAAW,CAACD,IAAI,EAAEL,cAAc,CAAC,CAAC,CAAC;MAC5F;IACJ;IACAzL,MAAM,CAACoB,YAAY,CAAC,CAAC;IACrBpB,MAAM,CAACqF,YAAY,CAAC,IAAI,CAAC/D,EAAE,EAAEoK,SAAS,CAAC;IACvC1L,MAAM,CAACoB,YAAY,CAAC,CAAC;EACzB;AACJ;AACA,OAAO,MAAM4K,eAAe,SAASR,kBAAkB,CAAC;EACpD7L,WAAWA,CAAA,EAAG;IACV,KAAK,CAAC;MACF2B,EAAE,EAAE,oCAAoC;MACxCE,KAAK,EAAElC,GAAG,CAACmC,QAAQ,CAAC,6BAA6B,EAAE,wBAAwB,CAAC;MAC5EC,KAAK,EAAE,wBAAwB;MAC/BC,YAAY,EAAEzC,iBAAiB,CAAC0C;IACpC,CAAC,CAAC;EACN;EACAmK,WAAWA,CAACD,IAAI,EAAEL,cAAc,EAAE;IAC9B,OAAOK,IAAI,CAACG,iBAAiB,CAAC,CAAC;EACnC;AACJ;AACA,OAAO,MAAMC,eAAe,SAASV,kBAAkB,CAAC;EACpD7L,WAAWA,CAAA,EAAG;IACV,KAAK,CAAC;MACF2B,EAAE,EAAE,oCAAoC;MACxCE,KAAK,EAAElC,GAAG,CAACmC,QAAQ,CAAC,6BAA6B,EAAE,wBAAwB,CAAC;MAC5EC,KAAK,EAAE,wBAAwB;MAC/BC,YAAY,EAAEzC,iBAAiB,CAAC0C;IACpC,CAAC,CAAC;EACN;EACAmK,WAAWA,CAACD,IAAI,EAAEL,cAAc,EAAE;IAC9B,OAAOK,IAAI,CAACK,iBAAiB,CAAC,CAAC;EACnC;AACJ;AACA,MAAMC,yBAAyB,CAAC;EAC5BzM,WAAWA,CAAC0M,QAAQ,EAAEC,MAAM,EAAE;IAC1B,IAAI,CAACD,QAAQ,GAAGA,QAAQ;IACxB,IAAI,CAACC,MAAM,GAAGA,MAAM;IACpB,IAAI,CAACC,OAAO,GAAG,IAAI;IACnB,IAAI,CAACC,UAAU,GAAG,KAAK;EAC3B;EACAjJ,GAAGA,CAAA,EAAG;IACF,IAAI,CAAC,IAAI,CAACiJ,UAAU,EAAE;MAClB,IAAI,CAACA,UAAU,GAAG,IAAI;MACtB,IAAI;QACA,IAAI,CAACD,OAAO,GAAG,IAAIE,MAAM,CAAC,IAAI,CAACJ,QAAQ,EAAE,IAAI,CAACC,MAAM,CAAC;MACzD,CAAC,CACD,OAAOI,GAAG,EAAE;QACR;MAAA;IAER;IACA,OAAO,IAAI,CAACH,OAAO;EACvB;EACAI,WAAWA,CAAA,EAAG;IACV,OAAQ,IAAI,CAACpJ,GAAG,CAAC,CAAC,KAAK,IAAI;EAC/B;AACJ;AACA,OAAO,MAAMqJ,eAAe,SAASpB,kBAAkB,CAAC;EACpD7L,WAAWA,CAAA,EAAG;IACV,KAAK,CAAC;MACF2B,EAAE,EAAE,oCAAoC;MACxCE,KAAK,EAAElC,GAAG,CAACmC,QAAQ,CAAC,6BAA6B,EAAE,yBAAyB,CAAC;MAC7EC,KAAK,EAAE,yBAAyB;MAChCC,YAAY,EAAEzC,iBAAiB,CAAC0C;IACpC,CAAC,CAAC;EACN;EACAmK,WAAWA,CAACD,IAAI,EAAEL,cAAc,EAAE;IAC9B,MAAMoB,aAAa,GAAGD,eAAe,CAACC,aAAa,CAACtJ,GAAG,CAAC,CAAC;IACzD,IAAI,CAACsJ,aAAa,EAAE;MAChB;MACA,OAAOf,IAAI;IACf;IACA,OAAOA,IAAI,CACNK,iBAAiB,CAAC,CAAC,CACnBhH,OAAO,CAAC0H,aAAa,EAAGnM,CAAC,IAAKA,CAAC,CAACuL,iBAAiB,CAAC,CAAC,CAAC;EAC7D;AACJ;AACAW,eAAe,CAACC,aAAa,GAAG,IAAIT,yBAAyB,CAAC,4CAA4C,EAAE,KAAK,CAAC;AAClH,OAAO,MAAMU,eAAe,SAAStB,kBAAkB,CAAC;EACpD7L,WAAWA,CAAA,EAAG;IACV,KAAK,CAAC;MACF2B,EAAE,EAAE,oCAAoC;MACxCE,KAAK,EAAElC,GAAG,CAACmC,QAAQ,CAAC,6BAA6B,EAAE,yBAAyB,CAAC;MAC7EC,KAAK,EAAE,yBAAyB;MAChCC,YAAY,EAAEzC,iBAAiB,CAAC0C;IACpC,CAAC,CAAC;EACN;EACAmK,WAAWA,CAACD,IAAI,EAAEL,cAAc,EAAE;IAC9B,MAAMsB,YAAY,GAAGD,eAAe,CAACC,YAAY,CAACxJ,GAAG,CAAC,CAAC;IACvD,MAAMyJ,aAAa,GAAGF,eAAe,CAACE,aAAa,CAACzJ,GAAG,CAAC,CAAC;IACzD,IAAI,CAACwJ,YAAY,IAAI,CAACC,aAAa,EAAE;MACjC;MACA,OAAOlB,IAAI;IACf;IACA,OAAQA,IAAI,CACP3G,OAAO,CAAC4H,YAAY,EAAE,OAAO,CAAC,CAC9B5H,OAAO,CAAC6H,aAAa,EAAE,SAAS,CAAC,CACjCb,iBAAiB,CAAC,CAAC;EAC5B;AACJ;AACAW,eAAe,CAACC,YAAY,GAAG,IAAIX,yBAAyB,CAAC,oBAAoB,EAAE,KAAK,CAAC;AACzFU,eAAe,CAACE,aAAa,GAAG,IAAIZ,yBAAyB,CAAC,oCAAoC,EAAE,KAAK,CAAC;AAC1G,OAAO,MAAMa,eAAe,SAASzB,kBAAkB,CAAC;EACpD7L,WAAWA,CAAA,EAAG;IACV,KAAK,CAAC;MACF2B,EAAE,EAAE,oCAAoC;MACxCE,KAAK,EAAElC,GAAG,CAACmC,QAAQ,CAAC,6BAA6B,EAAE,yBAAyB,CAAC;MAC7EC,KAAK,EAAE,yBAAyB;MAChCC,YAAY,EAAEzC,iBAAiB,CAAC0C;IACpC,CAAC,CAAC;EACN;EACAmK,WAAWA,CAACD,IAAI,EAAEL,cAAc,EAAE;IAC9B,MAAMyB,YAAY,GAAGD,eAAe,CAACC,YAAY,CAAC3J,GAAG,CAAC,CAAC;IACvD,IAAI,CAAC2J,YAAY,EAAE;MACf;MACA,OAAOpB,IAAI;IACf;IACA,MAAMqB,KAAK,GAAGrB,IAAI,CAACR,KAAK,CAAC4B,YAAY,CAAC;IACtC,MAAME,SAAS,GAAGD,KAAK,CAACE,KAAK,CAAC,CAAC;IAC/B,OAAOD,SAAS,GAAGD,KAAK,CAAC/M,GAAG,CAAEuL,IAAI,IAAKA,IAAI,CAAC2B,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAACrB,iBAAiB,CAAC,CAAC,GAAGN,IAAI,CAAC2B,SAAS,CAAC,CAAC,CAAC,CAAC,CAC/FlI,IAAI,CAAC,EAAE,CAAC;EACjB;AACJ;AACA6H,eAAe,CAACC,YAAY,GAAG,IAAId,yBAAyB,CAAC,SAAS,EAAE,IAAI,CAAC;AAC7E,OAAO,MAAMmB,gBAAgB,SAAS/B,kBAAkB,CAAC;EACrD7L,WAAWA,CAAA,EAAG;IACV,KAAK,CAAC;MACF2B,EAAE,EAAE,qCAAqC;MACzCE,KAAK,EAAElC,GAAG,CAACmC,QAAQ,CAAC,8BAA8B,EAAE,0BAA0B,CAAC;MAC/EC,KAAK,EAAE,0BAA0B;MACjCC,YAAY,EAAEzC,iBAAiB,CAAC0C;IACpC,CAAC,CAAC;EACN;EACAmK,WAAWA,CAACD,IAAI,EAAEL,cAAc,EAAE;IAC9B,MAAMyB,YAAY,GAAGK,gBAAgB,CAACL,YAAY,CAAC3J,GAAG,CAAC,CAAC;IACxD,MAAMiK,sBAAsB,GAAGD,gBAAgB,CAACC,sBAAsB,CAACjK,GAAG,CAAC,CAAC;IAC5E,IAAI,CAAC2J,YAAY,IAAI,CAACM,sBAAsB,EAAE;MAC1C;MACA,OAAO1B,IAAI;IACf;IACA,MAAM2B,2BAA2B,GAAG3B,IAAI,CAACR,KAAK,CAACkC,sBAAsB,CAAC;IACtE,MAAML,KAAK,GAAGM,2BAA2B,CAACrN,GAAG,CAAEuL,IAAI,IAAKA,IAAI,CAACL,KAAK,CAAC4B,YAAY,CAAC,CAAC,CAACQ,IAAI,CAAC,CAAC;IACxF,OAAOP,KAAK,CAAC/M,GAAG,CAAEuL,IAAI,IAAKA,IAAI,CAAC2B,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAACrB,iBAAiB,CAAC,CAAC,GAAGN,IAAI,CAAC2B,SAAS,CAAC,CAAC,CAAC,CAAC,CACnFlI,IAAI,CAAC,EAAE,CAAC;EACjB;AACJ;AACAmI,gBAAgB,CAACL,YAAY,GAAG,IAAId,yBAAyB,CAAC,SAAS,EAAE,IAAI,CAAC;AAC9EmB,gBAAgB,CAACC,sBAAsB,GAAG,IAAIpB,yBAAyB,CAAC,UAAU,EAAE,IAAI,CAAC;AACzF,OAAO,MAAMuB,eAAe,SAASnC,kBAAkB,CAAC;EACpD,OAAOmB,WAAWA,CAAA,EAAG;IACjB,MAAMiB,sBAAsB,GAAG,CAC3B,IAAI,CAACb,YAAY,EACjB,IAAI,CAACC,aAAa,EAClB,IAAI,CAACa,kBAAkB,CAC1B,CAACC,KAAK,CAAEC,MAAM,IAAKA,MAAM,CAACpB,WAAW,CAAC,CAAC,CAAC;IACzC,OAAOiB,sBAAsB;EACjC;EACAjO,WAAWA,CAAA,EAAG;IACV,KAAK,CAAC;MACF2B,EAAE,EAAE,oCAAoC;MACxCE,KAAK,EAAElC,GAAG,CAACmC,QAAQ,CAAC,6BAA6B,EAAE,yBAAyB,CAAC;MAC7EC,KAAK,EAAE,yBAAyB;MAChCC,YAAY,EAAEzC,iBAAiB,CAAC0C;IACpC,CAAC,CAAC;EACN;EACAmK,WAAWA,CAACD,IAAI,EAAEkC,CAAC,EAAE;IACjB,MAAMjB,YAAY,GAAGY,eAAe,CAACZ,YAAY,CAACxJ,GAAG,CAAC,CAAC;IACvD,MAAMyJ,aAAa,GAAGW,eAAe,CAACX,aAAa,CAACzJ,GAAG,CAAC,CAAC;IACzD,MAAMsK,kBAAkB,GAAGF,eAAe,CAACE,kBAAkB,CAACtK,GAAG,CAAC,CAAC;IACnE,IAAI,CAACwJ,YAAY,IAAI,CAACC,aAAa,IAAI,CAACa,kBAAkB,EAAE;MACxD;MACA,OAAO/B,IAAI;IACf;IACA,OAAOA,IAAI,CACN3G,OAAO,CAAC0I,kBAAkB,EAAE,OAAO,CAAC,CACpC1I,OAAO,CAAC4H,YAAY,EAAE,OAAO,CAAC,CAC9B5H,OAAO,CAAC6H,aAAa,EAAE,OAAO,CAAC,CAC/Bb,iBAAiB,CAAC,CAAC;EAC5B;AACJ;AACAwB,eAAe,CAACZ,YAAY,GAAG,IAAIX,yBAAyB,CAAC,oBAAoB,EAAE,KAAK,CAAC;AACzFuB,eAAe,CAACX,aAAa,GAAG,IAAIZ,yBAAyB,CAAC,kCAAkC,EAAE,KAAK,CAAC;AACxGuB,eAAe,CAACE,kBAAkB,GAAG,IAAIzB,yBAAyB,CAAC,eAAe,EAAE,IAAI,CAAC;AACzF5N,oBAAoB,CAAC+C,iBAAiB,CAAC;AACvC/C,oBAAoB,CAACmE,mBAAmB,CAAC;AACzCnE,oBAAoB,CAACoE,wBAAwB,CAAC;AAC9CpE,oBAAoB,CAACkF,iBAAiB,CAAC;AACvClF,oBAAoB,CAACmF,mBAAmB,CAAC;AACzCnF,oBAAoB,CAAC0F,wBAAwB,CAAC;AAC9C1F,oBAAoB,CAAC2F,yBAAyB,CAAC;AAC/C3F,oBAAoB,CAAC4F,0BAA0B,CAAC;AAChD5F,oBAAoB,CAAC+G,4BAA4B,CAAC;AAClD/G,oBAAoB,CAAC+H,iBAAiB,CAAC;AACvC/H,oBAAoB,CAAC0I,iBAAiB,CAAC;AACvC1I,oBAAoB,CAAC+I,kBAAkB,CAAC;AACxC/I,oBAAoB,CAACkJ,sBAAsB,CAAC;AAC5ClJ,oBAAoB,CAACoJ,qBAAqB,CAAC;AAC3CpJ,oBAAoB,CAACiK,mBAAmB,CAAC;AACzCjK,oBAAoB,CAAC8K,oBAAoB,CAAC;AAC1C9K,oBAAoB,CAACmL,eAAe,CAAC;AACrCnL,oBAAoB,CAAC0M,eAAe,CAAC;AACrC1M,oBAAoB,CAACwN,eAAe,CAAC;AACrCxN,oBAAoB,CAAC0N,eAAe,CAAC;AACrC,IAAIY,eAAe,CAACC,YAAY,CAACJ,WAAW,CAAC,CAAC,IAAIG,eAAe,CAACE,aAAa,CAACL,WAAW,CAAC,CAAC,EAAE;EAC3FnO,oBAAoB,CAACsO,eAAe,CAAC;AACzC;AACA,IAAIG,eAAe,CAACC,YAAY,CAACP,WAAW,CAAC,CAAC,EAAE;EAC5CnO,oBAAoB,CAACyO,eAAe,CAAC;AACzC;AACA,IAAIM,gBAAgB,CAACL,YAAY,CAACP,WAAW,CAAC,CAAC,EAAE;EAC7CnO,oBAAoB,CAAC+O,gBAAgB,CAAC;AAC1C;AACA,IAAIX,eAAe,CAACC,aAAa,CAACF,WAAW,CAAC,CAAC,EAAE;EAC7CnO,oBAAoB,CAACoO,eAAe,CAAC;AACzC;AACA,IAAIe,eAAe,CAAChB,WAAW,CAAC,CAAC,EAAE;EAC/BnO,oBAAoB,CAACmP,eAAe,CAAC;AACzC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}