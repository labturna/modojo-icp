{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { ThrottledDelayer } from '../../../common/async.js';\nimport { Event, PauseableEmitter } from '../../../common/event.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport { stringify } from '../../../common/marshalling.js';\nimport { isObject, isUndefinedOrNull } from '../../../common/types.js';\nexport var StorageHint;\n(function (StorageHint) {\n  // A hint to the storage that the storage\n  // does not exist on disk yet. This allows\n  // the storage library to improve startup\n  // time by not checking the storage for data.\n  StorageHint[StorageHint[\"STORAGE_DOES_NOT_EXIST\"] = 0] = \"STORAGE_DOES_NOT_EXIST\";\n  // A hint to the storage that the storage\n  // is backed by an in-memory storage.\n  StorageHint[StorageHint[\"STORAGE_IN_MEMORY\"] = 1] = \"STORAGE_IN_MEMORY\";\n})(StorageHint || (StorageHint = {}));\nexport var StorageState;\n(function (StorageState) {\n  StorageState[StorageState[\"None\"] = 0] = \"None\";\n  StorageState[StorageState[\"Initialized\"] = 1] = \"Initialized\";\n  StorageState[StorageState[\"Closed\"] = 2] = \"Closed\";\n})(StorageState || (StorageState = {}));\nexport class Storage extends Disposable {\n  constructor(database) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Object.create(null);\n    super();\n    this.database = database;\n    this.options = options;\n    this._onDidChangeStorage = this._register(new PauseableEmitter());\n    this.onDidChangeStorage = this._onDidChangeStorage.event;\n    this.state = StorageState.None;\n    this.cache = new Map();\n    this.flushDelayer = this._register(new ThrottledDelayer(Storage.DEFAULT_FLUSH_DELAY));\n    this.pendingDeletes = new Set();\n    this.pendingInserts = new Map();\n    this.whenFlushedCallbacks = [];\n    this.registerListeners();\n  }\n  registerListeners() {\n    this._register(this.database.onDidChangeItemsExternal(e => this.onDidChangeItemsExternal(e)));\n  }\n  onDidChangeItemsExternal(e) {\n    var _a, _b;\n    this._onDidChangeStorage.pause();\n    try {\n      // items that change external require us to update our\n      // caches with the values. we just accept the value and\n      // emit an event if there is a change.\n      (_a = e.changed) === null || _a === void 0 ? void 0 : _a.forEach((value, key) => this.acceptExternal(key, value));\n      (_b = e.deleted) === null || _b === void 0 ? void 0 : _b.forEach(key => this.acceptExternal(key, undefined));\n    } finally {\n      this._onDidChangeStorage.resume();\n    }\n  }\n  acceptExternal(key, value) {\n    if (this.state === StorageState.Closed) {\n      return; // Return early if we are already closed\n    }\n    let changed = false;\n    // Item got removed, check for deletion\n    if (isUndefinedOrNull(value)) {\n      changed = this.cache.delete(key);\n    }\n    // Item got updated, check for change\n    else {\n      const currentValue = this.cache.get(key);\n      if (currentValue !== value) {\n        this.cache.set(key, value);\n        changed = true;\n      }\n    }\n    // Signal to outside listeners\n    if (changed) {\n      this._onDidChangeStorage.fire({\n        key,\n        external: true\n      });\n    }\n  }\n  get(key, fallbackValue) {\n    const value = this.cache.get(key);\n    if (isUndefinedOrNull(value)) {\n      return fallbackValue;\n    }\n    return value;\n  }\n  getBoolean(key, fallbackValue) {\n    const value = this.get(key);\n    if (isUndefinedOrNull(value)) {\n      return fallbackValue;\n    }\n    return value === 'true';\n  }\n  getNumber(key, fallbackValue) {\n    const value = this.get(key);\n    if (isUndefinedOrNull(value)) {\n      return fallbackValue;\n    }\n    return parseInt(value, 10);\n  }\n  async set(key, value) {\n    let external = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    if (this.state === StorageState.Closed) {\n      return; // Return early if we are already closed\n    }\n    // We remove the key for undefined/null values\n    if (isUndefinedOrNull(value)) {\n      return this.delete(key, external);\n    }\n    // Otherwise, convert to String and store\n    const valueStr = isObject(value) || Array.isArray(value) ? stringify(value) : String(value);\n    // Return early if value already set\n    const currentValue = this.cache.get(key);\n    if (currentValue === valueStr) {\n      return;\n    }\n    // Update in cache and pending\n    this.cache.set(key, valueStr);\n    this.pendingInserts.set(key, valueStr);\n    this.pendingDeletes.delete(key);\n    // Event\n    this._onDidChangeStorage.fire({\n      key,\n      external\n    });\n    // Accumulate work by scheduling after timeout\n    return this.doFlush();\n  }\n  async delete(key) {\n    let external = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    if (this.state === StorageState.Closed) {\n      return; // Return early if we are already closed\n    }\n    // Remove from cache and add to pending\n    const wasDeleted = this.cache.delete(key);\n    if (!wasDeleted) {\n      return; // Return early if value already deleted\n    }\n    if (!this.pendingDeletes.has(key)) {\n      this.pendingDeletes.add(key);\n    }\n    this.pendingInserts.delete(key);\n    // Event\n    this._onDidChangeStorage.fire({\n      key,\n      external\n    });\n    // Accumulate work by scheduling after timeout\n    return this.doFlush();\n  }\n  get hasPending() {\n    return this.pendingInserts.size > 0 || this.pendingDeletes.size > 0;\n  }\n  async flushPending() {\n    if (!this.hasPending) {\n      return; // return early if nothing to do\n    }\n    // Get pending data\n    const updateRequest = {\n      insert: this.pendingInserts,\n      delete: this.pendingDeletes\n    };\n    // Reset pending data for next run\n    this.pendingDeletes = new Set();\n    this.pendingInserts = new Map();\n    // Update in storage and release any\n    // waiters we have once done\n    return this.database.updateItems(updateRequest).finally(() => {\n      var _a;\n      if (!this.hasPending) {\n        while (this.whenFlushedCallbacks.length) {\n          (_a = this.whenFlushedCallbacks.pop()) === null || _a === void 0 ? void 0 : _a();\n        }\n      }\n    });\n  }\n  async doFlush(delay) {\n    if (this.options.hint === StorageHint.STORAGE_IN_MEMORY) {\n      return this.flushPending(); // return early if in-memory\n    }\n    return this.flushDelayer.trigger(() => this.flushPending(), delay);\n  }\n}\nStorage.DEFAULT_FLUSH_DELAY = 100;\nexport class InMemoryStorageDatabase {\n  constructor() {\n    this.onDidChangeItemsExternal = Event.None;\n    this.items = new Map();\n  }\n  async updateItems(request) {\n    var _a, _b;\n    (_a = request.insert) === null || _a === void 0 ? void 0 : _a.forEach((value, key) => this.items.set(key, value));\n    (_b = request.delete) === null || _b === void 0 ? void 0 : _b.forEach(key => this.items.delete(key));\n  }\n}","map":{"version":3,"names":["ThrottledDelayer","Event","PauseableEmitter","Disposable","stringify","isObject","isUndefinedOrNull","StorageHint","StorageState","Storage","constructor","database","options","arguments","length","undefined","Object","create","_onDidChangeStorage","_register","onDidChangeStorage","event","state","None","cache","Map","flushDelayer","DEFAULT_FLUSH_DELAY","pendingDeletes","Set","pendingInserts","whenFlushedCallbacks","registerListeners","onDidChangeItemsExternal","e","_a","_b","pause","changed","forEach","value","key","acceptExternal","deleted","resume","Closed","delete","currentValue","get","set","fire","external","fallbackValue","getBoolean","getNumber","parseInt","valueStr","Array","isArray","String","doFlush","wasDeleted","has","add","hasPending","size","flushPending","updateRequest","insert","updateItems","finally","pop","delay","hint","STORAGE_IN_MEMORY","trigger","InMemoryStorageDatabase","items","request"],"sources":["/home/arslan/modojo/node_modules/monaco-editor/esm/vs/base/parts/storage/common/storage.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { ThrottledDelayer } from '../../../common/async.js';\nimport { Event, PauseableEmitter } from '../../../common/event.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport { stringify } from '../../../common/marshalling.js';\nimport { isObject, isUndefinedOrNull } from '../../../common/types.js';\nexport var StorageHint;\n(function (StorageHint) {\n    // A hint to the storage that the storage\n    // does not exist on disk yet. This allows\n    // the storage library to improve startup\n    // time by not checking the storage for data.\n    StorageHint[StorageHint[\"STORAGE_DOES_NOT_EXIST\"] = 0] = \"STORAGE_DOES_NOT_EXIST\";\n    // A hint to the storage that the storage\n    // is backed by an in-memory storage.\n    StorageHint[StorageHint[\"STORAGE_IN_MEMORY\"] = 1] = \"STORAGE_IN_MEMORY\";\n})(StorageHint || (StorageHint = {}));\nexport var StorageState;\n(function (StorageState) {\n    StorageState[StorageState[\"None\"] = 0] = \"None\";\n    StorageState[StorageState[\"Initialized\"] = 1] = \"Initialized\";\n    StorageState[StorageState[\"Closed\"] = 2] = \"Closed\";\n})(StorageState || (StorageState = {}));\nexport class Storage extends Disposable {\n    constructor(database, options = Object.create(null)) {\n        super();\n        this.database = database;\n        this.options = options;\n        this._onDidChangeStorage = this._register(new PauseableEmitter());\n        this.onDidChangeStorage = this._onDidChangeStorage.event;\n        this.state = StorageState.None;\n        this.cache = new Map();\n        this.flushDelayer = this._register(new ThrottledDelayer(Storage.DEFAULT_FLUSH_DELAY));\n        this.pendingDeletes = new Set();\n        this.pendingInserts = new Map();\n        this.whenFlushedCallbacks = [];\n        this.registerListeners();\n    }\n    registerListeners() {\n        this._register(this.database.onDidChangeItemsExternal(e => this.onDidChangeItemsExternal(e)));\n    }\n    onDidChangeItemsExternal(e) {\n        var _a, _b;\n        this._onDidChangeStorage.pause();\n        try {\n            // items that change external require us to update our\n            // caches with the values. we just accept the value and\n            // emit an event if there is a change.\n            (_a = e.changed) === null || _a === void 0 ? void 0 : _a.forEach((value, key) => this.acceptExternal(key, value));\n            (_b = e.deleted) === null || _b === void 0 ? void 0 : _b.forEach(key => this.acceptExternal(key, undefined));\n        }\n        finally {\n            this._onDidChangeStorage.resume();\n        }\n    }\n    acceptExternal(key, value) {\n        if (this.state === StorageState.Closed) {\n            return; // Return early if we are already closed\n        }\n        let changed = false;\n        // Item got removed, check for deletion\n        if (isUndefinedOrNull(value)) {\n            changed = this.cache.delete(key);\n        }\n        // Item got updated, check for change\n        else {\n            const currentValue = this.cache.get(key);\n            if (currentValue !== value) {\n                this.cache.set(key, value);\n                changed = true;\n            }\n        }\n        // Signal to outside listeners\n        if (changed) {\n            this._onDidChangeStorage.fire({ key, external: true });\n        }\n    }\n    get(key, fallbackValue) {\n        const value = this.cache.get(key);\n        if (isUndefinedOrNull(value)) {\n            return fallbackValue;\n        }\n        return value;\n    }\n    getBoolean(key, fallbackValue) {\n        const value = this.get(key);\n        if (isUndefinedOrNull(value)) {\n            return fallbackValue;\n        }\n        return value === 'true';\n    }\n    getNumber(key, fallbackValue) {\n        const value = this.get(key);\n        if (isUndefinedOrNull(value)) {\n            return fallbackValue;\n        }\n        return parseInt(value, 10);\n    }\n    async set(key, value, external = false) {\n        if (this.state === StorageState.Closed) {\n            return; // Return early if we are already closed\n        }\n        // We remove the key for undefined/null values\n        if (isUndefinedOrNull(value)) {\n            return this.delete(key, external);\n        }\n        // Otherwise, convert to String and store\n        const valueStr = isObject(value) || Array.isArray(value) ? stringify(value) : String(value);\n        // Return early if value already set\n        const currentValue = this.cache.get(key);\n        if (currentValue === valueStr) {\n            return;\n        }\n        // Update in cache and pending\n        this.cache.set(key, valueStr);\n        this.pendingInserts.set(key, valueStr);\n        this.pendingDeletes.delete(key);\n        // Event\n        this._onDidChangeStorage.fire({ key, external });\n        // Accumulate work by scheduling after timeout\n        return this.doFlush();\n    }\n    async delete(key, external = false) {\n        if (this.state === StorageState.Closed) {\n            return; // Return early if we are already closed\n        }\n        // Remove from cache and add to pending\n        const wasDeleted = this.cache.delete(key);\n        if (!wasDeleted) {\n            return; // Return early if value already deleted\n        }\n        if (!this.pendingDeletes.has(key)) {\n            this.pendingDeletes.add(key);\n        }\n        this.pendingInserts.delete(key);\n        // Event\n        this._onDidChangeStorage.fire({ key, external });\n        // Accumulate work by scheduling after timeout\n        return this.doFlush();\n    }\n    get hasPending() {\n        return this.pendingInserts.size > 0 || this.pendingDeletes.size > 0;\n    }\n    async flushPending() {\n        if (!this.hasPending) {\n            return; // return early if nothing to do\n        }\n        // Get pending data\n        const updateRequest = { insert: this.pendingInserts, delete: this.pendingDeletes };\n        // Reset pending data for next run\n        this.pendingDeletes = new Set();\n        this.pendingInserts = new Map();\n        // Update in storage and release any\n        // waiters we have once done\n        return this.database.updateItems(updateRequest).finally(() => {\n            var _a;\n            if (!this.hasPending) {\n                while (this.whenFlushedCallbacks.length) {\n                    (_a = this.whenFlushedCallbacks.pop()) === null || _a === void 0 ? void 0 : _a();\n                }\n            }\n        });\n    }\n    async doFlush(delay) {\n        if (this.options.hint === StorageHint.STORAGE_IN_MEMORY) {\n            return this.flushPending(); // return early if in-memory\n        }\n        return this.flushDelayer.trigger(() => this.flushPending(), delay);\n    }\n}\nStorage.DEFAULT_FLUSH_DELAY = 100;\nexport class InMemoryStorageDatabase {\n    constructor() {\n        this.onDidChangeItemsExternal = Event.None;\n        this.items = new Map();\n    }\n    async updateItems(request) {\n        var _a, _b;\n        (_a = request.insert) === null || _a === void 0 ? void 0 : _a.forEach((value, key) => this.items.set(key, value));\n        (_b = request.delete) === null || _b === void 0 ? void 0 : _b.forEach(key => this.items.delete(key));\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}