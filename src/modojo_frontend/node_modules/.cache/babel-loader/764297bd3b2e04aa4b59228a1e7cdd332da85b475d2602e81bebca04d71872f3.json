{"ast":null,"code":"export class Observable {\n  constructor() {\n    this.observers = [];\n  }\n  subscribe(func) {\n    this.observers.push(func);\n  }\n  unsubscribe(func) {\n    this.observers = this.observers.filter(observer => observer !== func);\n  }\n  notify(data) {\n    for (var _len = arguments.length, rest = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      rest[_key - 1] = arguments[_key];\n    }\n    this.observers.forEach(observer => observer(data, ...rest));\n  }\n}\nexport class ObservableLog extends Observable {\n  constructor() {\n    super();\n  }\n  print(message) {\n    for (var _len2 = arguments.length, rest = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      rest[_key2 - 1] = arguments[_key2];\n    }\n    this.notify({\n      message,\n      level: 'info'\n    }, ...rest);\n  }\n  warn(message) {\n    for (var _len3 = arguments.length, rest = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n      rest[_key3 - 1] = arguments[_key3];\n    }\n    this.notify({\n      message,\n      level: 'warn'\n    }, ...rest);\n  }\n  error(message, error) {\n    for (var _len4 = arguments.length, rest = new Array(_len4 > 2 ? _len4 - 2 : 0), _key4 = 2; _key4 < _len4; _key4++) {\n      rest[_key4 - 2] = arguments[_key4];\n    }\n    this.notify({\n      message,\n      level: 'error',\n      error\n    }, ...rest);\n  }\n}","map":{"version":3,"names":["Observable","constructor","observers","subscribe","func","push","unsubscribe","filter","observer","notify","data","_len","arguments","length","rest","Array","_key","forEach","ObservableLog","print","message","_len2","_key2","level","warn","_len3","_key3","error","_len4","_key4"],"sources":["/home/arslan/modojo/node_modules/@dfinity/agent/src/observable.ts"],"sourcesContent":["import { AgentError } from './errors';\n\nexport type ObserveFunction<T> = (data: T, ...rest: unknown[]) => void;\n\nexport class Observable<T> {\n  observers: ObserveFunction<T>[];\n\n  constructor() {\n    this.observers = [];\n  }\n\n  subscribe(func: ObserveFunction<T>) {\n    this.observers.push(func);\n  }\n\n  unsubscribe(func: ObserveFunction<T>) {\n    this.observers = this.observers.filter(observer => observer !== func);\n  }\n\n  notify(data: T, ...rest: unknown[]) {\n    this.observers.forEach(observer => observer(data, ...rest));\n  }\n}\n\nexport type AgentLog =\n  | {\n      message: string;\n      level: 'warn' | 'info';\n    }\n  | {\n      message: string;\n      level: 'error';\n      error: AgentError;\n    };\n\nexport class ObservableLog extends Observable<AgentLog> {\n  constructor() {\n    super();\n  }\n  print(message: string, ...rest: unknown[]) {\n    this.notify({ message, level: 'info' }, ...rest);\n  }\n  warn(message: string, ...rest: unknown[]) {\n    this.notify({ message, level: 'warn' }, ...rest);\n  }\n  error(message: string, error: AgentError, ...rest: unknown[]) {\n    this.notify({ message, level: 'error', error }, ...rest);\n  }\n}\n"],"mappings":"AAIA,OAAM,MAAOA,UAAU;EAGrBC,YAAA;IACE,IAAI,CAACC,SAAS,GAAG,EAAE;EACrB;EAEAC,SAASA,CAACC,IAAwB;IAChC,IAAI,CAACF,SAAS,CAACG,IAAI,CAACD,IAAI,CAAC;EAC3B;EAEAE,WAAWA,CAACF,IAAwB;IAClC,IAAI,CAACF,SAAS,GAAG,IAAI,CAACA,SAAS,CAACK,MAAM,CAACC,QAAQ,IAAIA,QAAQ,KAAKJ,IAAI,CAAC;EACvE;EAEAK,MAAMA,CAACC,IAAO,EAAoB;IAAA,SAAAC,IAAA,GAAAC,SAAA,CAAAC,MAAA,EAAfC,IAAe,OAAAC,KAAA,CAAAJ,IAAA,OAAAA,IAAA,WAAAK,IAAA,MAAAA,IAAA,GAAAL,IAAA,EAAAK,IAAA;MAAfF,IAAe,CAAAE,IAAA,QAAAJ,SAAA,CAAAI,IAAA;IAAA;IAChC,IAAI,CAACd,SAAS,CAACe,OAAO,CAACT,QAAQ,IAAIA,QAAQ,CAACE,IAAI,EAAE,GAAGI,IAAI,CAAC,CAAC;EAC7D;;AAcF,OAAM,MAAOI,aAAc,SAAQlB,UAAoB;EACrDC,YAAA;IACE,KAAK,EAAE;EACT;EACAkB,KAAKA,CAACC,OAAe,EAAoB;IAAA,SAAAC,KAAA,GAAAT,SAAA,CAAAC,MAAA,EAAfC,IAAe,OAAAC,KAAA,CAAAM,KAAA,OAAAA,KAAA,WAAAC,KAAA,MAAAA,KAAA,GAAAD,KAAA,EAAAC,KAAA;MAAfR,IAAe,CAAAQ,KAAA,QAAAV,SAAA,CAAAU,KAAA;IAAA;IACvC,IAAI,CAACb,MAAM,CAAC;MAAEW,OAAO;MAAEG,KAAK,EAAE;IAAM,CAAE,EAAE,GAAGT,IAAI,CAAC;EAClD;EACAU,IAAIA,CAACJ,OAAe,EAAoB;IAAA,SAAAK,KAAA,GAAAb,SAAA,CAAAC,MAAA,EAAfC,IAAe,OAAAC,KAAA,CAAAU,KAAA,OAAAA,KAAA,WAAAC,KAAA,MAAAA,KAAA,GAAAD,KAAA,EAAAC,KAAA;MAAfZ,IAAe,CAAAY,KAAA,QAAAd,SAAA,CAAAc,KAAA;IAAA;IACtC,IAAI,CAACjB,MAAM,CAAC;MAAEW,OAAO;MAAEG,KAAK,EAAE;IAAM,CAAE,EAAE,GAAGT,IAAI,CAAC;EAClD;EACAa,KAAKA,CAACP,OAAe,EAAEO,KAAiB,EAAoB;IAAA,SAAAC,KAAA,GAAAhB,SAAA,CAAAC,MAAA,EAAfC,IAAe,OAAAC,KAAA,CAAAa,KAAA,OAAAA,KAAA,WAAAC,KAAA,MAAAA,KAAA,GAAAD,KAAA,EAAAC,KAAA;MAAff,IAAe,CAAAe,KAAA,QAAAjB,SAAA,CAAAiB,KAAA;IAAA;IAC1D,IAAI,CAACpB,MAAM,CAAC;MAAEW,OAAO;MAAEG,KAAK,EAAE,OAAO;MAAEI;IAAK,CAAE,EAAE,GAAGb,IAAI,CAAC;EAC1D","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}