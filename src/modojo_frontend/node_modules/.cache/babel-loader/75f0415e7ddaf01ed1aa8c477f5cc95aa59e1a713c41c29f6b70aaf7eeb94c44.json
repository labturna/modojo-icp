{"ast":null,"code":"/**\n * Hashes a string to a number. Algorithm can be found here:\n * https://caml.inria.fr/pub/papers/garrigue-polymorphic_variants-ml98.pdf\n * @param s - string to hash\n * @returns number representing hashed string\n */\nfunction idlHash(s) {\n  const utf8encoder = new TextEncoder();\n  const array = utf8encoder.encode(s);\n  let h = 0;\n  for (const c of array) {\n    h = (h * 223 + c) % 2 ** 32;\n  }\n  return h;\n}\n/**\n *\n * @param label string\n * @returns number representing hashed label\n */\nexport function idlLabelToId(label) {\n  if (/^_\\d+_$/.test(label) || /^_0x[0-9a-fA-F]+_$/.test(label)) {\n    const num = +label.slice(1, -1);\n    if (Number.isSafeInteger(num) && num >= 0 && num < 2 ** 32) {\n      return num;\n    }\n  }\n  return idlHash(label);\n}","map":{"version":3,"names":["idlHash","s","utf8encoder","TextEncoder","array","encode","h","c","idlLabelToId","label","test","num","slice","Number","isSafeInteger"],"sources":["/home/arslan/modojo/node_modules/@dfinity/candid/src/utils/hash.ts"],"sourcesContent":["/**\n * Hashes a string to a number. Algorithm can be found here:\n * https://caml.inria.fr/pub/papers/garrigue-polymorphic_variants-ml98.pdf\n * @param s - string to hash\n * @returns number representing hashed string\n */\nfunction idlHash(s: string): number {\n  const utf8encoder = new TextEncoder();\n  const array = utf8encoder.encode(s);\n\n  let h = 0;\n  for (const c of array) {\n    h = (h * 223 + c) % 2 ** 32;\n  }\n  return h;\n}\n\n/**\n *\n * @param label string\n * @returns number representing hashed label\n */\nexport function idlLabelToId(label: string): number {\n  if (/^_\\d+_$/.test(label) || /^_0x[0-9a-fA-F]+_$/.test(label)) {\n    const num = +label.slice(1, -1);\n    if (Number.isSafeInteger(num) && num >= 0 && num < 2 ** 32) {\n      return num;\n    }\n  }\n  return idlHash(label);\n}\n"],"mappings":"AAAA;;;;;;AAMA,SAASA,OAAOA,CAACC,CAAS;EACxB,MAAMC,WAAW,GAAG,IAAIC,WAAW,EAAE;EACrC,MAAMC,KAAK,GAAGF,WAAW,CAACG,MAAM,CAACJ,CAAC,CAAC;EAEnC,IAAIK,CAAC,GAAG,CAAC;EACT,KAAK,MAAMC,CAAC,IAAIH,KAAK,EAAE;IACrBE,CAAC,GAAG,CAACA,CAAC,GAAG,GAAG,GAAGC,CAAC,IAAI,CAAC,IAAI,EAAE;;EAE7B,OAAOD,CAAC;AACV;AAEA;;;;;AAKA,OAAM,SAAUE,YAAYA,CAACC,KAAa;EACxC,IAAI,SAAS,CAACC,IAAI,CAACD,KAAK,CAAC,IAAI,oBAAoB,CAACC,IAAI,CAACD,KAAK,CAAC,EAAE;IAC7D,MAAME,GAAG,GAAG,CAACF,KAAK,CAACG,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAC/B,IAAIC,MAAM,CAACC,aAAa,CAACH,GAAG,CAAC,IAAIA,GAAG,IAAI,CAAC,IAAIA,GAAG,GAAG,CAAC,IAAI,EAAE,EAAE;MAC1D,OAAOA,GAAG;;;EAGd,OAAOX,OAAO,CAACS,KAAK,CAAC;AACvB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}