{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { DataTransfers } from '../../dnd.js';\nimport { $, addDisposableListener, animate, getContentHeight, getContentWidth, getTopLeftOffset, getWindow, isAncestor, isHTMLElement, scheduleAtNextAnimationFrame } from '../../dom.js';\nimport { DomEmitter } from '../../event.js';\nimport { EventType as TouchEventType, Gesture } from '../../touch.js';\nimport { SmoothScrollableElement } from '../scrollbar/scrollableElement.js';\nimport { distinct, equals } from '../../../common/arrays.js';\nimport { Delayer, disposableTimeout } from '../../../common/async.js';\nimport { memoize } from '../../../common/decorators.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../common/lifecycle.js';\nimport { Range } from '../../../common/range.js';\nimport { Scrollable } from '../../../common/scrollable.js';\nimport { RangeMap, shift } from './rangeMap.js';\nimport { RowCache } from './rowCache.js';\nimport { BugIndicatingError } from '../../../common/errors.js';\nimport { clamp } from '../../../common/numbers.js';\nconst StaticDND = {\n  CurrentDragAndDropData: undefined\n};\nconst DefaultOptions = {\n  useShadows: true,\n  verticalScrollMode: 1 /* ScrollbarVisibility.Auto */,\n  setRowLineHeight: true,\n  setRowHeight: true,\n  supportDynamicHeights: false,\n  dnd: {\n    getDragElements(e) {\n      return [e];\n    },\n    getDragURI() {\n      return null;\n    },\n    onDragStart() {},\n    onDragOver() {\n      return false;\n    },\n    drop() {},\n    dispose() {}\n  },\n  horizontalScrolling: false,\n  transformOptimization: true,\n  alwaysConsumeMouseWheel: true\n};\nexport class ElementsDragAndDropData {\n  constructor(elements) {\n    this.elements = elements;\n  }\n  update() {}\n  getData() {\n    return this.elements;\n  }\n}\nexport class ExternalElementsDragAndDropData {\n  constructor(elements) {\n    this.elements = elements;\n  }\n  update() {}\n  getData() {\n    return this.elements;\n  }\n}\nexport class NativeDragAndDropData {\n  constructor() {\n    this.types = [];\n    this.files = [];\n  }\n  update(dataTransfer) {\n    if (dataTransfer.types) {\n      this.types.splice(0, this.types.length, ...dataTransfer.types);\n    }\n    if (dataTransfer.files) {\n      this.files.splice(0, this.files.length);\n      for (let i = 0; i < dataTransfer.files.length; i++) {\n        const file = dataTransfer.files.item(i);\n        if (file && (file.size || file.type)) {\n          this.files.push(file);\n        }\n      }\n    }\n  }\n  getData() {\n    return {\n      types: this.types,\n      files: this.files\n    };\n  }\n}\nfunction equalsDragFeedback(f1, f2) {\n  if (Array.isArray(f1) && Array.isArray(f2)) {\n    return equals(f1, f2);\n  }\n  return f1 === f2;\n}\nclass ListViewAccessibilityProvider {\n  constructor(accessibilityProvider) {\n    if (accessibilityProvider === null || accessibilityProvider === void 0 ? void 0 : accessibilityProvider.getSetSize) {\n      this.getSetSize = accessibilityProvider.getSetSize.bind(accessibilityProvider);\n    } else {\n      this.getSetSize = (e, i, l) => l;\n    }\n    if (accessibilityProvider === null || accessibilityProvider === void 0 ? void 0 : accessibilityProvider.getPosInSet) {\n      this.getPosInSet = accessibilityProvider.getPosInSet.bind(accessibilityProvider);\n    } else {\n      this.getPosInSet = (e, i) => i + 1;\n    }\n    if (accessibilityProvider === null || accessibilityProvider === void 0 ? void 0 : accessibilityProvider.getRole) {\n      this.getRole = accessibilityProvider.getRole.bind(accessibilityProvider);\n    } else {\n      this.getRole = _ => 'listitem';\n    }\n    if (accessibilityProvider === null || accessibilityProvider === void 0 ? void 0 : accessibilityProvider.isChecked) {\n      this.isChecked = accessibilityProvider.isChecked.bind(accessibilityProvider);\n    } else {\n      this.isChecked = _ => undefined;\n    }\n  }\n}\n/**\n * The {@link ListView} is a virtual scrolling engine.\n *\n * Given that it only renders elements within its viewport, it can hold large\n * collections of elements and stay very performant. The performance bottleneck\n * usually lies within the user's rendering code for each element.\n *\n * @remarks It is a low-level widget, not meant to be used directly. Refer to the\n * List widget instead.\n */\nexport class ListView {\n  get contentHeight() {\n    return this.rangeMap.size;\n  }\n  get onDidScroll() {\n    return this.scrollableElement.onScroll;\n  }\n  get scrollableElementDomNode() {\n    return this.scrollableElement.getDomNode();\n  }\n  get horizontalScrolling() {\n    return this._horizontalScrolling;\n  }\n  set horizontalScrolling(value) {\n    if (value === this._horizontalScrolling) {\n      return;\n    }\n    if (value && this.supportDynamicHeights) {\n      throw new Error('Horizontal scrolling and dynamic heights not supported simultaneously');\n    }\n    this._horizontalScrolling = value;\n    this.domNode.classList.toggle('horizontal-scrolling', this._horizontalScrolling);\n    if (this._horizontalScrolling) {\n      for (const item of this.items) {\n        this.measureItemWidth(item);\n      }\n      this.updateScrollWidth();\n      this.scrollableElement.setScrollDimensions({\n        width: getContentWidth(this.domNode)\n      });\n      this.rowsContainer.style.width = `${Math.max(this.scrollWidth || 0, this.renderWidth)}px`;\n    } else {\n      this.scrollableElementWidthDelayer.cancel();\n      this.scrollableElement.setScrollDimensions({\n        width: this.renderWidth,\n        scrollWidth: this.renderWidth\n      });\n      this.rowsContainer.style.width = '';\n    }\n  }\n  constructor(container, virtualDelegate, renderers) {\n    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : DefaultOptions;\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o;\n    this.virtualDelegate = virtualDelegate;\n    this.domId = `list_id_${++ListView.InstanceCount}`;\n    this.renderers = new Map();\n    this.renderWidth = 0;\n    this._scrollHeight = 0;\n    this.scrollableElementUpdateDisposable = null;\n    this.scrollableElementWidthDelayer = new Delayer(50);\n    this.splicing = false;\n    this.dragOverAnimationStopDisposable = Disposable.None;\n    this.dragOverMouseY = 0;\n    this.canDrop = false;\n    this.currentDragFeedbackDisposable = Disposable.None;\n    this.onDragLeaveTimeout = Disposable.None;\n    this.disposables = new DisposableStore();\n    this._onDidChangeContentHeight = new Emitter();\n    this._onDidChangeContentWidth = new Emitter();\n    this.onDidChangeContentHeight = Event.latch(this._onDidChangeContentHeight.event, undefined, this.disposables);\n    this._horizontalScrolling = false;\n    if (options.horizontalScrolling && options.supportDynamicHeights) {\n      throw new Error('Horizontal scrolling and dynamic heights not supported simultaneously');\n    }\n    this.items = [];\n    this.itemId = 0;\n    this.rangeMap = this.createRangeMap((_a = options.paddingTop) !== null && _a !== void 0 ? _a : 0);\n    for (const renderer of renderers) {\n      this.renderers.set(renderer.templateId, renderer);\n    }\n    this.cache = this.disposables.add(new RowCache(this.renderers));\n    this.lastRenderTop = 0;\n    this.lastRenderHeight = 0;\n    this.domNode = document.createElement('div');\n    this.domNode.className = 'monaco-list';\n    this.domNode.classList.add(this.domId);\n    this.domNode.tabIndex = 0;\n    this.domNode.classList.toggle('mouse-support', typeof options.mouseSupport === 'boolean' ? options.mouseSupport : true);\n    this._horizontalScrolling = (_b = options.horizontalScrolling) !== null && _b !== void 0 ? _b : DefaultOptions.horizontalScrolling;\n    this.domNode.classList.toggle('horizontal-scrolling', this._horizontalScrolling);\n    this.paddingBottom = typeof options.paddingBottom === 'undefined' ? 0 : options.paddingBottom;\n    this.accessibilityProvider = new ListViewAccessibilityProvider(options.accessibilityProvider);\n    this.rowsContainer = document.createElement('div');\n    this.rowsContainer.className = 'monaco-list-rows';\n    const transformOptimization = (_c = options.transformOptimization) !== null && _c !== void 0 ? _c : DefaultOptions.transformOptimization;\n    if (transformOptimization) {\n      this.rowsContainer.style.transform = 'translate3d(0px, 0px, 0px)';\n      this.rowsContainer.style.overflow = 'hidden';\n      this.rowsContainer.style.contain = 'strict';\n    }\n    this.disposables.add(Gesture.addTarget(this.rowsContainer));\n    this.scrollable = this.disposables.add(new Scrollable({\n      forceIntegerValues: true,\n      smoothScrollDuration: ((_d = options.smoothScrolling) !== null && _d !== void 0 ? _d : false) ? 125 : 0,\n      scheduleAtNextAnimationFrame: cb => scheduleAtNextAnimationFrame(getWindow(this.domNode), cb)\n    }));\n    this.scrollableElement = this.disposables.add(new SmoothScrollableElement(this.rowsContainer, {\n      alwaysConsumeMouseWheel: (_e = options.alwaysConsumeMouseWheel) !== null && _e !== void 0 ? _e : DefaultOptions.alwaysConsumeMouseWheel,\n      horizontal: 1 /* ScrollbarVisibility.Auto */,\n      vertical: (_f = options.verticalScrollMode) !== null && _f !== void 0 ? _f : DefaultOptions.verticalScrollMode,\n      useShadows: (_g = options.useShadows) !== null && _g !== void 0 ? _g : DefaultOptions.useShadows,\n      mouseWheelScrollSensitivity: options.mouseWheelScrollSensitivity,\n      fastScrollSensitivity: options.fastScrollSensitivity,\n      scrollByPage: options.scrollByPage\n    }, this.scrollable));\n    this.domNode.appendChild(this.scrollableElement.getDomNode());\n    container.appendChild(this.domNode);\n    this.scrollableElement.onScroll(this.onScroll, this, this.disposables);\n    this.disposables.add(addDisposableListener(this.rowsContainer, TouchEventType.Change, e => this.onTouchChange(e)));\n    // Prevent the monaco-scrollable-element from scrolling\n    // https://github.com/microsoft/vscode/issues/44181\n    this.disposables.add(addDisposableListener(this.scrollableElement.getDomNode(), 'scroll', e => e.target.scrollTop = 0));\n    this.disposables.add(addDisposableListener(this.domNode, 'dragover', e => this.onDragOver(this.toDragEvent(e))));\n    this.disposables.add(addDisposableListener(this.domNode, 'drop', e => this.onDrop(this.toDragEvent(e))));\n    this.disposables.add(addDisposableListener(this.domNode, 'dragleave', e => this.onDragLeave(this.toDragEvent(e))));\n    this.disposables.add(addDisposableListener(this.domNode, 'dragend', e => this.onDragEnd(e)));\n    this.setRowLineHeight = (_h = options.setRowLineHeight) !== null && _h !== void 0 ? _h : DefaultOptions.setRowLineHeight;\n    this.setRowHeight = (_j = options.setRowHeight) !== null && _j !== void 0 ? _j : DefaultOptions.setRowHeight;\n    this.supportDynamicHeights = (_k = options.supportDynamicHeights) !== null && _k !== void 0 ? _k : DefaultOptions.supportDynamicHeights;\n    this.dnd = (_l = options.dnd) !== null && _l !== void 0 ? _l : this.disposables.add(DefaultOptions.dnd);\n    this.layout((_m = options.initialSize) === null || _m === void 0 ? void 0 : _m.height, (_o = options.initialSize) === null || _o === void 0 ? void 0 : _o.width);\n  }\n  updateOptions(options) {\n    if (options.paddingBottom !== undefined) {\n      this.paddingBottom = options.paddingBottom;\n      this.scrollableElement.setScrollDimensions({\n        scrollHeight: this.scrollHeight\n      });\n    }\n    if (options.smoothScrolling !== undefined) {\n      this.scrollable.setSmoothScrollDuration(options.smoothScrolling ? 125 : 0);\n    }\n    if (options.horizontalScrolling !== undefined) {\n      this.horizontalScrolling = options.horizontalScrolling;\n    }\n    let scrollableOptions;\n    if (options.scrollByPage !== undefined) {\n      scrollableOptions = {\n        ...(scrollableOptions !== null && scrollableOptions !== void 0 ? scrollableOptions : {}),\n        scrollByPage: options.scrollByPage\n      };\n    }\n    if (options.mouseWheelScrollSensitivity !== undefined) {\n      scrollableOptions = {\n        ...(scrollableOptions !== null && scrollableOptions !== void 0 ? scrollableOptions : {}),\n        mouseWheelScrollSensitivity: options.mouseWheelScrollSensitivity\n      };\n    }\n    if (options.fastScrollSensitivity !== undefined) {\n      scrollableOptions = {\n        ...(scrollableOptions !== null && scrollableOptions !== void 0 ? scrollableOptions : {}),\n        fastScrollSensitivity: options.fastScrollSensitivity\n      };\n    }\n    if (scrollableOptions) {\n      this.scrollableElement.updateOptions(scrollableOptions);\n    }\n    if (options.paddingTop !== undefined && options.paddingTop !== this.rangeMap.paddingTop) {\n      // trigger a rerender\n      const lastRenderRange = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\n      const offset = options.paddingTop - this.rangeMap.paddingTop;\n      this.rangeMap.paddingTop = options.paddingTop;\n      this.render(lastRenderRange, Math.max(0, this.lastRenderTop + offset), this.lastRenderHeight, undefined, undefined, true);\n      this.setScrollTop(this.lastRenderTop);\n      this.eventuallyUpdateScrollDimensions();\n      if (this.supportDynamicHeights) {\n        this._rerender(this.lastRenderTop, this.lastRenderHeight);\n      }\n    }\n  }\n  createRangeMap(paddingTop) {\n    return new RangeMap(paddingTop);\n  }\n  splice(start, deleteCount) {\n    let elements = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n    if (this.splicing) {\n      throw new Error('Can\\'t run recursive splices.');\n    }\n    this.splicing = true;\n    try {\n      return this._splice(start, deleteCount, elements);\n    } finally {\n      this.splicing = false;\n      this._onDidChangeContentHeight.fire(this.contentHeight);\n    }\n  }\n  _splice(start, deleteCount) {\n    let elements = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n    const previousRenderRange = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\n    const deleteRange = {\n      start,\n      end: start + deleteCount\n    };\n    const removeRange = Range.intersect(previousRenderRange, deleteRange);\n    // try to reuse rows, avoid removing them from DOM\n    const rowsToDispose = new Map();\n    for (let i = removeRange.end - 1; i >= removeRange.start; i--) {\n      const item = this.items[i];\n      item.dragStartDisposable.dispose();\n      item.checkedDisposable.dispose();\n      if (item.row) {\n        let rows = rowsToDispose.get(item.templateId);\n        if (!rows) {\n          rows = [];\n          rowsToDispose.set(item.templateId, rows);\n        }\n        const renderer = this.renderers.get(item.templateId);\n        if (renderer && renderer.disposeElement) {\n          renderer.disposeElement(item.element, i, item.row.templateData, item.size);\n        }\n        rows.unshift(item.row);\n      }\n      item.row = null;\n      item.stale = true;\n    }\n    const previousRestRange = {\n      start: start + deleteCount,\n      end: this.items.length\n    };\n    const previousRenderedRestRange = Range.intersect(previousRestRange, previousRenderRange);\n    const previousUnrenderedRestRanges = Range.relativeComplement(previousRestRange, previousRenderRange);\n    const inserted = elements.map(element => ({\n      id: String(this.itemId++),\n      element,\n      templateId: this.virtualDelegate.getTemplateId(element),\n      size: this.virtualDelegate.getHeight(element),\n      width: undefined,\n      hasDynamicHeight: !!this.virtualDelegate.hasDynamicHeight && this.virtualDelegate.hasDynamicHeight(element),\n      lastDynamicHeightWidth: undefined,\n      row: null,\n      uri: undefined,\n      dropTarget: false,\n      dragStartDisposable: Disposable.None,\n      checkedDisposable: Disposable.None,\n      stale: false\n    }));\n    let deleted;\n    // TODO@joao: improve this optimization to catch even more cases\n    if (start === 0 && deleteCount >= this.items.length) {\n      this.rangeMap = this.createRangeMap(this.rangeMap.paddingTop);\n      this.rangeMap.splice(0, 0, inserted);\n      deleted = this.items;\n      this.items = inserted;\n    } else {\n      this.rangeMap.splice(start, deleteCount, inserted);\n      deleted = this.items.splice(start, deleteCount, ...inserted);\n    }\n    const delta = elements.length - deleteCount;\n    const renderRange = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\n    const renderedRestRange = shift(previousRenderedRestRange, delta);\n    const updateRange = Range.intersect(renderRange, renderedRestRange);\n    for (let i = updateRange.start; i < updateRange.end; i++) {\n      this.updateItemInDOM(this.items[i], i);\n    }\n    const removeRanges = Range.relativeComplement(renderedRestRange, renderRange);\n    for (const range of removeRanges) {\n      for (let i = range.start; i < range.end; i++) {\n        this.removeItemFromDOM(i);\n      }\n    }\n    const unrenderedRestRanges = previousUnrenderedRestRanges.map(r => shift(r, delta));\n    const elementsRange = {\n      start,\n      end: start + elements.length\n    };\n    const insertRanges = [elementsRange, ...unrenderedRestRanges].map(r => Range.intersect(renderRange, r)).reverse();\n    for (const range of insertRanges) {\n      for (let i = range.end - 1; i >= range.start; i--) {\n        const item = this.items[i];\n        const rows = rowsToDispose.get(item.templateId);\n        const row = rows === null || rows === void 0 ? void 0 : rows.pop();\n        this.insertItemInDOM(i, row);\n      }\n    }\n    for (const rows of rowsToDispose.values()) {\n      for (const row of rows) {\n        this.cache.release(row);\n      }\n    }\n    this.eventuallyUpdateScrollDimensions();\n    if (this.supportDynamicHeights) {\n      this._rerender(this.scrollTop, this.renderHeight);\n    }\n    return deleted.map(i => i.element);\n  }\n  eventuallyUpdateScrollDimensions() {\n    this._scrollHeight = this.contentHeight;\n    this.rowsContainer.style.height = `${this._scrollHeight}px`;\n    if (!this.scrollableElementUpdateDisposable) {\n      this.scrollableElementUpdateDisposable = scheduleAtNextAnimationFrame(getWindow(this.domNode), () => {\n        this.scrollableElement.setScrollDimensions({\n          scrollHeight: this.scrollHeight\n        });\n        this.updateScrollWidth();\n        this.scrollableElementUpdateDisposable = null;\n      });\n    }\n  }\n  eventuallyUpdateScrollWidth() {\n    if (!this.horizontalScrolling) {\n      this.scrollableElementWidthDelayer.cancel();\n      return;\n    }\n    this.scrollableElementWidthDelayer.trigger(() => this.updateScrollWidth());\n  }\n  updateScrollWidth() {\n    if (!this.horizontalScrolling) {\n      return;\n    }\n    let scrollWidth = 0;\n    for (const item of this.items) {\n      if (typeof item.width !== 'undefined') {\n        scrollWidth = Math.max(scrollWidth, item.width);\n      }\n    }\n    this.scrollWidth = scrollWidth;\n    this.scrollableElement.setScrollDimensions({\n      scrollWidth: scrollWidth === 0 ? 0 : scrollWidth + 10\n    });\n    this._onDidChangeContentWidth.fire(this.scrollWidth);\n  }\n  rerender() {\n    if (!this.supportDynamicHeights) {\n      return;\n    }\n    for (const item of this.items) {\n      item.lastDynamicHeightWidth = undefined;\n    }\n    this._rerender(this.lastRenderTop, this.lastRenderHeight);\n  }\n  get length() {\n    return this.items.length;\n  }\n  get renderHeight() {\n    const scrollDimensions = this.scrollableElement.getScrollDimensions();\n    return scrollDimensions.height;\n  }\n  get firstVisibleIndex() {\n    const range = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\n    return range.start;\n  }\n  element(index) {\n    return this.items[index].element;\n  }\n  indexOf(element) {\n    return this.items.findIndex(item => item.element === element);\n  }\n  domElement(index) {\n    const row = this.items[index].row;\n    return row && row.domNode;\n  }\n  elementHeight(index) {\n    return this.items[index].size;\n  }\n  elementTop(index) {\n    return this.rangeMap.positionAt(index);\n  }\n  indexAt(position) {\n    return this.rangeMap.indexAt(position);\n  }\n  indexAfter(position) {\n    return this.rangeMap.indexAfter(position);\n  }\n  layout(height, width) {\n    const scrollDimensions = {\n      height: typeof height === 'number' ? height : getContentHeight(this.domNode)\n    };\n    if (this.scrollableElementUpdateDisposable) {\n      this.scrollableElementUpdateDisposable.dispose();\n      this.scrollableElementUpdateDisposable = null;\n      scrollDimensions.scrollHeight = this.scrollHeight;\n    }\n    this.scrollableElement.setScrollDimensions(scrollDimensions);\n    if (typeof width !== 'undefined') {\n      this.renderWidth = width;\n      if (this.supportDynamicHeights) {\n        this._rerender(this.scrollTop, this.renderHeight);\n      }\n    }\n    if (this.horizontalScrolling) {\n      this.scrollableElement.setScrollDimensions({\n        width: typeof width === 'number' ? width : getContentWidth(this.domNode)\n      });\n    }\n  }\n  // Render\n  render(previousRenderRange, renderTop, renderHeight, renderLeft, scrollWidth) {\n    let updateItemsInDOM = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : false;\n    const renderRange = this.getRenderRange(renderTop, renderHeight);\n    const rangesToInsert = Range.relativeComplement(renderRange, previousRenderRange).reverse();\n    const rangesToRemove = Range.relativeComplement(previousRenderRange, renderRange);\n    if (updateItemsInDOM) {\n      const rangesToUpdate = Range.intersect(previousRenderRange, renderRange);\n      for (let i = rangesToUpdate.start; i < rangesToUpdate.end; i++) {\n        this.updateItemInDOM(this.items[i], i);\n      }\n    }\n    this.cache.transact(() => {\n      for (const range of rangesToRemove) {\n        for (let i = range.start; i < range.end; i++) {\n          this.removeItemFromDOM(i);\n        }\n      }\n      for (const range of rangesToInsert) {\n        for (let i = range.end - 1; i >= range.start; i--) {\n          this.insertItemInDOM(i);\n        }\n      }\n    });\n    if (renderLeft !== undefined) {\n      this.rowsContainer.style.left = `-${renderLeft}px`;\n    }\n    this.rowsContainer.style.top = `-${renderTop}px`;\n    if (this.horizontalScrolling && scrollWidth !== undefined) {\n      this.rowsContainer.style.width = `${Math.max(scrollWidth, this.renderWidth)}px`;\n    }\n    this.lastRenderTop = renderTop;\n    this.lastRenderHeight = renderHeight;\n  }\n  // DOM operations\n  insertItemInDOM(index, row) {\n    var _a, _b, _c;\n    const item = this.items[index];\n    if (!item.row) {\n      if (row) {\n        item.row = row;\n        item.stale = true;\n      } else {\n        const result = this.cache.alloc(item.templateId);\n        item.row = result.row;\n        item.stale || (item.stale = result.isReusingConnectedDomNode);\n      }\n    }\n    const role = this.accessibilityProvider.getRole(item.element) || 'listitem';\n    item.row.domNode.setAttribute('role', role);\n    const checked = this.accessibilityProvider.isChecked(item.element);\n    if (typeof checked === 'boolean') {\n      item.row.domNode.setAttribute('aria-checked', String(!!checked));\n    } else if (checked) {\n      const update = checked => item.row.domNode.setAttribute('aria-checked', String(!!checked));\n      update(checked.value);\n      item.checkedDisposable = checked.onDidChange(() => update(checked.value));\n    }\n    if (item.stale || !item.row.domNode.parentElement) {\n      const referenceNode = (_c = (_b = (_a = this.items.at(index + 1)) === null || _a === void 0 ? void 0 : _a.row) === null || _b === void 0 ? void 0 : _b.domNode) !== null && _c !== void 0 ? _c : null;\n      if (item.row.domNode.parentElement !== this.rowsContainer || item.row.domNode.nextElementSibling !== referenceNode) {\n        this.rowsContainer.insertBefore(item.row.domNode, referenceNode);\n      }\n      item.stale = false;\n    }\n    this.updateItemInDOM(item, index);\n    const renderer = this.renderers.get(item.templateId);\n    if (!renderer) {\n      throw new Error(`No renderer found for template id ${item.templateId}`);\n    }\n    renderer === null || renderer === void 0 ? void 0 : renderer.renderElement(item.element, index, item.row.templateData, item.size);\n    const uri = this.dnd.getDragURI(item.element);\n    item.dragStartDisposable.dispose();\n    item.row.domNode.draggable = !!uri;\n    if (uri) {\n      item.dragStartDisposable = addDisposableListener(item.row.domNode, 'dragstart', event => this.onDragStart(item.element, uri, event));\n    }\n    if (this.horizontalScrolling) {\n      this.measureItemWidth(item);\n      this.eventuallyUpdateScrollWidth();\n    }\n  }\n  measureItemWidth(item) {\n    if (!item.row || !item.row.domNode) {\n      return;\n    }\n    item.row.domNode.style.width = 'fit-content';\n    item.width = getContentWidth(item.row.domNode);\n    const style = getWindow(item.row.domNode).getComputedStyle(item.row.domNode);\n    if (style.paddingLeft) {\n      item.width += parseFloat(style.paddingLeft);\n    }\n    if (style.paddingRight) {\n      item.width += parseFloat(style.paddingRight);\n    }\n    item.row.domNode.style.width = '';\n  }\n  updateItemInDOM(item, index) {\n    item.row.domNode.style.top = `${this.elementTop(index)}px`;\n    if (this.setRowHeight) {\n      item.row.domNode.style.height = `${item.size}px`;\n    }\n    if (this.setRowLineHeight) {\n      item.row.domNode.style.lineHeight = `${item.size}px`;\n    }\n    item.row.domNode.setAttribute('data-index', `${index}`);\n    item.row.domNode.setAttribute('data-last-element', index === this.length - 1 ? 'true' : 'false');\n    item.row.domNode.setAttribute('data-parity', index % 2 === 0 ? 'even' : 'odd');\n    item.row.domNode.setAttribute('aria-setsize', String(this.accessibilityProvider.getSetSize(item.element, index, this.length)));\n    item.row.domNode.setAttribute('aria-posinset', String(this.accessibilityProvider.getPosInSet(item.element, index)));\n    item.row.domNode.setAttribute('id', this.getElementDomId(index));\n    item.row.domNode.classList.toggle('drop-target', item.dropTarget);\n  }\n  removeItemFromDOM(index) {\n    const item = this.items[index];\n    item.dragStartDisposable.dispose();\n    item.checkedDisposable.dispose();\n    if (item.row) {\n      const renderer = this.renderers.get(item.templateId);\n      if (renderer && renderer.disposeElement) {\n        renderer.disposeElement(item.element, index, item.row.templateData, item.size);\n      }\n      this.cache.release(item.row);\n      item.row = null;\n    }\n    if (this.horizontalScrolling) {\n      this.eventuallyUpdateScrollWidth();\n    }\n  }\n  getScrollTop() {\n    const scrollPosition = this.scrollableElement.getScrollPosition();\n    return scrollPosition.scrollTop;\n  }\n  setScrollTop(scrollTop, reuseAnimation) {\n    if (this.scrollableElementUpdateDisposable) {\n      this.scrollableElementUpdateDisposable.dispose();\n      this.scrollableElementUpdateDisposable = null;\n      this.scrollableElement.setScrollDimensions({\n        scrollHeight: this.scrollHeight\n      });\n    }\n    this.scrollableElement.setScrollPosition({\n      scrollTop,\n      reuseAnimation\n    });\n  }\n  get scrollTop() {\n    return this.getScrollTop();\n  }\n  set scrollTop(scrollTop) {\n    this.setScrollTop(scrollTop);\n  }\n  get scrollHeight() {\n    return this._scrollHeight + (this.horizontalScrolling ? 10 : 0) + this.paddingBottom;\n  }\n  // Events\n  get onMouseClick() {\n    return Event.map(this.disposables.add(new DomEmitter(this.domNode, 'click')).event, e => this.toMouseEvent(e), this.disposables);\n  }\n  get onMouseDblClick() {\n    return Event.map(this.disposables.add(new DomEmitter(this.domNode, 'dblclick')).event, e => this.toMouseEvent(e), this.disposables);\n  }\n  get onMouseMiddleClick() {\n    return Event.filter(Event.map(this.disposables.add(new DomEmitter(this.domNode, 'auxclick')).event, e => this.toMouseEvent(e), this.disposables), e => e.browserEvent.button === 1, this.disposables);\n  }\n  get onMouseDown() {\n    return Event.map(this.disposables.add(new DomEmitter(this.domNode, 'mousedown')).event, e => this.toMouseEvent(e), this.disposables);\n  }\n  get onMouseOver() {\n    return Event.map(this.disposables.add(new DomEmitter(this.domNode, 'mouseover')).event, e => this.toMouseEvent(e), this.disposables);\n  }\n  get onMouseOut() {\n    return Event.map(this.disposables.add(new DomEmitter(this.domNode, 'mouseout')).event, e => this.toMouseEvent(e), this.disposables);\n  }\n  get onContextMenu() {\n    return Event.any(Event.map(this.disposables.add(new DomEmitter(this.domNode, 'contextmenu')).event, e => this.toMouseEvent(e), this.disposables), Event.map(this.disposables.add(new DomEmitter(this.domNode, TouchEventType.Contextmenu)).event, e => this.toGestureEvent(e), this.disposables));\n  }\n  get onTouchStart() {\n    return Event.map(this.disposables.add(new DomEmitter(this.domNode, 'touchstart')).event, e => this.toTouchEvent(e), this.disposables);\n  }\n  get onTap() {\n    return Event.map(this.disposables.add(new DomEmitter(this.rowsContainer, TouchEventType.Tap)).event, e => this.toGestureEvent(e), this.disposables);\n  }\n  toMouseEvent(browserEvent) {\n    const index = this.getItemIndexFromEventTarget(browserEvent.target || null);\n    const item = typeof index === 'undefined' ? undefined : this.items[index];\n    const element = item && item.element;\n    return {\n      browserEvent,\n      index,\n      element\n    };\n  }\n  toTouchEvent(browserEvent) {\n    const index = this.getItemIndexFromEventTarget(browserEvent.target || null);\n    const item = typeof index === 'undefined' ? undefined : this.items[index];\n    const element = item && item.element;\n    return {\n      browserEvent,\n      index,\n      element\n    };\n  }\n  toGestureEvent(browserEvent) {\n    const index = this.getItemIndexFromEventTarget(browserEvent.initialTarget || null);\n    const item = typeof index === 'undefined' ? undefined : this.items[index];\n    const element = item && item.element;\n    return {\n      browserEvent,\n      index,\n      element\n    };\n  }\n  toDragEvent(browserEvent) {\n    const index = this.getItemIndexFromEventTarget(browserEvent.target || null);\n    const item = typeof index === 'undefined' ? undefined : this.items[index];\n    const element = item && item.element;\n    const sector = this.getTargetSector(browserEvent, index);\n    return {\n      browserEvent,\n      index,\n      element,\n      sector\n    };\n  }\n  onScroll(e) {\n    try {\n      const previousRenderRange = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\n      this.render(previousRenderRange, e.scrollTop, e.height, e.scrollLeft, e.scrollWidth);\n      if (this.supportDynamicHeights) {\n        this._rerender(e.scrollTop, e.height, e.inSmoothScrolling);\n      }\n    } catch (err) {\n      console.error('Got bad scroll event:', e);\n      throw err;\n    }\n  }\n  onTouchChange(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    this.scrollTop -= event.translationY;\n  }\n  // DND\n  onDragStart(element, uri, event) {\n    var _a, _b;\n    if (!event.dataTransfer) {\n      return;\n    }\n    const elements = this.dnd.getDragElements(element);\n    event.dataTransfer.effectAllowed = 'copyMove';\n    event.dataTransfer.setData(DataTransfers.TEXT, uri);\n    if (event.dataTransfer.setDragImage) {\n      let label;\n      if (this.dnd.getDragLabel) {\n        label = this.dnd.getDragLabel(elements, event);\n      }\n      if (typeof label === 'undefined') {\n        label = String(elements.length);\n      }\n      const dragImage = $('.monaco-drag-image');\n      dragImage.textContent = label;\n      const getDragImageContainer = e => {\n        while (e && !e.classList.contains('monaco-workbench')) {\n          e = e.parentElement;\n        }\n        return e || this.domNode.ownerDocument;\n      };\n      const container = getDragImageContainer(this.domNode);\n      container.appendChild(dragImage);\n      event.dataTransfer.setDragImage(dragImage, -10, -10);\n      setTimeout(() => container.removeChild(dragImage), 0);\n    }\n    this.domNode.classList.add('dragging');\n    this.currentDragData = new ElementsDragAndDropData(elements);\n    StaticDND.CurrentDragAndDropData = new ExternalElementsDragAndDropData(elements);\n    (_b = (_a = this.dnd).onDragStart) === null || _b === void 0 ? void 0 : _b.call(_a, this.currentDragData, event);\n  }\n  onDragOver(event) {\n    var _a, _b;\n    event.browserEvent.preventDefault(); // needed so that the drop event fires (https://stackoverflow.com/questions/21339924/drop-event-not-firing-in-chrome)\n    this.onDragLeaveTimeout.dispose();\n    if (StaticDND.CurrentDragAndDropData && StaticDND.CurrentDragAndDropData.getData() === 'vscode-ui') {\n      return false;\n    }\n    this.setupDragAndDropScrollTopAnimation(event.browserEvent);\n    if (!event.browserEvent.dataTransfer) {\n      return false;\n    }\n    // Drag over from outside\n    if (!this.currentDragData) {\n      if (StaticDND.CurrentDragAndDropData) {\n        // Drag over from another list\n        this.currentDragData = StaticDND.CurrentDragAndDropData;\n      } else {\n        // Drag over from the desktop\n        if (!event.browserEvent.dataTransfer.types) {\n          return false;\n        }\n        this.currentDragData = new NativeDragAndDropData();\n      }\n    }\n    const result = this.dnd.onDragOver(this.currentDragData, event.element, event.index, event.sector, event.browserEvent);\n    this.canDrop = typeof result === 'boolean' ? result : result.accept;\n    if (!this.canDrop) {\n      this.currentDragFeedback = undefined;\n      this.currentDragFeedbackDisposable.dispose();\n      return false;\n    }\n    event.browserEvent.dataTransfer.dropEffect = typeof result !== 'boolean' && ((_a = result.effect) === null || _a === void 0 ? void 0 : _a.type) === 0 /* ListDragOverEffectType.Copy */ ? 'copy' : 'move';\n    let feedback;\n    if (typeof result !== 'boolean' && result.feedback) {\n      feedback = result.feedback;\n    } else {\n      if (typeof event.index === 'undefined') {\n        feedback = [-1];\n      } else {\n        feedback = [event.index];\n      }\n    }\n    // sanitize feedback list\n    feedback = distinct(feedback).filter(i => i >= -1 && i < this.length).sort((a, b) => a - b);\n    feedback = feedback[0] === -1 ? [-1] : feedback;\n    let dragOverEffectPosition = typeof result !== 'boolean' && result.effect && result.effect.position ? result.effect.position : \"drop-target\" /* ListDragOverEffectPosition.Over */;\n    if (equalsDragFeedback(this.currentDragFeedback, feedback) && this.currentDragFeedbackPosition === dragOverEffectPosition) {\n      return true;\n    }\n    this.currentDragFeedback = feedback;\n    this.currentDragFeedbackPosition = dragOverEffectPosition;\n    this.currentDragFeedbackDisposable.dispose();\n    if (feedback[0] === -1) {\n      // entire list feedback\n      this.domNode.classList.add(dragOverEffectPosition);\n      this.rowsContainer.classList.add(dragOverEffectPosition);\n      this.currentDragFeedbackDisposable = toDisposable(() => {\n        this.domNode.classList.remove(dragOverEffectPosition);\n        this.rowsContainer.classList.remove(dragOverEffectPosition);\n      });\n    } else {\n      if (feedback.length > 1 && dragOverEffectPosition !== \"drop-target\" /* ListDragOverEffectPosition.Over */) {\n        throw new Error('Can\\'t use multiple feedbacks with position different than \\'over\\'');\n      }\n      // Make sure there is no flicker when moving between two items\n      // Always use the before feedback if possible\n      if (dragOverEffectPosition === \"drop-target-after\" /* ListDragOverEffectPosition.After */) {\n        if (feedback[0] < this.length - 1) {\n          feedback[0] += 1;\n          dragOverEffectPosition = \"drop-target-before\" /* ListDragOverEffectPosition.Before */;\n        }\n      }\n      for (const index of feedback) {\n        const item = this.items[index];\n        item.dropTarget = true;\n        (_b = item.row) === null || _b === void 0 ? void 0 : _b.domNode.classList.add(dragOverEffectPosition);\n      }\n      this.currentDragFeedbackDisposable = toDisposable(() => {\n        var _a;\n        for (const index of feedback) {\n          const item = this.items[index];\n          item.dropTarget = false;\n          (_a = item.row) === null || _a === void 0 ? void 0 : _a.domNode.classList.remove(dragOverEffectPosition);\n        }\n      });\n    }\n    return true;\n  }\n  onDragLeave(event) {\n    var _a, _b;\n    this.onDragLeaveTimeout.dispose();\n    this.onDragLeaveTimeout = disposableTimeout(() => this.clearDragOverFeedback(), 100, this.disposables);\n    if (this.currentDragData) {\n      (_b = (_a = this.dnd).onDragLeave) === null || _b === void 0 ? void 0 : _b.call(_a, this.currentDragData, event.element, event.index, event.browserEvent);\n    }\n  }\n  onDrop(event) {\n    if (!this.canDrop) {\n      return;\n    }\n    const dragData = this.currentDragData;\n    this.teardownDragAndDropScrollTopAnimation();\n    this.clearDragOverFeedback();\n    this.domNode.classList.remove('dragging');\n    this.currentDragData = undefined;\n    StaticDND.CurrentDragAndDropData = undefined;\n    if (!dragData || !event.browserEvent.dataTransfer) {\n      return;\n    }\n    event.browserEvent.preventDefault();\n    dragData.update(event.browserEvent.dataTransfer);\n    this.dnd.drop(dragData, event.element, event.index, event.sector, event.browserEvent);\n  }\n  onDragEnd(event) {\n    var _a, _b;\n    this.canDrop = false;\n    this.teardownDragAndDropScrollTopAnimation();\n    this.clearDragOverFeedback();\n    this.domNode.classList.remove('dragging');\n    this.currentDragData = undefined;\n    StaticDND.CurrentDragAndDropData = undefined;\n    (_b = (_a = this.dnd).onDragEnd) === null || _b === void 0 ? void 0 : _b.call(_a, event);\n  }\n  clearDragOverFeedback() {\n    this.currentDragFeedback = undefined;\n    this.currentDragFeedbackPosition = undefined;\n    this.currentDragFeedbackDisposable.dispose();\n    this.currentDragFeedbackDisposable = Disposable.None;\n  }\n  // DND scroll top animation\n  setupDragAndDropScrollTopAnimation(event) {\n    if (!this.dragOverAnimationDisposable) {\n      const viewTop = getTopLeftOffset(this.domNode).top;\n      this.dragOverAnimationDisposable = animate(getWindow(this.domNode), this.animateDragAndDropScrollTop.bind(this, viewTop));\n    }\n    this.dragOverAnimationStopDisposable.dispose();\n    this.dragOverAnimationStopDisposable = disposableTimeout(() => {\n      if (this.dragOverAnimationDisposable) {\n        this.dragOverAnimationDisposable.dispose();\n        this.dragOverAnimationDisposable = undefined;\n      }\n    }, 1000, this.disposables);\n    this.dragOverMouseY = event.pageY;\n  }\n  animateDragAndDropScrollTop(viewTop) {\n    if (this.dragOverMouseY === undefined) {\n      return;\n    }\n    const diff = this.dragOverMouseY - viewTop;\n    const upperLimit = this.renderHeight - 35;\n    if (diff < 35) {\n      this.scrollTop += Math.max(-14, Math.floor(0.3 * (diff - 35)));\n    } else if (diff > upperLimit) {\n      this.scrollTop += Math.min(14, Math.floor(0.3 * (diff - upperLimit)));\n    }\n  }\n  teardownDragAndDropScrollTopAnimation() {\n    this.dragOverAnimationStopDisposable.dispose();\n    if (this.dragOverAnimationDisposable) {\n      this.dragOverAnimationDisposable.dispose();\n      this.dragOverAnimationDisposable = undefined;\n    }\n  }\n  // Util\n  getTargetSector(browserEvent, targetIndex) {\n    if (targetIndex === undefined) {\n      return undefined;\n    }\n    const relativePosition = browserEvent.offsetY / this.items[targetIndex].size;\n    const sector = Math.floor(relativePosition / 0.25);\n    return clamp(sector, 0, 3);\n  }\n  getItemIndexFromEventTarget(target) {\n    const scrollableElement = this.scrollableElement.getDomNode();\n    let element = target;\n    while (isHTMLElement(element) && element !== this.rowsContainer && scrollableElement.contains(element)) {\n      const rawIndex = element.getAttribute('data-index');\n      if (rawIndex) {\n        const index = Number(rawIndex);\n        if (!isNaN(index)) {\n          return index;\n        }\n      }\n      element = element.parentElement;\n    }\n    return undefined;\n  }\n  getRenderRange(renderTop, renderHeight) {\n    return {\n      start: this.rangeMap.indexAt(renderTop),\n      end: this.rangeMap.indexAfter(renderTop + renderHeight - 1)\n    };\n  }\n  /**\n   * Given a stable rendered state, checks every rendered element whether it needs\n   * to be probed for dynamic height. Adjusts scroll height and top if necessary.\n   */\n  _rerender(renderTop, renderHeight, inSmoothScrolling) {\n    const previousRenderRange = this.getRenderRange(renderTop, renderHeight);\n    // Let's remember the second element's position, this helps in scrolling up\n    // and preserving a linear upwards scroll movement\n    let anchorElementIndex;\n    let anchorElementTopDelta;\n    if (renderTop === this.elementTop(previousRenderRange.start)) {\n      anchorElementIndex = previousRenderRange.start;\n      anchorElementTopDelta = 0;\n    } else if (previousRenderRange.end - previousRenderRange.start > 1) {\n      anchorElementIndex = previousRenderRange.start + 1;\n      anchorElementTopDelta = this.elementTop(anchorElementIndex) - renderTop;\n    }\n    let heightDiff = 0;\n    while (true) {\n      const renderRange = this.getRenderRange(renderTop, renderHeight);\n      let didChange = false;\n      for (let i = renderRange.start; i < renderRange.end; i++) {\n        const diff = this.probeDynamicHeight(i);\n        if (diff !== 0) {\n          this.rangeMap.splice(i, 1, [this.items[i]]);\n        }\n        heightDiff += diff;\n        didChange = didChange || diff !== 0;\n      }\n      if (!didChange) {\n        if (heightDiff !== 0) {\n          this.eventuallyUpdateScrollDimensions();\n        }\n        const unrenderRanges = Range.relativeComplement(previousRenderRange, renderRange);\n        for (const range of unrenderRanges) {\n          for (let i = range.start; i < range.end; i++) {\n            if (this.items[i].row) {\n              this.removeItemFromDOM(i);\n            }\n          }\n        }\n        const renderRanges = Range.relativeComplement(renderRange, previousRenderRange).reverse();\n        for (const range of renderRanges) {\n          for (let i = range.end - 1; i >= range.start; i--) {\n            this.insertItemInDOM(i);\n          }\n        }\n        for (let i = renderRange.start; i < renderRange.end; i++) {\n          if (this.items[i].row) {\n            this.updateItemInDOM(this.items[i], i);\n          }\n        }\n        if (typeof anchorElementIndex === 'number') {\n          // To compute a destination scroll top, we need to take into account the current smooth scrolling\n          // animation, and then reuse it with a new target (to avoid prolonging the scroll)\n          // See https://github.com/microsoft/vscode/issues/104144\n          // See https://github.com/microsoft/vscode/pull/104284\n          // See https://github.com/microsoft/vscode/issues/107704\n          const deltaScrollTop = this.scrollable.getFutureScrollPosition().scrollTop - renderTop;\n          const newScrollTop = this.elementTop(anchorElementIndex) - anchorElementTopDelta + deltaScrollTop;\n          this.setScrollTop(newScrollTop, inSmoothScrolling);\n        }\n        this._onDidChangeContentHeight.fire(this.contentHeight);\n        return;\n      }\n    }\n  }\n  probeDynamicHeight(index) {\n    var _a, _b, _c;\n    const item = this.items[index];\n    if (!!this.virtualDelegate.getDynamicHeight) {\n      const newSize = this.virtualDelegate.getDynamicHeight(item.element);\n      if (newSize !== null) {\n        const size = item.size;\n        item.size = newSize;\n        item.lastDynamicHeightWidth = this.renderWidth;\n        return newSize - size;\n      }\n    }\n    if (!item.hasDynamicHeight || item.lastDynamicHeightWidth === this.renderWidth) {\n      return 0;\n    }\n    if (!!this.virtualDelegate.hasDynamicHeight && !this.virtualDelegate.hasDynamicHeight(item.element)) {\n      return 0;\n    }\n    const size = item.size;\n    if (item.row) {\n      item.row.domNode.style.height = '';\n      item.size = item.row.domNode.offsetHeight;\n      if (item.size === 0 && !isAncestor(item.row.domNode, getWindow(item.row.domNode).document.body)) {\n        console.warn('Measuring item node that is not in DOM! Add ListView to the DOM before measuring row height!');\n      }\n      item.lastDynamicHeightWidth = this.renderWidth;\n      return item.size - size;\n    }\n    const {\n      row\n    } = this.cache.alloc(item.templateId);\n    row.domNode.style.height = '';\n    this.rowsContainer.appendChild(row.domNode);\n    const renderer = this.renderers.get(item.templateId);\n    if (!renderer) {\n      throw new BugIndicatingError('Missing renderer for templateId: ' + item.templateId);\n    }\n    renderer.renderElement(item.element, index, row.templateData, undefined);\n    item.size = row.domNode.offsetHeight;\n    (_a = renderer.disposeElement) === null || _a === void 0 ? void 0 : _a.call(renderer, item.element, index, row.templateData, undefined);\n    (_c = (_b = this.virtualDelegate).setDynamicHeight) === null || _c === void 0 ? void 0 : _c.call(_b, item.element, item.size);\n    item.lastDynamicHeightWidth = this.renderWidth;\n    this.rowsContainer.removeChild(row.domNode);\n    this.cache.release(row);\n    return item.size - size;\n  }\n  getElementDomId(index) {\n    return `${this.domId}_${index}`;\n  }\n  // Dispose\n  dispose() {\n    var _a, _b;\n    for (const item of this.items) {\n      item.dragStartDisposable.dispose();\n      item.checkedDisposable.dispose();\n      if (item.row) {\n        const renderer = this.renderers.get(item.row.templateId);\n        if (renderer) {\n          (_a = renderer.disposeElement) === null || _a === void 0 ? void 0 : _a.call(renderer, item.element, -1, item.row.templateData, undefined);\n          renderer.disposeTemplate(item.row.templateData);\n        }\n      }\n    }\n    this.items = [];\n    if (this.domNode && this.domNode.parentNode) {\n      this.domNode.parentNode.removeChild(this.domNode);\n    }\n    (_b = this.dragOverAnimationDisposable) === null || _b === void 0 ? void 0 : _b.dispose();\n    this.disposables.dispose();\n  }\n}\nListView.InstanceCount = 0;\n__decorate([memoize], ListView.prototype, \"onMouseClick\", null);\n__decorate([memoize], ListView.prototype, \"onMouseDblClick\", null);\n__decorate([memoize], ListView.prototype, \"onMouseMiddleClick\", null);\n__decorate([memoize], ListView.prototype, \"onMouseDown\", null);\n__decorate([memoize], ListView.prototype, \"onMouseOver\", null);\n__decorate([memoize], ListView.prototype, \"onMouseOut\", null);\n__decorate([memoize], ListView.prototype, \"onContextMenu\", null);\n__decorate([memoize], ListView.prototype, \"onTouchStart\", null);\n__decorate([memoize], ListView.prototype, \"onTap\", null);","map":{"version":3,"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","DataTransfers","$","addDisposableListener","animate","getContentHeight","getContentWidth","getTopLeftOffset","getWindow","isAncestor","isHTMLElement","scheduleAtNextAnimationFrame","DomEmitter","EventType","TouchEventType","Gesture","SmoothScrollableElement","distinct","equals","Delayer","disposableTimeout","memoize","Emitter","Event","Disposable","DisposableStore","toDisposable","Range","Scrollable","RangeMap","shift","RowCache","BugIndicatingError","clamp","StaticDND","CurrentDragAndDropData","undefined","DefaultOptions","useShadows","verticalScrollMode","setRowLineHeight","setRowHeight","supportDynamicHeights","dnd","getDragElements","e","getDragURI","onDragStart","onDragOver","drop","dispose","horizontalScrolling","transformOptimization","alwaysConsumeMouseWheel","ElementsDragAndDropData","constructor","elements","update","getData","ExternalElementsDragAndDropData","NativeDragAndDropData","types","files","dataTransfer","splice","file","item","size","type","push","equalsDragFeedback","f1","f2","Array","isArray","ListViewAccessibilityProvider","accessibilityProvider","getSetSize","bind","l","getPosInSet","getRole","_","isChecked","ListView","contentHeight","rangeMap","onDidScroll","scrollableElement","onScroll","scrollableElementDomNode","getDomNode","_horizontalScrolling","value","Error","domNode","classList","toggle","items","measureItemWidth","updateScrollWidth","setScrollDimensions","width","rowsContainer","style","Math","max","scrollWidth","renderWidth","scrollableElementWidthDelayer","cancel","container","virtualDelegate","renderers","options","_a","_b","_c","_d","_e","_f","_g","_h","_j","_k","_l","_m","_o","domId","InstanceCount","Map","_scrollHeight","scrollableElementUpdateDisposable","splicing","dragOverAnimationStopDisposable","None","dragOverMouseY","canDrop","currentDragFeedbackDisposable","onDragLeaveTimeout","disposables","_onDidChangeContentHeight","_onDidChangeContentWidth","onDidChangeContentHeight","latch","event","itemId","createRangeMap","paddingTop","renderer","set","templateId","cache","add","lastRenderTop","lastRenderHeight","document","createElement","className","tabIndex","mouseSupport","paddingBottom","transform","overflow","contain","addTarget","scrollable","forceIntegerValues","smoothScrollDuration","smoothScrolling","cb","horizontal","vertical","mouseWheelScrollSensitivity","fastScrollSensitivity","scrollByPage","appendChild","Change","onTouchChange","scrollTop","toDragEvent","onDrop","onDragLeave","onDragEnd","layout","initialSize","height","updateOptions","scrollHeight","setSmoothScrollDuration","scrollableOptions","lastRenderRange","getRenderRange","offset","render","setScrollTop","eventuallyUpdateScrollDimensions","_rerender","start","deleteCount","_splice","fire","previousRenderRange","deleteRange","end","removeRange","intersect","rowsToDispose","dragStartDisposable","checkedDisposable","row","rows","get","disposeElement","element","templateData","unshift","stale","previousRestRange","previousRenderedRestRange","previousUnrenderedRestRanges","relativeComplement","inserted","map","id","String","getTemplateId","getHeight","hasDynamicHeight","lastDynamicHeightWidth","uri","dropTarget","deleted","delta","renderRange","renderedRestRange","updateRange","updateItemInDOM","removeRanges","range","removeItemFromDOM","unrenderedRestRanges","elementsRange","insertRanges","reverse","pop","insertItemInDOM","values","release","renderHeight","eventuallyUpdateScrollWidth","trigger","rerender","scrollDimensions","getScrollDimensions","firstVisibleIndex","index","indexOf","findIndex","domElement","elementHeight","elementTop","positionAt","indexAt","position","indexAfter","renderTop","renderLeft","updateItemsInDOM","rangesToInsert","rangesToRemove","rangesToUpdate","transact","left","top","result","alloc","isReusingConnectedDomNode","role","setAttribute","checked","onDidChange","parentElement","referenceNode","at","nextElementSibling","insertBefore","renderElement","draggable","getComputedStyle","paddingLeft","parseFloat","paddingRight","lineHeight","getElementDomId","getScrollTop","scrollPosition","getScrollPosition","reuseAnimation","setScrollPosition","onMouseClick","toMouseEvent","onMouseDblClick","onMouseMiddleClick","filter","browserEvent","button","onMouseDown","onMouseOver","onMouseOut","onContextMenu","any","Contextmenu","toGestureEvent","onTouchStart","toTouchEvent","onTap","Tap","getItemIndexFromEventTarget","initialTarget","sector","getTargetSector","scrollLeft","inSmoothScrolling","err","console","error","preventDefault","stopPropagation","translationY","effectAllowed","setData","TEXT","setDragImage","label","getDragLabel","dragImage","textContent","getDragImageContainer","contains","ownerDocument","setTimeout","removeChild","currentDragData","call","setupDragAndDropScrollTopAnimation","accept","currentDragFeedback","dropEffect","effect","feedback","sort","a","b","dragOverEffectPosition","currentDragFeedbackPosition","remove","clearDragOverFeedback","dragData","teardownDragAndDropScrollTopAnimation","dragOverAnimationDisposable","viewTop","animateDragAndDropScrollTop","pageY","diff","upperLimit","floor","min","targetIndex","relativePosition","offsetY","rawIndex","getAttribute","Number","isNaN","anchorElementIndex","anchorElementTopDelta","heightDiff","didChange","probeDynamicHeight","unrenderRanges","renderRanges","deltaScrollTop","getFutureScrollPosition","newScrollTop","getDynamicHeight","newSize","offsetHeight","body","warn","setDynamicHeight","disposeTemplate","parentNode","prototype"],"sources":["/home/arslan/modojo/node_modules/monaco-editor/esm/vs/base/browser/ui/list/listView.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { DataTransfers } from '../../dnd.js';\nimport { $, addDisposableListener, animate, getContentHeight, getContentWidth, getTopLeftOffset, getWindow, isAncestor, isHTMLElement, scheduleAtNextAnimationFrame } from '../../dom.js';\nimport { DomEmitter } from '../../event.js';\nimport { EventType as TouchEventType, Gesture } from '../../touch.js';\nimport { SmoothScrollableElement } from '../scrollbar/scrollableElement.js';\nimport { distinct, equals } from '../../../common/arrays.js';\nimport { Delayer, disposableTimeout } from '../../../common/async.js';\nimport { memoize } from '../../../common/decorators.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../common/lifecycle.js';\nimport { Range } from '../../../common/range.js';\nimport { Scrollable } from '../../../common/scrollable.js';\nimport { RangeMap, shift } from './rangeMap.js';\nimport { RowCache } from './rowCache.js';\nimport { BugIndicatingError } from '../../../common/errors.js';\nimport { clamp } from '../../../common/numbers.js';\nconst StaticDND = {\n    CurrentDragAndDropData: undefined\n};\nconst DefaultOptions = {\n    useShadows: true,\n    verticalScrollMode: 1 /* ScrollbarVisibility.Auto */,\n    setRowLineHeight: true,\n    setRowHeight: true,\n    supportDynamicHeights: false,\n    dnd: {\n        getDragElements(e) { return [e]; },\n        getDragURI() { return null; },\n        onDragStart() { },\n        onDragOver() { return false; },\n        drop() { },\n        dispose() { }\n    },\n    horizontalScrolling: false,\n    transformOptimization: true,\n    alwaysConsumeMouseWheel: true,\n};\nexport class ElementsDragAndDropData {\n    constructor(elements) {\n        this.elements = elements;\n    }\n    update() { }\n    getData() {\n        return this.elements;\n    }\n}\nexport class ExternalElementsDragAndDropData {\n    constructor(elements) {\n        this.elements = elements;\n    }\n    update() { }\n    getData() {\n        return this.elements;\n    }\n}\nexport class NativeDragAndDropData {\n    constructor() {\n        this.types = [];\n        this.files = [];\n    }\n    update(dataTransfer) {\n        if (dataTransfer.types) {\n            this.types.splice(0, this.types.length, ...dataTransfer.types);\n        }\n        if (dataTransfer.files) {\n            this.files.splice(0, this.files.length);\n            for (let i = 0; i < dataTransfer.files.length; i++) {\n                const file = dataTransfer.files.item(i);\n                if (file && (file.size || file.type)) {\n                    this.files.push(file);\n                }\n            }\n        }\n    }\n    getData() {\n        return {\n            types: this.types,\n            files: this.files\n        };\n    }\n}\nfunction equalsDragFeedback(f1, f2) {\n    if (Array.isArray(f1) && Array.isArray(f2)) {\n        return equals(f1, f2);\n    }\n    return f1 === f2;\n}\nclass ListViewAccessibilityProvider {\n    constructor(accessibilityProvider) {\n        if (accessibilityProvider === null || accessibilityProvider === void 0 ? void 0 : accessibilityProvider.getSetSize) {\n            this.getSetSize = accessibilityProvider.getSetSize.bind(accessibilityProvider);\n        }\n        else {\n            this.getSetSize = (e, i, l) => l;\n        }\n        if (accessibilityProvider === null || accessibilityProvider === void 0 ? void 0 : accessibilityProvider.getPosInSet) {\n            this.getPosInSet = accessibilityProvider.getPosInSet.bind(accessibilityProvider);\n        }\n        else {\n            this.getPosInSet = (e, i) => i + 1;\n        }\n        if (accessibilityProvider === null || accessibilityProvider === void 0 ? void 0 : accessibilityProvider.getRole) {\n            this.getRole = accessibilityProvider.getRole.bind(accessibilityProvider);\n        }\n        else {\n            this.getRole = _ => 'listitem';\n        }\n        if (accessibilityProvider === null || accessibilityProvider === void 0 ? void 0 : accessibilityProvider.isChecked) {\n            this.isChecked = accessibilityProvider.isChecked.bind(accessibilityProvider);\n        }\n        else {\n            this.isChecked = _ => undefined;\n        }\n    }\n}\n/**\n * The {@link ListView} is a virtual scrolling engine.\n *\n * Given that it only renders elements within its viewport, it can hold large\n * collections of elements and stay very performant. The performance bottleneck\n * usually lies within the user's rendering code for each element.\n *\n * @remarks It is a low-level widget, not meant to be used directly. Refer to the\n * List widget instead.\n */\nexport class ListView {\n    get contentHeight() { return this.rangeMap.size; }\n    get onDidScroll() { return this.scrollableElement.onScroll; }\n    get scrollableElementDomNode() { return this.scrollableElement.getDomNode(); }\n    get horizontalScrolling() { return this._horizontalScrolling; }\n    set horizontalScrolling(value) {\n        if (value === this._horizontalScrolling) {\n            return;\n        }\n        if (value && this.supportDynamicHeights) {\n            throw new Error('Horizontal scrolling and dynamic heights not supported simultaneously');\n        }\n        this._horizontalScrolling = value;\n        this.domNode.classList.toggle('horizontal-scrolling', this._horizontalScrolling);\n        if (this._horizontalScrolling) {\n            for (const item of this.items) {\n                this.measureItemWidth(item);\n            }\n            this.updateScrollWidth();\n            this.scrollableElement.setScrollDimensions({ width: getContentWidth(this.domNode) });\n            this.rowsContainer.style.width = `${Math.max(this.scrollWidth || 0, this.renderWidth)}px`;\n        }\n        else {\n            this.scrollableElementWidthDelayer.cancel();\n            this.scrollableElement.setScrollDimensions({ width: this.renderWidth, scrollWidth: this.renderWidth });\n            this.rowsContainer.style.width = '';\n        }\n    }\n    constructor(container, virtualDelegate, renderers, options = DefaultOptions) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o;\n        this.virtualDelegate = virtualDelegate;\n        this.domId = `list_id_${++ListView.InstanceCount}`;\n        this.renderers = new Map();\n        this.renderWidth = 0;\n        this._scrollHeight = 0;\n        this.scrollableElementUpdateDisposable = null;\n        this.scrollableElementWidthDelayer = new Delayer(50);\n        this.splicing = false;\n        this.dragOverAnimationStopDisposable = Disposable.None;\n        this.dragOverMouseY = 0;\n        this.canDrop = false;\n        this.currentDragFeedbackDisposable = Disposable.None;\n        this.onDragLeaveTimeout = Disposable.None;\n        this.disposables = new DisposableStore();\n        this._onDidChangeContentHeight = new Emitter();\n        this._onDidChangeContentWidth = new Emitter();\n        this.onDidChangeContentHeight = Event.latch(this._onDidChangeContentHeight.event, undefined, this.disposables);\n        this._horizontalScrolling = false;\n        if (options.horizontalScrolling && options.supportDynamicHeights) {\n            throw new Error('Horizontal scrolling and dynamic heights not supported simultaneously');\n        }\n        this.items = [];\n        this.itemId = 0;\n        this.rangeMap = this.createRangeMap((_a = options.paddingTop) !== null && _a !== void 0 ? _a : 0);\n        for (const renderer of renderers) {\n            this.renderers.set(renderer.templateId, renderer);\n        }\n        this.cache = this.disposables.add(new RowCache(this.renderers));\n        this.lastRenderTop = 0;\n        this.lastRenderHeight = 0;\n        this.domNode = document.createElement('div');\n        this.domNode.className = 'monaco-list';\n        this.domNode.classList.add(this.domId);\n        this.domNode.tabIndex = 0;\n        this.domNode.classList.toggle('mouse-support', typeof options.mouseSupport === 'boolean' ? options.mouseSupport : true);\n        this._horizontalScrolling = (_b = options.horizontalScrolling) !== null && _b !== void 0 ? _b : DefaultOptions.horizontalScrolling;\n        this.domNode.classList.toggle('horizontal-scrolling', this._horizontalScrolling);\n        this.paddingBottom = typeof options.paddingBottom === 'undefined' ? 0 : options.paddingBottom;\n        this.accessibilityProvider = new ListViewAccessibilityProvider(options.accessibilityProvider);\n        this.rowsContainer = document.createElement('div');\n        this.rowsContainer.className = 'monaco-list-rows';\n        const transformOptimization = (_c = options.transformOptimization) !== null && _c !== void 0 ? _c : DefaultOptions.transformOptimization;\n        if (transformOptimization) {\n            this.rowsContainer.style.transform = 'translate3d(0px, 0px, 0px)';\n            this.rowsContainer.style.overflow = 'hidden';\n            this.rowsContainer.style.contain = 'strict';\n        }\n        this.disposables.add(Gesture.addTarget(this.rowsContainer));\n        this.scrollable = this.disposables.add(new Scrollable({\n            forceIntegerValues: true,\n            smoothScrollDuration: ((_d = options.smoothScrolling) !== null && _d !== void 0 ? _d : false) ? 125 : 0,\n            scheduleAtNextAnimationFrame: cb => scheduleAtNextAnimationFrame(getWindow(this.domNode), cb)\n        }));\n        this.scrollableElement = this.disposables.add(new SmoothScrollableElement(this.rowsContainer, {\n            alwaysConsumeMouseWheel: (_e = options.alwaysConsumeMouseWheel) !== null && _e !== void 0 ? _e : DefaultOptions.alwaysConsumeMouseWheel,\n            horizontal: 1 /* ScrollbarVisibility.Auto */,\n            vertical: (_f = options.verticalScrollMode) !== null && _f !== void 0 ? _f : DefaultOptions.verticalScrollMode,\n            useShadows: (_g = options.useShadows) !== null && _g !== void 0 ? _g : DefaultOptions.useShadows,\n            mouseWheelScrollSensitivity: options.mouseWheelScrollSensitivity,\n            fastScrollSensitivity: options.fastScrollSensitivity,\n            scrollByPage: options.scrollByPage\n        }, this.scrollable));\n        this.domNode.appendChild(this.scrollableElement.getDomNode());\n        container.appendChild(this.domNode);\n        this.scrollableElement.onScroll(this.onScroll, this, this.disposables);\n        this.disposables.add(addDisposableListener(this.rowsContainer, TouchEventType.Change, e => this.onTouchChange(e)));\n        // Prevent the monaco-scrollable-element from scrolling\n        // https://github.com/microsoft/vscode/issues/44181\n        this.disposables.add(addDisposableListener(this.scrollableElement.getDomNode(), 'scroll', e => e.target.scrollTop = 0));\n        this.disposables.add(addDisposableListener(this.domNode, 'dragover', e => this.onDragOver(this.toDragEvent(e))));\n        this.disposables.add(addDisposableListener(this.domNode, 'drop', e => this.onDrop(this.toDragEvent(e))));\n        this.disposables.add(addDisposableListener(this.domNode, 'dragleave', e => this.onDragLeave(this.toDragEvent(e))));\n        this.disposables.add(addDisposableListener(this.domNode, 'dragend', e => this.onDragEnd(e)));\n        this.setRowLineHeight = (_h = options.setRowLineHeight) !== null && _h !== void 0 ? _h : DefaultOptions.setRowLineHeight;\n        this.setRowHeight = (_j = options.setRowHeight) !== null && _j !== void 0 ? _j : DefaultOptions.setRowHeight;\n        this.supportDynamicHeights = (_k = options.supportDynamicHeights) !== null && _k !== void 0 ? _k : DefaultOptions.supportDynamicHeights;\n        this.dnd = (_l = options.dnd) !== null && _l !== void 0 ? _l : this.disposables.add(DefaultOptions.dnd);\n        this.layout((_m = options.initialSize) === null || _m === void 0 ? void 0 : _m.height, (_o = options.initialSize) === null || _o === void 0 ? void 0 : _o.width);\n    }\n    updateOptions(options) {\n        if (options.paddingBottom !== undefined) {\n            this.paddingBottom = options.paddingBottom;\n            this.scrollableElement.setScrollDimensions({ scrollHeight: this.scrollHeight });\n        }\n        if (options.smoothScrolling !== undefined) {\n            this.scrollable.setSmoothScrollDuration(options.smoothScrolling ? 125 : 0);\n        }\n        if (options.horizontalScrolling !== undefined) {\n            this.horizontalScrolling = options.horizontalScrolling;\n        }\n        let scrollableOptions;\n        if (options.scrollByPage !== undefined) {\n            scrollableOptions = { ...(scrollableOptions !== null && scrollableOptions !== void 0 ? scrollableOptions : {}), scrollByPage: options.scrollByPage };\n        }\n        if (options.mouseWheelScrollSensitivity !== undefined) {\n            scrollableOptions = { ...(scrollableOptions !== null && scrollableOptions !== void 0 ? scrollableOptions : {}), mouseWheelScrollSensitivity: options.mouseWheelScrollSensitivity };\n        }\n        if (options.fastScrollSensitivity !== undefined) {\n            scrollableOptions = { ...(scrollableOptions !== null && scrollableOptions !== void 0 ? scrollableOptions : {}), fastScrollSensitivity: options.fastScrollSensitivity };\n        }\n        if (scrollableOptions) {\n            this.scrollableElement.updateOptions(scrollableOptions);\n        }\n        if (options.paddingTop !== undefined && options.paddingTop !== this.rangeMap.paddingTop) {\n            // trigger a rerender\n            const lastRenderRange = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\n            const offset = options.paddingTop - this.rangeMap.paddingTop;\n            this.rangeMap.paddingTop = options.paddingTop;\n            this.render(lastRenderRange, Math.max(0, this.lastRenderTop + offset), this.lastRenderHeight, undefined, undefined, true);\n            this.setScrollTop(this.lastRenderTop);\n            this.eventuallyUpdateScrollDimensions();\n            if (this.supportDynamicHeights) {\n                this._rerender(this.lastRenderTop, this.lastRenderHeight);\n            }\n        }\n    }\n    createRangeMap(paddingTop) {\n        return new RangeMap(paddingTop);\n    }\n    splice(start, deleteCount, elements = []) {\n        if (this.splicing) {\n            throw new Error('Can\\'t run recursive splices.');\n        }\n        this.splicing = true;\n        try {\n            return this._splice(start, deleteCount, elements);\n        }\n        finally {\n            this.splicing = false;\n            this._onDidChangeContentHeight.fire(this.contentHeight);\n        }\n    }\n    _splice(start, deleteCount, elements = []) {\n        const previousRenderRange = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\n        const deleteRange = { start, end: start + deleteCount };\n        const removeRange = Range.intersect(previousRenderRange, deleteRange);\n        // try to reuse rows, avoid removing them from DOM\n        const rowsToDispose = new Map();\n        for (let i = removeRange.end - 1; i >= removeRange.start; i--) {\n            const item = this.items[i];\n            item.dragStartDisposable.dispose();\n            item.checkedDisposable.dispose();\n            if (item.row) {\n                let rows = rowsToDispose.get(item.templateId);\n                if (!rows) {\n                    rows = [];\n                    rowsToDispose.set(item.templateId, rows);\n                }\n                const renderer = this.renderers.get(item.templateId);\n                if (renderer && renderer.disposeElement) {\n                    renderer.disposeElement(item.element, i, item.row.templateData, item.size);\n                }\n                rows.unshift(item.row);\n            }\n            item.row = null;\n            item.stale = true;\n        }\n        const previousRestRange = { start: start + deleteCount, end: this.items.length };\n        const previousRenderedRestRange = Range.intersect(previousRestRange, previousRenderRange);\n        const previousUnrenderedRestRanges = Range.relativeComplement(previousRestRange, previousRenderRange);\n        const inserted = elements.map(element => ({\n            id: String(this.itemId++),\n            element,\n            templateId: this.virtualDelegate.getTemplateId(element),\n            size: this.virtualDelegate.getHeight(element),\n            width: undefined,\n            hasDynamicHeight: !!this.virtualDelegate.hasDynamicHeight && this.virtualDelegate.hasDynamicHeight(element),\n            lastDynamicHeightWidth: undefined,\n            row: null,\n            uri: undefined,\n            dropTarget: false,\n            dragStartDisposable: Disposable.None,\n            checkedDisposable: Disposable.None,\n            stale: false\n        }));\n        let deleted;\n        // TODO@joao: improve this optimization to catch even more cases\n        if (start === 0 && deleteCount >= this.items.length) {\n            this.rangeMap = this.createRangeMap(this.rangeMap.paddingTop);\n            this.rangeMap.splice(0, 0, inserted);\n            deleted = this.items;\n            this.items = inserted;\n        }\n        else {\n            this.rangeMap.splice(start, deleteCount, inserted);\n            deleted = this.items.splice(start, deleteCount, ...inserted);\n        }\n        const delta = elements.length - deleteCount;\n        const renderRange = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\n        const renderedRestRange = shift(previousRenderedRestRange, delta);\n        const updateRange = Range.intersect(renderRange, renderedRestRange);\n        for (let i = updateRange.start; i < updateRange.end; i++) {\n            this.updateItemInDOM(this.items[i], i);\n        }\n        const removeRanges = Range.relativeComplement(renderedRestRange, renderRange);\n        for (const range of removeRanges) {\n            for (let i = range.start; i < range.end; i++) {\n                this.removeItemFromDOM(i);\n            }\n        }\n        const unrenderedRestRanges = previousUnrenderedRestRanges.map(r => shift(r, delta));\n        const elementsRange = { start, end: start + elements.length };\n        const insertRanges = [elementsRange, ...unrenderedRestRanges].map(r => Range.intersect(renderRange, r)).reverse();\n        for (const range of insertRanges) {\n            for (let i = range.end - 1; i >= range.start; i--) {\n                const item = this.items[i];\n                const rows = rowsToDispose.get(item.templateId);\n                const row = rows === null || rows === void 0 ? void 0 : rows.pop();\n                this.insertItemInDOM(i, row);\n            }\n        }\n        for (const rows of rowsToDispose.values()) {\n            for (const row of rows) {\n                this.cache.release(row);\n            }\n        }\n        this.eventuallyUpdateScrollDimensions();\n        if (this.supportDynamicHeights) {\n            this._rerender(this.scrollTop, this.renderHeight);\n        }\n        return deleted.map(i => i.element);\n    }\n    eventuallyUpdateScrollDimensions() {\n        this._scrollHeight = this.contentHeight;\n        this.rowsContainer.style.height = `${this._scrollHeight}px`;\n        if (!this.scrollableElementUpdateDisposable) {\n            this.scrollableElementUpdateDisposable = scheduleAtNextAnimationFrame(getWindow(this.domNode), () => {\n                this.scrollableElement.setScrollDimensions({ scrollHeight: this.scrollHeight });\n                this.updateScrollWidth();\n                this.scrollableElementUpdateDisposable = null;\n            });\n        }\n    }\n    eventuallyUpdateScrollWidth() {\n        if (!this.horizontalScrolling) {\n            this.scrollableElementWidthDelayer.cancel();\n            return;\n        }\n        this.scrollableElementWidthDelayer.trigger(() => this.updateScrollWidth());\n    }\n    updateScrollWidth() {\n        if (!this.horizontalScrolling) {\n            return;\n        }\n        let scrollWidth = 0;\n        for (const item of this.items) {\n            if (typeof item.width !== 'undefined') {\n                scrollWidth = Math.max(scrollWidth, item.width);\n            }\n        }\n        this.scrollWidth = scrollWidth;\n        this.scrollableElement.setScrollDimensions({ scrollWidth: scrollWidth === 0 ? 0 : (scrollWidth + 10) });\n        this._onDidChangeContentWidth.fire(this.scrollWidth);\n    }\n    rerender() {\n        if (!this.supportDynamicHeights) {\n            return;\n        }\n        for (const item of this.items) {\n            item.lastDynamicHeightWidth = undefined;\n        }\n        this._rerender(this.lastRenderTop, this.lastRenderHeight);\n    }\n    get length() {\n        return this.items.length;\n    }\n    get renderHeight() {\n        const scrollDimensions = this.scrollableElement.getScrollDimensions();\n        return scrollDimensions.height;\n    }\n    get firstVisibleIndex() {\n        const range = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\n        return range.start;\n    }\n    element(index) {\n        return this.items[index].element;\n    }\n    indexOf(element) {\n        return this.items.findIndex(item => item.element === element);\n    }\n    domElement(index) {\n        const row = this.items[index].row;\n        return row && row.domNode;\n    }\n    elementHeight(index) {\n        return this.items[index].size;\n    }\n    elementTop(index) {\n        return this.rangeMap.positionAt(index);\n    }\n    indexAt(position) {\n        return this.rangeMap.indexAt(position);\n    }\n    indexAfter(position) {\n        return this.rangeMap.indexAfter(position);\n    }\n    layout(height, width) {\n        const scrollDimensions = {\n            height: typeof height === 'number' ? height : getContentHeight(this.domNode)\n        };\n        if (this.scrollableElementUpdateDisposable) {\n            this.scrollableElementUpdateDisposable.dispose();\n            this.scrollableElementUpdateDisposable = null;\n            scrollDimensions.scrollHeight = this.scrollHeight;\n        }\n        this.scrollableElement.setScrollDimensions(scrollDimensions);\n        if (typeof width !== 'undefined') {\n            this.renderWidth = width;\n            if (this.supportDynamicHeights) {\n                this._rerender(this.scrollTop, this.renderHeight);\n            }\n        }\n        if (this.horizontalScrolling) {\n            this.scrollableElement.setScrollDimensions({\n                width: typeof width === 'number' ? width : getContentWidth(this.domNode)\n            });\n        }\n    }\n    // Render\n    render(previousRenderRange, renderTop, renderHeight, renderLeft, scrollWidth, updateItemsInDOM = false) {\n        const renderRange = this.getRenderRange(renderTop, renderHeight);\n        const rangesToInsert = Range.relativeComplement(renderRange, previousRenderRange).reverse();\n        const rangesToRemove = Range.relativeComplement(previousRenderRange, renderRange);\n        if (updateItemsInDOM) {\n            const rangesToUpdate = Range.intersect(previousRenderRange, renderRange);\n            for (let i = rangesToUpdate.start; i < rangesToUpdate.end; i++) {\n                this.updateItemInDOM(this.items[i], i);\n            }\n        }\n        this.cache.transact(() => {\n            for (const range of rangesToRemove) {\n                for (let i = range.start; i < range.end; i++) {\n                    this.removeItemFromDOM(i);\n                }\n            }\n            for (const range of rangesToInsert) {\n                for (let i = range.end - 1; i >= range.start; i--) {\n                    this.insertItemInDOM(i);\n                }\n            }\n        });\n        if (renderLeft !== undefined) {\n            this.rowsContainer.style.left = `-${renderLeft}px`;\n        }\n        this.rowsContainer.style.top = `-${renderTop}px`;\n        if (this.horizontalScrolling && scrollWidth !== undefined) {\n            this.rowsContainer.style.width = `${Math.max(scrollWidth, this.renderWidth)}px`;\n        }\n        this.lastRenderTop = renderTop;\n        this.lastRenderHeight = renderHeight;\n    }\n    // DOM operations\n    insertItemInDOM(index, row) {\n        var _a, _b, _c;\n        const item = this.items[index];\n        if (!item.row) {\n            if (row) {\n                item.row = row;\n                item.stale = true;\n            }\n            else {\n                const result = this.cache.alloc(item.templateId);\n                item.row = result.row;\n                item.stale || (item.stale = result.isReusingConnectedDomNode);\n            }\n        }\n        const role = this.accessibilityProvider.getRole(item.element) || 'listitem';\n        item.row.domNode.setAttribute('role', role);\n        const checked = this.accessibilityProvider.isChecked(item.element);\n        if (typeof checked === 'boolean') {\n            item.row.domNode.setAttribute('aria-checked', String(!!checked));\n        }\n        else if (checked) {\n            const update = (checked) => item.row.domNode.setAttribute('aria-checked', String(!!checked));\n            update(checked.value);\n            item.checkedDisposable = checked.onDidChange(() => update(checked.value));\n        }\n        if (item.stale || !item.row.domNode.parentElement) {\n            const referenceNode = (_c = (_b = (_a = this.items.at(index + 1)) === null || _a === void 0 ? void 0 : _a.row) === null || _b === void 0 ? void 0 : _b.domNode) !== null && _c !== void 0 ? _c : null;\n            if (item.row.domNode.parentElement !== this.rowsContainer || item.row.domNode.nextElementSibling !== referenceNode) {\n                this.rowsContainer.insertBefore(item.row.domNode, referenceNode);\n            }\n            item.stale = false;\n        }\n        this.updateItemInDOM(item, index);\n        const renderer = this.renderers.get(item.templateId);\n        if (!renderer) {\n            throw new Error(`No renderer found for template id ${item.templateId}`);\n        }\n        renderer === null || renderer === void 0 ? void 0 : renderer.renderElement(item.element, index, item.row.templateData, item.size);\n        const uri = this.dnd.getDragURI(item.element);\n        item.dragStartDisposable.dispose();\n        item.row.domNode.draggable = !!uri;\n        if (uri) {\n            item.dragStartDisposable = addDisposableListener(item.row.domNode, 'dragstart', event => this.onDragStart(item.element, uri, event));\n        }\n        if (this.horizontalScrolling) {\n            this.measureItemWidth(item);\n            this.eventuallyUpdateScrollWidth();\n        }\n    }\n    measureItemWidth(item) {\n        if (!item.row || !item.row.domNode) {\n            return;\n        }\n        item.row.domNode.style.width = 'fit-content';\n        item.width = getContentWidth(item.row.domNode);\n        const style = getWindow(item.row.domNode).getComputedStyle(item.row.domNode);\n        if (style.paddingLeft) {\n            item.width += parseFloat(style.paddingLeft);\n        }\n        if (style.paddingRight) {\n            item.width += parseFloat(style.paddingRight);\n        }\n        item.row.domNode.style.width = '';\n    }\n    updateItemInDOM(item, index) {\n        item.row.domNode.style.top = `${this.elementTop(index)}px`;\n        if (this.setRowHeight) {\n            item.row.domNode.style.height = `${item.size}px`;\n        }\n        if (this.setRowLineHeight) {\n            item.row.domNode.style.lineHeight = `${item.size}px`;\n        }\n        item.row.domNode.setAttribute('data-index', `${index}`);\n        item.row.domNode.setAttribute('data-last-element', index === this.length - 1 ? 'true' : 'false');\n        item.row.domNode.setAttribute('data-parity', index % 2 === 0 ? 'even' : 'odd');\n        item.row.domNode.setAttribute('aria-setsize', String(this.accessibilityProvider.getSetSize(item.element, index, this.length)));\n        item.row.domNode.setAttribute('aria-posinset', String(this.accessibilityProvider.getPosInSet(item.element, index)));\n        item.row.domNode.setAttribute('id', this.getElementDomId(index));\n        item.row.domNode.classList.toggle('drop-target', item.dropTarget);\n    }\n    removeItemFromDOM(index) {\n        const item = this.items[index];\n        item.dragStartDisposable.dispose();\n        item.checkedDisposable.dispose();\n        if (item.row) {\n            const renderer = this.renderers.get(item.templateId);\n            if (renderer && renderer.disposeElement) {\n                renderer.disposeElement(item.element, index, item.row.templateData, item.size);\n            }\n            this.cache.release(item.row);\n            item.row = null;\n        }\n        if (this.horizontalScrolling) {\n            this.eventuallyUpdateScrollWidth();\n        }\n    }\n    getScrollTop() {\n        const scrollPosition = this.scrollableElement.getScrollPosition();\n        return scrollPosition.scrollTop;\n    }\n    setScrollTop(scrollTop, reuseAnimation) {\n        if (this.scrollableElementUpdateDisposable) {\n            this.scrollableElementUpdateDisposable.dispose();\n            this.scrollableElementUpdateDisposable = null;\n            this.scrollableElement.setScrollDimensions({ scrollHeight: this.scrollHeight });\n        }\n        this.scrollableElement.setScrollPosition({ scrollTop, reuseAnimation });\n    }\n    get scrollTop() {\n        return this.getScrollTop();\n    }\n    set scrollTop(scrollTop) {\n        this.setScrollTop(scrollTop);\n    }\n    get scrollHeight() {\n        return this._scrollHeight + (this.horizontalScrolling ? 10 : 0) + this.paddingBottom;\n    }\n    // Events\n    get onMouseClick() { return Event.map(this.disposables.add(new DomEmitter(this.domNode, 'click')).event, e => this.toMouseEvent(e), this.disposables); }\n    get onMouseDblClick() { return Event.map(this.disposables.add(new DomEmitter(this.domNode, 'dblclick')).event, e => this.toMouseEvent(e), this.disposables); }\n    get onMouseMiddleClick() { return Event.filter(Event.map(this.disposables.add(new DomEmitter(this.domNode, 'auxclick')).event, e => this.toMouseEvent(e), this.disposables), e => e.browserEvent.button === 1, this.disposables); }\n    get onMouseDown() { return Event.map(this.disposables.add(new DomEmitter(this.domNode, 'mousedown')).event, e => this.toMouseEvent(e), this.disposables); }\n    get onMouseOver() { return Event.map(this.disposables.add(new DomEmitter(this.domNode, 'mouseover')).event, e => this.toMouseEvent(e), this.disposables); }\n    get onMouseOut() { return Event.map(this.disposables.add(new DomEmitter(this.domNode, 'mouseout')).event, e => this.toMouseEvent(e), this.disposables); }\n    get onContextMenu() { return Event.any(Event.map(this.disposables.add(new DomEmitter(this.domNode, 'contextmenu')).event, e => this.toMouseEvent(e), this.disposables), Event.map(this.disposables.add(new DomEmitter(this.domNode, TouchEventType.Contextmenu)).event, e => this.toGestureEvent(e), this.disposables)); }\n    get onTouchStart() { return Event.map(this.disposables.add(new DomEmitter(this.domNode, 'touchstart')).event, e => this.toTouchEvent(e), this.disposables); }\n    get onTap() { return Event.map(this.disposables.add(new DomEmitter(this.rowsContainer, TouchEventType.Tap)).event, e => this.toGestureEvent(e), this.disposables); }\n    toMouseEvent(browserEvent) {\n        const index = this.getItemIndexFromEventTarget(browserEvent.target || null);\n        const item = typeof index === 'undefined' ? undefined : this.items[index];\n        const element = item && item.element;\n        return { browserEvent, index, element };\n    }\n    toTouchEvent(browserEvent) {\n        const index = this.getItemIndexFromEventTarget(browserEvent.target || null);\n        const item = typeof index === 'undefined' ? undefined : this.items[index];\n        const element = item && item.element;\n        return { browserEvent, index, element };\n    }\n    toGestureEvent(browserEvent) {\n        const index = this.getItemIndexFromEventTarget(browserEvent.initialTarget || null);\n        const item = typeof index === 'undefined' ? undefined : this.items[index];\n        const element = item && item.element;\n        return { browserEvent, index, element };\n    }\n    toDragEvent(browserEvent) {\n        const index = this.getItemIndexFromEventTarget(browserEvent.target || null);\n        const item = typeof index === 'undefined' ? undefined : this.items[index];\n        const element = item && item.element;\n        const sector = this.getTargetSector(browserEvent, index);\n        return { browserEvent, index, element, sector };\n    }\n    onScroll(e) {\n        try {\n            const previousRenderRange = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\n            this.render(previousRenderRange, e.scrollTop, e.height, e.scrollLeft, e.scrollWidth);\n            if (this.supportDynamicHeights) {\n                this._rerender(e.scrollTop, e.height, e.inSmoothScrolling);\n            }\n        }\n        catch (err) {\n            console.error('Got bad scroll event:', e);\n            throw err;\n        }\n    }\n    onTouchChange(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        this.scrollTop -= event.translationY;\n    }\n    // DND\n    onDragStart(element, uri, event) {\n        var _a, _b;\n        if (!event.dataTransfer) {\n            return;\n        }\n        const elements = this.dnd.getDragElements(element);\n        event.dataTransfer.effectAllowed = 'copyMove';\n        event.dataTransfer.setData(DataTransfers.TEXT, uri);\n        if (event.dataTransfer.setDragImage) {\n            let label;\n            if (this.dnd.getDragLabel) {\n                label = this.dnd.getDragLabel(elements, event);\n            }\n            if (typeof label === 'undefined') {\n                label = String(elements.length);\n            }\n            const dragImage = $('.monaco-drag-image');\n            dragImage.textContent = label;\n            const getDragImageContainer = (e) => {\n                while (e && !e.classList.contains('monaco-workbench')) {\n                    e = e.parentElement;\n                }\n                return e || this.domNode.ownerDocument;\n            };\n            const container = getDragImageContainer(this.domNode);\n            container.appendChild(dragImage);\n            event.dataTransfer.setDragImage(dragImage, -10, -10);\n            setTimeout(() => container.removeChild(dragImage), 0);\n        }\n        this.domNode.classList.add('dragging');\n        this.currentDragData = new ElementsDragAndDropData(elements);\n        StaticDND.CurrentDragAndDropData = new ExternalElementsDragAndDropData(elements);\n        (_b = (_a = this.dnd).onDragStart) === null || _b === void 0 ? void 0 : _b.call(_a, this.currentDragData, event);\n    }\n    onDragOver(event) {\n        var _a, _b;\n        event.browserEvent.preventDefault(); // needed so that the drop event fires (https://stackoverflow.com/questions/21339924/drop-event-not-firing-in-chrome)\n        this.onDragLeaveTimeout.dispose();\n        if (StaticDND.CurrentDragAndDropData && StaticDND.CurrentDragAndDropData.getData() === 'vscode-ui') {\n            return false;\n        }\n        this.setupDragAndDropScrollTopAnimation(event.browserEvent);\n        if (!event.browserEvent.dataTransfer) {\n            return false;\n        }\n        // Drag over from outside\n        if (!this.currentDragData) {\n            if (StaticDND.CurrentDragAndDropData) {\n                // Drag over from another list\n                this.currentDragData = StaticDND.CurrentDragAndDropData;\n            }\n            else {\n                // Drag over from the desktop\n                if (!event.browserEvent.dataTransfer.types) {\n                    return false;\n                }\n                this.currentDragData = new NativeDragAndDropData();\n            }\n        }\n        const result = this.dnd.onDragOver(this.currentDragData, event.element, event.index, event.sector, event.browserEvent);\n        this.canDrop = typeof result === 'boolean' ? result : result.accept;\n        if (!this.canDrop) {\n            this.currentDragFeedback = undefined;\n            this.currentDragFeedbackDisposable.dispose();\n            return false;\n        }\n        event.browserEvent.dataTransfer.dropEffect = (typeof result !== 'boolean' && ((_a = result.effect) === null || _a === void 0 ? void 0 : _a.type) === 0 /* ListDragOverEffectType.Copy */) ? 'copy' : 'move';\n        let feedback;\n        if (typeof result !== 'boolean' && result.feedback) {\n            feedback = result.feedback;\n        }\n        else {\n            if (typeof event.index === 'undefined') {\n                feedback = [-1];\n            }\n            else {\n                feedback = [event.index];\n            }\n        }\n        // sanitize feedback list\n        feedback = distinct(feedback).filter(i => i >= -1 && i < this.length).sort((a, b) => a - b);\n        feedback = feedback[0] === -1 ? [-1] : feedback;\n        let dragOverEffectPosition = typeof result !== 'boolean' && result.effect && result.effect.position ? result.effect.position : \"drop-target\" /* ListDragOverEffectPosition.Over */;\n        if (equalsDragFeedback(this.currentDragFeedback, feedback) && this.currentDragFeedbackPosition === dragOverEffectPosition) {\n            return true;\n        }\n        this.currentDragFeedback = feedback;\n        this.currentDragFeedbackPosition = dragOverEffectPosition;\n        this.currentDragFeedbackDisposable.dispose();\n        if (feedback[0] === -1) { // entire list feedback\n            this.domNode.classList.add(dragOverEffectPosition);\n            this.rowsContainer.classList.add(dragOverEffectPosition);\n            this.currentDragFeedbackDisposable = toDisposable(() => {\n                this.domNode.classList.remove(dragOverEffectPosition);\n                this.rowsContainer.classList.remove(dragOverEffectPosition);\n            });\n        }\n        else {\n            if (feedback.length > 1 && dragOverEffectPosition !== \"drop-target\" /* ListDragOverEffectPosition.Over */) {\n                throw new Error('Can\\'t use multiple feedbacks with position different than \\'over\\'');\n            }\n            // Make sure there is no flicker when moving between two items\n            // Always use the before feedback if possible\n            if (dragOverEffectPosition === \"drop-target-after\" /* ListDragOverEffectPosition.After */) {\n                if (feedback[0] < this.length - 1) {\n                    feedback[0] += 1;\n                    dragOverEffectPosition = \"drop-target-before\" /* ListDragOverEffectPosition.Before */;\n                }\n            }\n            for (const index of feedback) {\n                const item = this.items[index];\n                item.dropTarget = true;\n                (_b = item.row) === null || _b === void 0 ? void 0 : _b.domNode.classList.add(dragOverEffectPosition);\n            }\n            this.currentDragFeedbackDisposable = toDisposable(() => {\n                var _a;\n                for (const index of feedback) {\n                    const item = this.items[index];\n                    item.dropTarget = false;\n                    (_a = item.row) === null || _a === void 0 ? void 0 : _a.domNode.classList.remove(dragOverEffectPosition);\n                }\n            });\n        }\n        return true;\n    }\n    onDragLeave(event) {\n        var _a, _b;\n        this.onDragLeaveTimeout.dispose();\n        this.onDragLeaveTimeout = disposableTimeout(() => this.clearDragOverFeedback(), 100, this.disposables);\n        if (this.currentDragData) {\n            (_b = (_a = this.dnd).onDragLeave) === null || _b === void 0 ? void 0 : _b.call(_a, this.currentDragData, event.element, event.index, event.browserEvent);\n        }\n    }\n    onDrop(event) {\n        if (!this.canDrop) {\n            return;\n        }\n        const dragData = this.currentDragData;\n        this.teardownDragAndDropScrollTopAnimation();\n        this.clearDragOverFeedback();\n        this.domNode.classList.remove('dragging');\n        this.currentDragData = undefined;\n        StaticDND.CurrentDragAndDropData = undefined;\n        if (!dragData || !event.browserEvent.dataTransfer) {\n            return;\n        }\n        event.browserEvent.preventDefault();\n        dragData.update(event.browserEvent.dataTransfer);\n        this.dnd.drop(dragData, event.element, event.index, event.sector, event.browserEvent);\n    }\n    onDragEnd(event) {\n        var _a, _b;\n        this.canDrop = false;\n        this.teardownDragAndDropScrollTopAnimation();\n        this.clearDragOverFeedback();\n        this.domNode.classList.remove('dragging');\n        this.currentDragData = undefined;\n        StaticDND.CurrentDragAndDropData = undefined;\n        (_b = (_a = this.dnd).onDragEnd) === null || _b === void 0 ? void 0 : _b.call(_a, event);\n    }\n    clearDragOverFeedback() {\n        this.currentDragFeedback = undefined;\n        this.currentDragFeedbackPosition = undefined;\n        this.currentDragFeedbackDisposable.dispose();\n        this.currentDragFeedbackDisposable = Disposable.None;\n    }\n    // DND scroll top animation\n    setupDragAndDropScrollTopAnimation(event) {\n        if (!this.dragOverAnimationDisposable) {\n            const viewTop = getTopLeftOffset(this.domNode).top;\n            this.dragOverAnimationDisposable = animate(getWindow(this.domNode), this.animateDragAndDropScrollTop.bind(this, viewTop));\n        }\n        this.dragOverAnimationStopDisposable.dispose();\n        this.dragOverAnimationStopDisposable = disposableTimeout(() => {\n            if (this.dragOverAnimationDisposable) {\n                this.dragOverAnimationDisposable.dispose();\n                this.dragOverAnimationDisposable = undefined;\n            }\n        }, 1000, this.disposables);\n        this.dragOverMouseY = event.pageY;\n    }\n    animateDragAndDropScrollTop(viewTop) {\n        if (this.dragOverMouseY === undefined) {\n            return;\n        }\n        const diff = this.dragOverMouseY - viewTop;\n        const upperLimit = this.renderHeight - 35;\n        if (diff < 35) {\n            this.scrollTop += Math.max(-14, Math.floor(0.3 * (diff - 35)));\n        }\n        else if (diff > upperLimit) {\n            this.scrollTop += Math.min(14, Math.floor(0.3 * (diff - upperLimit)));\n        }\n    }\n    teardownDragAndDropScrollTopAnimation() {\n        this.dragOverAnimationStopDisposable.dispose();\n        if (this.dragOverAnimationDisposable) {\n            this.dragOverAnimationDisposable.dispose();\n            this.dragOverAnimationDisposable = undefined;\n        }\n    }\n    // Util\n    getTargetSector(browserEvent, targetIndex) {\n        if (targetIndex === undefined) {\n            return undefined;\n        }\n        const relativePosition = browserEvent.offsetY / this.items[targetIndex].size;\n        const sector = Math.floor(relativePosition / 0.25);\n        return clamp(sector, 0, 3);\n    }\n    getItemIndexFromEventTarget(target) {\n        const scrollableElement = this.scrollableElement.getDomNode();\n        let element = target;\n        while (isHTMLElement(element) && element !== this.rowsContainer && scrollableElement.contains(element)) {\n            const rawIndex = element.getAttribute('data-index');\n            if (rawIndex) {\n                const index = Number(rawIndex);\n                if (!isNaN(index)) {\n                    return index;\n                }\n            }\n            element = element.parentElement;\n        }\n        return undefined;\n    }\n    getRenderRange(renderTop, renderHeight) {\n        return {\n            start: this.rangeMap.indexAt(renderTop),\n            end: this.rangeMap.indexAfter(renderTop + renderHeight - 1)\n        };\n    }\n    /**\n     * Given a stable rendered state, checks every rendered element whether it needs\n     * to be probed for dynamic height. Adjusts scroll height and top if necessary.\n     */\n    _rerender(renderTop, renderHeight, inSmoothScrolling) {\n        const previousRenderRange = this.getRenderRange(renderTop, renderHeight);\n        // Let's remember the second element's position, this helps in scrolling up\n        // and preserving a linear upwards scroll movement\n        let anchorElementIndex;\n        let anchorElementTopDelta;\n        if (renderTop === this.elementTop(previousRenderRange.start)) {\n            anchorElementIndex = previousRenderRange.start;\n            anchorElementTopDelta = 0;\n        }\n        else if (previousRenderRange.end - previousRenderRange.start > 1) {\n            anchorElementIndex = previousRenderRange.start + 1;\n            anchorElementTopDelta = this.elementTop(anchorElementIndex) - renderTop;\n        }\n        let heightDiff = 0;\n        while (true) {\n            const renderRange = this.getRenderRange(renderTop, renderHeight);\n            let didChange = false;\n            for (let i = renderRange.start; i < renderRange.end; i++) {\n                const diff = this.probeDynamicHeight(i);\n                if (diff !== 0) {\n                    this.rangeMap.splice(i, 1, [this.items[i]]);\n                }\n                heightDiff += diff;\n                didChange = didChange || diff !== 0;\n            }\n            if (!didChange) {\n                if (heightDiff !== 0) {\n                    this.eventuallyUpdateScrollDimensions();\n                }\n                const unrenderRanges = Range.relativeComplement(previousRenderRange, renderRange);\n                for (const range of unrenderRanges) {\n                    for (let i = range.start; i < range.end; i++) {\n                        if (this.items[i].row) {\n                            this.removeItemFromDOM(i);\n                        }\n                    }\n                }\n                const renderRanges = Range.relativeComplement(renderRange, previousRenderRange).reverse();\n                for (const range of renderRanges) {\n                    for (let i = range.end - 1; i >= range.start; i--) {\n                        this.insertItemInDOM(i);\n                    }\n                }\n                for (let i = renderRange.start; i < renderRange.end; i++) {\n                    if (this.items[i].row) {\n                        this.updateItemInDOM(this.items[i], i);\n                    }\n                }\n                if (typeof anchorElementIndex === 'number') {\n                    // To compute a destination scroll top, we need to take into account the current smooth scrolling\n                    // animation, and then reuse it with a new target (to avoid prolonging the scroll)\n                    // See https://github.com/microsoft/vscode/issues/104144\n                    // See https://github.com/microsoft/vscode/pull/104284\n                    // See https://github.com/microsoft/vscode/issues/107704\n                    const deltaScrollTop = this.scrollable.getFutureScrollPosition().scrollTop - renderTop;\n                    const newScrollTop = this.elementTop(anchorElementIndex) - anchorElementTopDelta + deltaScrollTop;\n                    this.setScrollTop(newScrollTop, inSmoothScrolling);\n                }\n                this._onDidChangeContentHeight.fire(this.contentHeight);\n                return;\n            }\n        }\n    }\n    probeDynamicHeight(index) {\n        var _a, _b, _c;\n        const item = this.items[index];\n        if (!!this.virtualDelegate.getDynamicHeight) {\n            const newSize = this.virtualDelegate.getDynamicHeight(item.element);\n            if (newSize !== null) {\n                const size = item.size;\n                item.size = newSize;\n                item.lastDynamicHeightWidth = this.renderWidth;\n                return newSize - size;\n            }\n        }\n        if (!item.hasDynamicHeight || item.lastDynamicHeightWidth === this.renderWidth) {\n            return 0;\n        }\n        if (!!this.virtualDelegate.hasDynamicHeight && !this.virtualDelegate.hasDynamicHeight(item.element)) {\n            return 0;\n        }\n        const size = item.size;\n        if (item.row) {\n            item.row.domNode.style.height = '';\n            item.size = item.row.domNode.offsetHeight;\n            if (item.size === 0 && !isAncestor(item.row.domNode, getWindow(item.row.domNode).document.body)) {\n                console.warn('Measuring item node that is not in DOM! Add ListView to the DOM before measuring row height!');\n            }\n            item.lastDynamicHeightWidth = this.renderWidth;\n            return item.size - size;\n        }\n        const { row } = this.cache.alloc(item.templateId);\n        row.domNode.style.height = '';\n        this.rowsContainer.appendChild(row.domNode);\n        const renderer = this.renderers.get(item.templateId);\n        if (!renderer) {\n            throw new BugIndicatingError('Missing renderer for templateId: ' + item.templateId);\n        }\n        renderer.renderElement(item.element, index, row.templateData, undefined);\n        item.size = row.domNode.offsetHeight;\n        (_a = renderer.disposeElement) === null || _a === void 0 ? void 0 : _a.call(renderer, item.element, index, row.templateData, undefined);\n        (_c = (_b = this.virtualDelegate).setDynamicHeight) === null || _c === void 0 ? void 0 : _c.call(_b, item.element, item.size);\n        item.lastDynamicHeightWidth = this.renderWidth;\n        this.rowsContainer.removeChild(row.domNode);\n        this.cache.release(row);\n        return item.size - size;\n    }\n    getElementDomId(index) {\n        return `${this.domId}_${index}`;\n    }\n    // Dispose\n    dispose() {\n        var _a, _b;\n        for (const item of this.items) {\n            item.dragStartDisposable.dispose();\n            item.checkedDisposable.dispose();\n            if (item.row) {\n                const renderer = this.renderers.get(item.row.templateId);\n                if (renderer) {\n                    (_a = renderer.disposeElement) === null || _a === void 0 ? void 0 : _a.call(renderer, item.element, -1, item.row.templateData, undefined);\n                    renderer.disposeTemplate(item.row.templateData);\n                }\n            }\n        }\n        this.items = [];\n        if (this.domNode && this.domNode.parentNode) {\n            this.domNode.parentNode.removeChild(this.domNode);\n        }\n        (_b = this.dragOverAnimationDisposable) === null || _b === void 0 ? void 0 : _b.dispose();\n        this.disposables.dispose();\n    }\n}\nListView.InstanceCount = 0;\n__decorate([\n    memoize\n], ListView.prototype, \"onMouseClick\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onMouseDblClick\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onMouseMiddleClick\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onMouseDown\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onMouseOver\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onMouseOut\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onContextMenu\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onTouchStart\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onTap\", null);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}