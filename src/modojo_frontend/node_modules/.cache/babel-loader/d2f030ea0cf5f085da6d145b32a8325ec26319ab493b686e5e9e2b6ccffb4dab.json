{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../base/common/event.js';\nimport { Iterable } from '../../../base/common/iterator.js';\nimport { toDisposable } from '../../../base/common/lifecycle.js';\nimport { LinkedList } from '../../../base/common/linkedList.js';\nimport { validateConstraints } from '../../../base/common/types.js';\nimport { createDecorator } from '../../instantiation/common/instantiation.js';\nexport const ICommandService = createDecorator('commandService');\nexport const CommandsRegistry = new class {\n  constructor() {\n    this._commands = new Map();\n    this._onDidRegisterCommand = new Emitter();\n    this.onDidRegisterCommand = this._onDidRegisterCommand.event;\n  }\n  registerCommand(idOrCommand, handler) {\n    if (!idOrCommand) {\n      throw new Error(`invalid command`);\n    }\n    if (typeof idOrCommand === 'string') {\n      if (!handler) {\n        throw new Error(`invalid command`);\n      }\n      return this.registerCommand({\n        id: idOrCommand,\n        handler\n      });\n    }\n    // add argument validation if rich command metadata is provided\n    if (idOrCommand.metadata && Array.isArray(idOrCommand.metadata.args)) {\n      const constraints = [];\n      for (const arg of idOrCommand.metadata.args) {\n        constraints.push(arg.constraint);\n      }\n      const actualHandler = idOrCommand.handler;\n      idOrCommand.handler = function (accessor) {\n        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n        validateConstraints(args, constraints);\n        return actualHandler(accessor, ...args);\n      };\n    }\n    // find a place to store the command\n    const {\n      id\n    } = idOrCommand;\n    let commands = this._commands.get(id);\n    if (!commands) {\n      commands = new LinkedList();\n      this._commands.set(id, commands);\n    }\n    const removeFn = commands.unshift(idOrCommand);\n    const ret = toDisposable(() => {\n      removeFn();\n      const command = this._commands.get(id);\n      if (command === null || command === void 0 ? void 0 : command.isEmpty()) {\n        this._commands.delete(id);\n      }\n    });\n    // tell the world about this command\n    this._onDidRegisterCommand.fire(id);\n    return ret;\n  }\n  registerCommandAlias(oldId, newId) {\n    return CommandsRegistry.registerCommand(oldId, function (accessor) {\n      for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        args[_key2 - 1] = arguments[_key2];\n      }\n      return accessor.get(ICommandService).executeCommand(newId, ...args);\n    });\n  }\n  getCommand(id) {\n    const list = this._commands.get(id);\n    if (!list || list.isEmpty()) {\n      return undefined;\n    }\n    return Iterable.first(list);\n  }\n  getCommands() {\n    const result = new Map();\n    for (const key of this._commands.keys()) {\n      const command = this.getCommand(key);\n      if (command) {\n        result.set(key, command);\n      }\n    }\n    return result;\n  }\n}();\nCommandsRegistry.registerCommand('noop', () => {});","map":{"version":3,"names":["Emitter","Iterable","toDisposable","LinkedList","validateConstraints","createDecorator","ICommandService","CommandsRegistry","constructor","_commands","Map","_onDidRegisterCommand","onDidRegisterCommand","event","registerCommand","idOrCommand","handler","Error","id","metadata","Array","isArray","args","constraints","arg","push","constraint","actualHandler","accessor","_len","arguments","length","_key","commands","get","set","removeFn","unshift","ret","command","isEmpty","delete","fire","registerCommandAlias","oldId","newId","_len2","_key2","executeCommand","getCommand","list","undefined","first","getCommands","result","key","keys"],"sources":["/home/arslan/modojo/node_modules/monaco-editor/esm/vs/platform/commands/common/commands.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../base/common/event.js';\nimport { Iterable } from '../../../base/common/iterator.js';\nimport { toDisposable } from '../../../base/common/lifecycle.js';\nimport { LinkedList } from '../../../base/common/linkedList.js';\nimport { validateConstraints } from '../../../base/common/types.js';\nimport { createDecorator } from '../../instantiation/common/instantiation.js';\nexport const ICommandService = createDecorator('commandService');\nexport const CommandsRegistry = new class {\n    constructor() {\n        this._commands = new Map();\n        this._onDidRegisterCommand = new Emitter();\n        this.onDidRegisterCommand = this._onDidRegisterCommand.event;\n    }\n    registerCommand(idOrCommand, handler) {\n        if (!idOrCommand) {\n            throw new Error(`invalid command`);\n        }\n        if (typeof idOrCommand === 'string') {\n            if (!handler) {\n                throw new Error(`invalid command`);\n            }\n            return this.registerCommand({ id: idOrCommand, handler });\n        }\n        // add argument validation if rich command metadata is provided\n        if (idOrCommand.metadata && Array.isArray(idOrCommand.metadata.args)) {\n            const constraints = [];\n            for (const arg of idOrCommand.metadata.args) {\n                constraints.push(arg.constraint);\n            }\n            const actualHandler = idOrCommand.handler;\n            idOrCommand.handler = function (accessor, ...args) {\n                validateConstraints(args, constraints);\n                return actualHandler(accessor, ...args);\n            };\n        }\n        // find a place to store the command\n        const { id } = idOrCommand;\n        let commands = this._commands.get(id);\n        if (!commands) {\n            commands = new LinkedList();\n            this._commands.set(id, commands);\n        }\n        const removeFn = commands.unshift(idOrCommand);\n        const ret = toDisposable(() => {\n            removeFn();\n            const command = this._commands.get(id);\n            if (command === null || command === void 0 ? void 0 : command.isEmpty()) {\n                this._commands.delete(id);\n            }\n        });\n        // tell the world about this command\n        this._onDidRegisterCommand.fire(id);\n        return ret;\n    }\n    registerCommandAlias(oldId, newId) {\n        return CommandsRegistry.registerCommand(oldId, (accessor, ...args) => accessor.get(ICommandService).executeCommand(newId, ...args));\n    }\n    getCommand(id) {\n        const list = this._commands.get(id);\n        if (!list || list.isEmpty()) {\n            return undefined;\n        }\n        return Iterable.first(list);\n    }\n    getCommands() {\n        const result = new Map();\n        for (const key of this._commands.keys()) {\n            const command = this.getCommand(key);\n            if (command) {\n                result.set(key, command);\n            }\n        }\n        return result;\n    }\n};\nCommandsRegistry.registerCommand('noop', () => { });\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}