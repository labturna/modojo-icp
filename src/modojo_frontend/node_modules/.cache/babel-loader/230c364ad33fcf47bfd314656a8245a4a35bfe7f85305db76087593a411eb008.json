{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar DropIntoEditorController_1;\nimport { coalesce } from '../../../../base/common/arrays.js';\nimport { createCancelablePromise, raceCancellation } from '../../../../base/common/async.js';\nimport { VSDataTransfer, matchesMimeType } from '../../../../base/common/dataTransfer.js';\nimport { HierarchicalKind } from '../../../../base/common/hierarchicalKind.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { toExternalVSDataTransfer } from '../../../browser/dnd.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { DraggedTreeItemsIdentifier } from '../../../common/services/treeViewsDnd.js';\nimport { ITreeViewsDnDService } from '../../../common/services/treeViewsDndService.js';\nimport { EditorStateCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { InlineProgressManager } from '../../inlineProgress/browser/inlineProgress.js';\nimport { localize } from '../../../../nls.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { LocalSelectionTransfer } from '../../../../platform/dnd/browser/dnd.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { sortEditsByYieldTo } from './edit.js';\nimport { PostEditWidgetManager } from './postEditWidget.js';\nexport const defaultProviderConfig = 'editor.experimental.dropIntoEditor.defaultProvider';\nexport const changeDropTypeCommandId = 'editor.changeDropType';\nexport const dropWidgetVisibleCtx = new RawContextKey('dropWidgetVisible', false, localize('dropWidgetVisible', \"Whether the drop widget is showing\"));\nlet DropIntoEditorController = DropIntoEditorController_1 = class DropIntoEditorController extends Disposable {\n  static get(editor) {\n    return editor.getContribution(DropIntoEditorController_1.ID);\n  }\n  constructor(editor, instantiationService, _configService, _languageFeaturesService, _treeViewsDragAndDropService) {\n    super();\n    this._configService = _configService;\n    this._languageFeaturesService = _languageFeaturesService;\n    this._treeViewsDragAndDropService = _treeViewsDragAndDropService;\n    this.treeItemsTransfer = LocalSelectionTransfer.getInstance();\n    this._dropProgressManager = this._register(instantiationService.createInstance(InlineProgressManager, 'dropIntoEditor', editor));\n    this._postDropWidgetManager = this._register(instantiationService.createInstance(PostEditWidgetManager, 'dropIntoEditor', editor, dropWidgetVisibleCtx, {\n      id: changeDropTypeCommandId,\n      label: localize('postDropWidgetTitle', \"Show drop options...\")\n    }));\n    this._register(editor.onDropIntoEditor(e => this.onDropIntoEditor(editor, e.position, e.event)));\n  }\n  clearWidgets() {\n    this._postDropWidgetManager.clear();\n  }\n  changeDropType() {\n    this._postDropWidgetManager.tryShowSelector();\n  }\n  async onDropIntoEditor(editor, position, dragEvent) {\n    var _a;\n    if (!dragEvent.dataTransfer || !editor.hasModel()) {\n      return;\n    }\n    (_a = this._currentOperation) === null || _a === void 0 ? void 0 : _a.cancel();\n    editor.focus();\n    editor.setPosition(position);\n    const p = createCancelablePromise(async token => {\n      const tokenSource = new EditorStateCancellationTokenSource(editor, 1 /* CodeEditorStateFlag.Value */, undefined, token);\n      try {\n        const ourDataTransfer = await this.extractDataTransferData(dragEvent);\n        if (ourDataTransfer.size === 0 || tokenSource.token.isCancellationRequested) {\n          return;\n        }\n        const model = editor.getModel();\n        if (!model) {\n          return;\n        }\n        const providers = this._languageFeaturesService.documentDropEditProvider.ordered(model).filter(provider => {\n          if (!provider.dropMimeTypes) {\n            // Keep all providers that don't specify mime types\n            return true;\n          }\n          return provider.dropMimeTypes.some(mime => ourDataTransfer.matches(mime));\n        });\n        const edits = await this.getDropEdits(providers, model, position, ourDataTransfer, tokenSource);\n        if (tokenSource.token.isCancellationRequested) {\n          return;\n        }\n        if (edits.length) {\n          const activeEditIndex = this.getInitialActiveEditIndex(model, edits);\n          const canShowWidget = editor.getOption(36 /* EditorOption.dropIntoEditor */).showDropSelector === 'afterDrop';\n          // Pass in the parent token here as it tracks cancelling the entire drop operation\n          await this._postDropWidgetManager.applyEditAndShowIfNeeded([Range.fromPositions(position)], {\n            activeEditIndex,\n            allEdits: edits\n          }, canShowWidget, async edit => edit, token);\n        }\n      } finally {\n        tokenSource.dispose();\n        if (this._currentOperation === p) {\n          this._currentOperation = undefined;\n        }\n      }\n    });\n    this._dropProgressManager.showWhile(position, localize('dropIntoEditorProgress', \"Running drop handlers. Click to cancel\"), p);\n    this._currentOperation = p;\n  }\n  async getDropEdits(providers, model, position, dataTransfer, tokenSource) {\n    const results = await raceCancellation(Promise.all(providers.map(async provider => {\n      try {\n        const edits = await provider.provideDocumentDropEdits(model, position, dataTransfer, tokenSource.token);\n        return edits === null || edits === void 0 ? void 0 : edits.map(edit => ({\n          ...edit,\n          providerId: provider.id\n        }));\n      } catch (err) {\n        console.error(err);\n      }\n      return undefined;\n    })), tokenSource.token);\n    const edits = coalesce(results !== null && results !== void 0 ? results : []).flat();\n    return sortEditsByYieldTo(edits);\n  }\n  getInitialActiveEditIndex(model, edits) {\n    const preferredProviders = this._configService.getValue(defaultProviderConfig, {\n      resource: model.uri\n    });\n    for (const [configMime, desiredKindStr] of Object.entries(preferredProviders)) {\n      const desiredKind = new HierarchicalKind(desiredKindStr);\n      const editIndex = edits.findIndex(edit => desiredKind.value === edit.providerId && edit.handledMimeType && matchesMimeType(configMime, [edit.handledMimeType]));\n      if (editIndex >= 0) {\n        return editIndex;\n      }\n    }\n    return 0;\n  }\n  async extractDataTransferData(dragEvent) {\n    if (!dragEvent.dataTransfer) {\n      return new VSDataTransfer();\n    }\n    const dataTransfer = toExternalVSDataTransfer(dragEvent.dataTransfer);\n    if (this.treeItemsTransfer.hasData(DraggedTreeItemsIdentifier.prototype)) {\n      const data = this.treeItemsTransfer.getData(DraggedTreeItemsIdentifier.prototype);\n      if (Array.isArray(data)) {\n        for (const id of data) {\n          const treeDataTransfer = await this._treeViewsDragAndDropService.removeDragOperationTransfer(id.identifier);\n          if (treeDataTransfer) {\n            for (const [type, value] of treeDataTransfer) {\n              dataTransfer.replace(type, value);\n            }\n          }\n        }\n      }\n    }\n    return dataTransfer;\n  }\n};\nDropIntoEditorController.ID = 'editor.contrib.dropIntoEditorController';\nDropIntoEditorController = DropIntoEditorController_1 = __decorate([__param(1, IInstantiationService), __param(2, IConfigurationService), __param(3, ILanguageFeaturesService), __param(4, ITreeViewsDnDService)], DropIntoEditorController);\nexport { DropIntoEditorController };","map":{"version":3,"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","DropIntoEditorController_1","coalesce","createCancelablePromise","raceCancellation","VSDataTransfer","matchesMimeType","HierarchicalKind","Disposable","toExternalVSDataTransfer","Range","ILanguageFeaturesService","DraggedTreeItemsIdentifier","ITreeViewsDnDService","EditorStateCancellationTokenSource","InlineProgressManager","localize","IConfigurationService","RawContextKey","LocalSelectionTransfer","IInstantiationService","sortEditsByYieldTo","PostEditWidgetManager","defaultProviderConfig","changeDropTypeCommandId","dropWidgetVisibleCtx","DropIntoEditorController","get","editor","getContribution","ID","constructor","instantiationService","_configService","_languageFeaturesService","_treeViewsDragAndDropService","treeItemsTransfer","getInstance","_dropProgressManager","_register","createInstance","_postDropWidgetManager","id","label","onDropIntoEditor","e","position","event","clearWidgets","clear","changeDropType","tryShowSelector","dragEvent","_a","dataTransfer","hasModel","_currentOperation","cancel","focus","setPosition","p","token","tokenSource","undefined","ourDataTransfer","extractDataTransferData","size","isCancellationRequested","model","getModel","providers","documentDropEditProvider","ordered","filter","provider","dropMimeTypes","some","mime","matches","edits","getDropEdits","activeEditIndex","getInitialActiveEditIndex","canShowWidget","getOption","showDropSelector","applyEditAndShowIfNeeded","fromPositions","allEdits","edit","dispose","showWhile","results","Promise","all","map","provideDocumentDropEdits","providerId","err","console","error","flat","preferredProviders","getValue","resource","uri","configMime","desiredKindStr","entries","desiredKind","editIndex","findIndex","value","handledMimeType","hasData","prototype","data","getData","Array","isArray","treeDataTransfer","removeDragOperationTransfer","identifier","type","replace"],"sources":["/home/arslan/modojo/node_modules/monaco-editor/esm/vs/editor/contrib/dropOrPasteInto/browser/dropIntoEditorController.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar DropIntoEditorController_1;\nimport { coalesce } from '../../../../base/common/arrays.js';\nimport { createCancelablePromise, raceCancellation } from '../../../../base/common/async.js';\nimport { VSDataTransfer, matchesMimeType } from '../../../../base/common/dataTransfer.js';\nimport { HierarchicalKind } from '../../../../base/common/hierarchicalKind.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { toExternalVSDataTransfer } from '../../../browser/dnd.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { DraggedTreeItemsIdentifier } from '../../../common/services/treeViewsDnd.js';\nimport { ITreeViewsDnDService } from '../../../common/services/treeViewsDndService.js';\nimport { EditorStateCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { InlineProgressManager } from '../../inlineProgress/browser/inlineProgress.js';\nimport { localize } from '../../../../nls.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { LocalSelectionTransfer } from '../../../../platform/dnd/browser/dnd.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { sortEditsByYieldTo } from './edit.js';\nimport { PostEditWidgetManager } from './postEditWidget.js';\nexport const defaultProviderConfig = 'editor.experimental.dropIntoEditor.defaultProvider';\nexport const changeDropTypeCommandId = 'editor.changeDropType';\nexport const dropWidgetVisibleCtx = new RawContextKey('dropWidgetVisible', false, localize('dropWidgetVisible', \"Whether the drop widget is showing\"));\nlet DropIntoEditorController = DropIntoEditorController_1 = class DropIntoEditorController extends Disposable {\n    static get(editor) {\n        return editor.getContribution(DropIntoEditorController_1.ID);\n    }\n    constructor(editor, instantiationService, _configService, _languageFeaturesService, _treeViewsDragAndDropService) {\n        super();\n        this._configService = _configService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._treeViewsDragAndDropService = _treeViewsDragAndDropService;\n        this.treeItemsTransfer = LocalSelectionTransfer.getInstance();\n        this._dropProgressManager = this._register(instantiationService.createInstance(InlineProgressManager, 'dropIntoEditor', editor));\n        this._postDropWidgetManager = this._register(instantiationService.createInstance(PostEditWidgetManager, 'dropIntoEditor', editor, dropWidgetVisibleCtx, { id: changeDropTypeCommandId, label: localize('postDropWidgetTitle', \"Show drop options...\") }));\n        this._register(editor.onDropIntoEditor(e => this.onDropIntoEditor(editor, e.position, e.event)));\n    }\n    clearWidgets() {\n        this._postDropWidgetManager.clear();\n    }\n    changeDropType() {\n        this._postDropWidgetManager.tryShowSelector();\n    }\n    async onDropIntoEditor(editor, position, dragEvent) {\n        var _a;\n        if (!dragEvent.dataTransfer || !editor.hasModel()) {\n            return;\n        }\n        (_a = this._currentOperation) === null || _a === void 0 ? void 0 : _a.cancel();\n        editor.focus();\n        editor.setPosition(position);\n        const p = createCancelablePromise(async (token) => {\n            const tokenSource = new EditorStateCancellationTokenSource(editor, 1 /* CodeEditorStateFlag.Value */, undefined, token);\n            try {\n                const ourDataTransfer = await this.extractDataTransferData(dragEvent);\n                if (ourDataTransfer.size === 0 || tokenSource.token.isCancellationRequested) {\n                    return;\n                }\n                const model = editor.getModel();\n                if (!model) {\n                    return;\n                }\n                const providers = this._languageFeaturesService.documentDropEditProvider\n                    .ordered(model)\n                    .filter(provider => {\n                    if (!provider.dropMimeTypes) {\n                        // Keep all providers that don't specify mime types\n                        return true;\n                    }\n                    return provider.dropMimeTypes.some(mime => ourDataTransfer.matches(mime));\n                });\n                const edits = await this.getDropEdits(providers, model, position, ourDataTransfer, tokenSource);\n                if (tokenSource.token.isCancellationRequested) {\n                    return;\n                }\n                if (edits.length) {\n                    const activeEditIndex = this.getInitialActiveEditIndex(model, edits);\n                    const canShowWidget = editor.getOption(36 /* EditorOption.dropIntoEditor */).showDropSelector === 'afterDrop';\n                    // Pass in the parent token here as it tracks cancelling the entire drop operation\n                    await this._postDropWidgetManager.applyEditAndShowIfNeeded([Range.fromPositions(position)], { activeEditIndex, allEdits: edits }, canShowWidget, async (edit) => edit, token);\n                }\n            }\n            finally {\n                tokenSource.dispose();\n                if (this._currentOperation === p) {\n                    this._currentOperation = undefined;\n                }\n            }\n        });\n        this._dropProgressManager.showWhile(position, localize('dropIntoEditorProgress', \"Running drop handlers. Click to cancel\"), p);\n        this._currentOperation = p;\n    }\n    async getDropEdits(providers, model, position, dataTransfer, tokenSource) {\n        const results = await raceCancellation(Promise.all(providers.map(async (provider) => {\n            try {\n                const edits = await provider.provideDocumentDropEdits(model, position, dataTransfer, tokenSource.token);\n                return edits === null || edits === void 0 ? void 0 : edits.map(edit => ({ ...edit, providerId: provider.id }));\n            }\n            catch (err) {\n                console.error(err);\n            }\n            return undefined;\n        })), tokenSource.token);\n        const edits = coalesce(results !== null && results !== void 0 ? results : []).flat();\n        return sortEditsByYieldTo(edits);\n    }\n    getInitialActiveEditIndex(model, edits) {\n        const preferredProviders = this._configService.getValue(defaultProviderConfig, { resource: model.uri });\n        for (const [configMime, desiredKindStr] of Object.entries(preferredProviders)) {\n            const desiredKind = new HierarchicalKind(desiredKindStr);\n            const editIndex = edits.findIndex(edit => desiredKind.value === edit.providerId\n                && edit.handledMimeType && matchesMimeType(configMime, [edit.handledMimeType]));\n            if (editIndex >= 0) {\n                return editIndex;\n            }\n        }\n        return 0;\n    }\n    async extractDataTransferData(dragEvent) {\n        if (!dragEvent.dataTransfer) {\n            return new VSDataTransfer();\n        }\n        const dataTransfer = toExternalVSDataTransfer(dragEvent.dataTransfer);\n        if (this.treeItemsTransfer.hasData(DraggedTreeItemsIdentifier.prototype)) {\n            const data = this.treeItemsTransfer.getData(DraggedTreeItemsIdentifier.prototype);\n            if (Array.isArray(data)) {\n                for (const id of data) {\n                    const treeDataTransfer = await this._treeViewsDragAndDropService.removeDragOperationTransfer(id.identifier);\n                    if (treeDataTransfer) {\n                        for (const [type, value] of treeDataTransfer) {\n                            dataTransfer.replace(type, value);\n                        }\n                    }\n                }\n            }\n        }\n        return dataTransfer;\n    }\n};\nDropIntoEditorController.ID = 'editor.contrib.dropIntoEditorController';\nDropIntoEditorController = DropIntoEditorController_1 = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, IConfigurationService),\n    __param(3, ILanguageFeaturesService),\n    __param(4, ITreeViewsDnDService)\n], DropIntoEditorController);\nexport { DropIntoEditorController };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}