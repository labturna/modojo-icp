{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { defaultGenerator } from '../../../../base/common/idGenerator.js';\nimport { dispose } from '../../../../base/common/lifecycle.js';\nimport { ResourceMap } from '../../../../base/common/map.js';\nimport { basename, extUri } from '../../../../base/common/resources.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { Range } from '../../../common/core/range.js';\nimport { localize } from '../../../../nls.js';\nexport class OneReference {\n  constructor(isProviderFirst, parent, link, _rangeCallback) {\n    this.isProviderFirst = isProviderFirst;\n    this.parent = parent;\n    this.link = link;\n    this._rangeCallback = _rangeCallback;\n    this.id = defaultGenerator.nextId();\n  }\n  get uri() {\n    return this.link.uri;\n  }\n  get range() {\n    var _a, _b;\n    return (_b = (_a = this._range) !== null && _a !== void 0 ? _a : this.link.targetSelectionRange) !== null && _b !== void 0 ? _b : this.link.range;\n  }\n  set range(value) {\n    this._range = value;\n    this._rangeCallback(this);\n  }\n  get ariaMessage() {\n    var _a;\n    const preview = (_a = this.parent.getPreview(this)) === null || _a === void 0 ? void 0 : _a.preview(this.range);\n    if (!preview) {\n      return localize('aria.oneReference', \"in {0} on line {1} at column {2}\", basename(this.uri), this.range.startLineNumber, this.range.startColumn);\n    } else {\n      return localize({\n        key: 'aria.oneReference.preview',\n        comment: ['Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code']\n      }, \"{0} in {1} on line {2} at column {3}\", preview.value, basename(this.uri), this.range.startLineNumber, this.range.startColumn);\n    }\n  }\n}\nexport class FilePreview {\n  constructor(_modelReference) {\n    this._modelReference = _modelReference;\n  }\n  dispose() {\n    this._modelReference.dispose();\n  }\n  preview(range) {\n    let n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 8;\n    const model = this._modelReference.object.textEditorModel;\n    if (!model) {\n      return undefined;\n    }\n    const {\n      startLineNumber,\n      startColumn,\n      endLineNumber,\n      endColumn\n    } = range;\n    const word = model.getWordUntilPosition({\n      lineNumber: startLineNumber,\n      column: startColumn - n\n    });\n    const beforeRange = new Range(startLineNumber, word.startColumn, startLineNumber, startColumn);\n    const afterRange = new Range(endLineNumber, endColumn, endLineNumber, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n    const before = model.getValueInRange(beforeRange).replace(/^\\s+/, '');\n    const inside = model.getValueInRange(range);\n    const after = model.getValueInRange(afterRange).replace(/\\s+$/, '');\n    return {\n      value: before + inside + after,\n      highlight: {\n        start: before.length,\n        end: before.length + inside.length\n      }\n    };\n  }\n}\nexport class FileReferences {\n  constructor(parent, uri) {\n    this.parent = parent;\n    this.uri = uri;\n    this.children = [];\n    this._previews = new ResourceMap();\n  }\n  dispose() {\n    dispose(this._previews.values());\n    this._previews.clear();\n  }\n  getPreview(child) {\n    return this._previews.get(child.uri);\n  }\n  get ariaMessage() {\n    const len = this.children.length;\n    if (len === 1) {\n      return localize('aria.fileReferences.1', \"1 symbol in {0}, full path {1}\", basename(this.uri), this.uri.fsPath);\n    } else {\n      return localize('aria.fileReferences.N', \"{0} symbols in {1}, full path {2}\", len, basename(this.uri), this.uri.fsPath);\n    }\n  }\n  async resolve(textModelResolverService) {\n    if (this._previews.size !== 0) {\n      return this;\n    }\n    for (const child of this.children) {\n      if (this._previews.has(child.uri)) {\n        continue;\n      }\n      try {\n        const ref = await textModelResolverService.createModelReference(child.uri);\n        this._previews.set(child.uri, new FilePreview(ref));\n      } catch (err) {\n        onUnexpectedError(err);\n      }\n    }\n    return this;\n  }\n}\nexport class ReferencesModel {\n  constructor(links, title) {\n    this.groups = [];\n    this.references = [];\n    this._onDidChangeReferenceRange = new Emitter();\n    this.onDidChangeReferenceRange = this._onDidChangeReferenceRange.event;\n    this._links = links;\n    this._title = title;\n    // grouping and sorting\n    const [providersFirst] = links;\n    links.sort(ReferencesModel._compareReferences);\n    let current;\n    for (const link of links) {\n      if (!current || !extUri.isEqual(current.uri, link.uri, true)) {\n        // new group\n        current = new FileReferences(this, link.uri);\n        this.groups.push(current);\n      }\n      // append, check for equality first!\n      if (current.children.length === 0 || ReferencesModel._compareReferences(link, current.children[current.children.length - 1]) !== 0) {\n        const oneRef = new OneReference(providersFirst === link, current, link, ref => this._onDidChangeReferenceRange.fire(ref));\n        this.references.push(oneRef);\n        current.children.push(oneRef);\n      }\n    }\n  }\n  dispose() {\n    dispose(this.groups);\n    this._onDidChangeReferenceRange.dispose();\n    this.groups.length = 0;\n  }\n  clone() {\n    return new ReferencesModel(this._links, this._title);\n  }\n  get title() {\n    return this._title;\n  }\n  get isEmpty() {\n    return this.groups.length === 0;\n  }\n  get ariaMessage() {\n    if (this.isEmpty) {\n      return localize('aria.result.0', \"No results found\");\n    } else if (this.references.length === 1) {\n      return localize('aria.result.1', \"Found 1 symbol in {0}\", this.references[0].uri.fsPath);\n    } else if (this.groups.length === 1) {\n      return localize('aria.result.n1', \"Found {0} symbols in {1}\", this.references.length, this.groups[0].uri.fsPath);\n    } else {\n      return localize('aria.result.nm', \"Found {0} symbols in {1} files\", this.references.length, this.groups.length);\n    }\n  }\n  nextOrPreviousReference(reference, next) {\n    const {\n      parent\n    } = reference;\n    let idx = parent.children.indexOf(reference);\n    const childCount = parent.children.length;\n    const groupCount = parent.parent.groups.length;\n    if (groupCount === 1 || next && idx + 1 < childCount || !next && idx > 0) {\n      // cycling within one file\n      if (next) {\n        idx = (idx + 1) % childCount;\n      } else {\n        idx = (idx + childCount - 1) % childCount;\n      }\n      return parent.children[idx];\n    }\n    idx = parent.parent.groups.indexOf(parent);\n    if (next) {\n      idx = (idx + 1) % groupCount;\n      return parent.parent.groups[idx].children[0];\n    } else {\n      idx = (idx + groupCount - 1) % groupCount;\n      return parent.parent.groups[idx].children[parent.parent.groups[idx].children.length - 1];\n    }\n  }\n  nearestReference(resource, position) {\n    const nearest = this.references.map((ref, idx) => {\n      return {\n        idx,\n        prefixLen: strings.commonPrefixLength(ref.uri.toString(), resource.toString()),\n        offsetDist: Math.abs(ref.range.startLineNumber - position.lineNumber) * 100 + Math.abs(ref.range.startColumn - position.column)\n      };\n    }).sort((a, b) => {\n      if (a.prefixLen > b.prefixLen) {\n        return -1;\n      } else if (a.prefixLen < b.prefixLen) {\n        return 1;\n      } else if (a.offsetDist < b.offsetDist) {\n        return -1;\n      } else if (a.offsetDist > b.offsetDist) {\n        return 1;\n      } else {\n        return 0;\n      }\n    })[0];\n    if (nearest) {\n      return this.references[nearest.idx];\n    }\n    return undefined;\n  }\n  referenceAt(resource, position) {\n    for (const ref of this.references) {\n      if (ref.uri.toString() === resource.toString()) {\n        if (Range.containsPosition(ref.range, position)) {\n          return ref;\n        }\n      }\n    }\n    return undefined;\n  }\n  firstReference() {\n    for (const ref of this.references) {\n      if (ref.isProviderFirst) {\n        return ref;\n      }\n    }\n    return this.references[0];\n  }\n  static _compareReferences(a, b) {\n    return extUri.compare(a.uri, b.uri) || Range.compareRangesUsingStarts(a.range, b.range);\n  }\n}","map":{"version":3,"names":["onUnexpectedError","Emitter","defaultGenerator","dispose","ResourceMap","basename","extUri","strings","Range","localize","OneReference","constructor","isProviderFirst","parent","link","_rangeCallback","id","nextId","uri","range","_a","_b","_range","targetSelectionRange","value","ariaMessage","preview","getPreview","startLineNumber","startColumn","key","comment","FilePreview","_modelReference","n","arguments","length","undefined","model","object","textEditorModel","endLineNumber","endColumn","word","getWordUntilPosition","lineNumber","column","beforeRange","afterRange","before","getValueInRange","replace","inside","after","highlight","start","end","FileReferences","children","_previews","values","clear","child","get","len","fsPath","resolve","textModelResolverService","size","has","ref","createModelReference","set","err","ReferencesModel","links","title","groups","references","_onDidChangeReferenceRange","onDidChangeReferenceRange","event","_links","_title","providersFirst","sort","_compareReferences","current","isEqual","push","oneRef","fire","clone","isEmpty","nextOrPreviousReference","reference","next","idx","indexOf","childCount","groupCount","nearestReference","resource","position","nearest","map","prefixLen","commonPrefixLength","toString","offsetDist","Math","abs","a","b","referenceAt","containsPosition","firstReference","compare","compareRangesUsingStarts"],"sources":["/home/arslan/modojo/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/referencesModel.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { defaultGenerator } from '../../../../base/common/idGenerator.js';\nimport { dispose } from '../../../../base/common/lifecycle.js';\nimport { ResourceMap } from '../../../../base/common/map.js';\nimport { basename, extUri } from '../../../../base/common/resources.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { Range } from '../../../common/core/range.js';\nimport { localize } from '../../../../nls.js';\nexport class OneReference {\n    constructor(isProviderFirst, parent, link, _rangeCallback) {\n        this.isProviderFirst = isProviderFirst;\n        this.parent = parent;\n        this.link = link;\n        this._rangeCallback = _rangeCallback;\n        this.id = defaultGenerator.nextId();\n    }\n    get uri() {\n        return this.link.uri;\n    }\n    get range() {\n        var _a, _b;\n        return (_b = (_a = this._range) !== null && _a !== void 0 ? _a : this.link.targetSelectionRange) !== null && _b !== void 0 ? _b : this.link.range;\n    }\n    set range(value) {\n        this._range = value;\n        this._rangeCallback(this);\n    }\n    get ariaMessage() {\n        var _a;\n        const preview = (_a = this.parent.getPreview(this)) === null || _a === void 0 ? void 0 : _a.preview(this.range);\n        if (!preview) {\n            return localize('aria.oneReference', \"in {0} on line {1} at column {2}\", basename(this.uri), this.range.startLineNumber, this.range.startColumn);\n        }\n        else {\n            return localize({ key: 'aria.oneReference.preview', comment: ['Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code'] }, \"{0} in {1} on line {2} at column {3}\", preview.value, basename(this.uri), this.range.startLineNumber, this.range.startColumn);\n        }\n    }\n}\nexport class FilePreview {\n    constructor(_modelReference) {\n        this._modelReference = _modelReference;\n    }\n    dispose() {\n        this._modelReference.dispose();\n    }\n    preview(range, n = 8) {\n        const model = this._modelReference.object.textEditorModel;\n        if (!model) {\n            return undefined;\n        }\n        const { startLineNumber, startColumn, endLineNumber, endColumn } = range;\n        const word = model.getWordUntilPosition({ lineNumber: startLineNumber, column: startColumn - n });\n        const beforeRange = new Range(startLineNumber, word.startColumn, startLineNumber, startColumn);\n        const afterRange = new Range(endLineNumber, endColumn, endLineNumber, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n        const before = model.getValueInRange(beforeRange).replace(/^\\s+/, '');\n        const inside = model.getValueInRange(range);\n        const after = model.getValueInRange(afterRange).replace(/\\s+$/, '');\n        return {\n            value: before + inside + after,\n            highlight: { start: before.length, end: before.length + inside.length }\n        };\n    }\n}\nexport class FileReferences {\n    constructor(parent, uri) {\n        this.parent = parent;\n        this.uri = uri;\n        this.children = [];\n        this._previews = new ResourceMap();\n    }\n    dispose() {\n        dispose(this._previews.values());\n        this._previews.clear();\n    }\n    getPreview(child) {\n        return this._previews.get(child.uri);\n    }\n    get ariaMessage() {\n        const len = this.children.length;\n        if (len === 1) {\n            return localize('aria.fileReferences.1', \"1 symbol in {0}, full path {1}\", basename(this.uri), this.uri.fsPath);\n        }\n        else {\n            return localize('aria.fileReferences.N', \"{0} symbols in {1}, full path {2}\", len, basename(this.uri), this.uri.fsPath);\n        }\n    }\n    async resolve(textModelResolverService) {\n        if (this._previews.size !== 0) {\n            return this;\n        }\n        for (const child of this.children) {\n            if (this._previews.has(child.uri)) {\n                continue;\n            }\n            try {\n                const ref = await textModelResolverService.createModelReference(child.uri);\n                this._previews.set(child.uri, new FilePreview(ref));\n            }\n            catch (err) {\n                onUnexpectedError(err);\n            }\n        }\n        return this;\n    }\n}\nexport class ReferencesModel {\n    constructor(links, title) {\n        this.groups = [];\n        this.references = [];\n        this._onDidChangeReferenceRange = new Emitter();\n        this.onDidChangeReferenceRange = this._onDidChangeReferenceRange.event;\n        this._links = links;\n        this._title = title;\n        // grouping and sorting\n        const [providersFirst] = links;\n        links.sort(ReferencesModel._compareReferences);\n        let current;\n        for (const link of links) {\n            if (!current || !extUri.isEqual(current.uri, link.uri, true)) {\n                // new group\n                current = new FileReferences(this, link.uri);\n                this.groups.push(current);\n            }\n            // append, check for equality first!\n            if (current.children.length === 0 || ReferencesModel._compareReferences(link, current.children[current.children.length - 1]) !== 0) {\n                const oneRef = new OneReference(providersFirst === link, current, link, ref => this._onDidChangeReferenceRange.fire(ref));\n                this.references.push(oneRef);\n                current.children.push(oneRef);\n            }\n        }\n    }\n    dispose() {\n        dispose(this.groups);\n        this._onDidChangeReferenceRange.dispose();\n        this.groups.length = 0;\n    }\n    clone() {\n        return new ReferencesModel(this._links, this._title);\n    }\n    get title() {\n        return this._title;\n    }\n    get isEmpty() {\n        return this.groups.length === 0;\n    }\n    get ariaMessage() {\n        if (this.isEmpty) {\n            return localize('aria.result.0', \"No results found\");\n        }\n        else if (this.references.length === 1) {\n            return localize('aria.result.1', \"Found 1 symbol in {0}\", this.references[0].uri.fsPath);\n        }\n        else if (this.groups.length === 1) {\n            return localize('aria.result.n1', \"Found {0} symbols in {1}\", this.references.length, this.groups[0].uri.fsPath);\n        }\n        else {\n            return localize('aria.result.nm', \"Found {0} symbols in {1} files\", this.references.length, this.groups.length);\n        }\n    }\n    nextOrPreviousReference(reference, next) {\n        const { parent } = reference;\n        let idx = parent.children.indexOf(reference);\n        const childCount = parent.children.length;\n        const groupCount = parent.parent.groups.length;\n        if (groupCount === 1 || next && idx + 1 < childCount || !next && idx > 0) {\n            // cycling within one file\n            if (next) {\n                idx = (idx + 1) % childCount;\n            }\n            else {\n                idx = (idx + childCount - 1) % childCount;\n            }\n            return parent.children[idx];\n        }\n        idx = parent.parent.groups.indexOf(parent);\n        if (next) {\n            idx = (idx + 1) % groupCount;\n            return parent.parent.groups[idx].children[0];\n        }\n        else {\n            idx = (idx + groupCount - 1) % groupCount;\n            return parent.parent.groups[idx].children[parent.parent.groups[idx].children.length - 1];\n        }\n    }\n    nearestReference(resource, position) {\n        const nearest = this.references.map((ref, idx) => {\n            return {\n                idx,\n                prefixLen: strings.commonPrefixLength(ref.uri.toString(), resource.toString()),\n                offsetDist: Math.abs(ref.range.startLineNumber - position.lineNumber) * 100 + Math.abs(ref.range.startColumn - position.column)\n            };\n        }).sort((a, b) => {\n            if (a.prefixLen > b.prefixLen) {\n                return -1;\n            }\n            else if (a.prefixLen < b.prefixLen) {\n                return 1;\n            }\n            else if (a.offsetDist < b.offsetDist) {\n                return -1;\n            }\n            else if (a.offsetDist > b.offsetDist) {\n                return 1;\n            }\n            else {\n                return 0;\n            }\n        })[0];\n        if (nearest) {\n            return this.references[nearest.idx];\n        }\n        return undefined;\n    }\n    referenceAt(resource, position) {\n        for (const ref of this.references) {\n            if (ref.uri.toString() === resource.toString()) {\n                if (Range.containsPosition(ref.range, position)) {\n                    return ref;\n                }\n            }\n        }\n        return undefined;\n    }\n    firstReference() {\n        for (const ref of this.references) {\n            if (ref.isProviderFirst) {\n                return ref;\n            }\n        }\n        return this.references[0];\n    }\n    static _compareReferences(a, b) {\n        return extUri.compare(a.uri, b.uri) || Range.compareRangesUsingStarts(a.range, b.range);\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}