{"ast":null,"code":"var __classPrivateFieldSet = this && this.__classPrivateFieldSet || function (receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;\n};\nvar __classPrivateFieldGet = this && this.__classPrivateFieldGet || function (receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _Ed25519PublicKey_rawKey, _Ed25519PublicKey_derKey;\nimport { ED25519_OID, unwrapDER, wrapDER } from './der';\nexport class Ed25519PublicKey {\n  // `fromRaw` and `fromDer` should be used for instantiation, not this constructor.\n  constructor(key) {\n    _Ed25519PublicKey_rawKey.set(this, void 0);\n    _Ed25519PublicKey_derKey.set(this, void 0);\n    if (key.byteLength !== Ed25519PublicKey.RAW_KEY_LENGTH) {\n      throw new Error('An Ed25519 public key must be exactly 32bytes long');\n    }\n    __classPrivateFieldSet(this, _Ed25519PublicKey_rawKey, key, \"f\");\n    __classPrivateFieldSet(this, _Ed25519PublicKey_derKey, Ed25519PublicKey.derEncode(key), \"f\");\n  }\n  static from(key) {\n    return this.fromDer(key.toDer());\n  }\n  static fromRaw(rawKey) {\n    return new Ed25519PublicKey(rawKey);\n  }\n  static fromDer(derKey) {\n    return new Ed25519PublicKey(this.derDecode(derKey));\n  }\n  static derEncode(publicKey) {\n    return wrapDER(publicKey, ED25519_OID).buffer;\n  }\n  static derDecode(key) {\n    const unwrapped = unwrapDER(key, ED25519_OID);\n    if (unwrapped.length !== this.RAW_KEY_LENGTH) {\n      throw new Error('An Ed25519 public key must be exactly 32bytes long');\n    }\n    return unwrapped;\n  }\n  get rawKey() {\n    return __classPrivateFieldGet(this, _Ed25519PublicKey_rawKey, \"f\");\n  }\n  get derKey() {\n    return __classPrivateFieldGet(this, _Ed25519PublicKey_derKey, \"f\");\n  }\n  toDer() {\n    return this.derKey;\n  }\n  toRaw() {\n    return this.rawKey;\n  }\n}\n_Ed25519PublicKey_rawKey = new WeakMap(), _Ed25519PublicKey_derKey = new WeakMap();\n// The length of Ed25519 public keys is always 32 bytes.\nEd25519PublicKey.RAW_KEY_LENGTH = 32;","map":{"version":3,"names":["ED25519_OID","unwrapDER","wrapDER","Ed25519PublicKey","constructor","key","_Ed25519PublicKey_rawKey","set","_Ed25519PublicKey_derKey","byteLength","RAW_KEY_LENGTH","Error","__classPrivateFieldSet","derEncode","from","fromDer","toDer","fromRaw","rawKey","derKey","derDecode","publicKey","buffer","unwrapped","length","__classPrivateFieldGet","toRaw"],"sources":["/home/arslan/modojo/node_modules/@dfinity/agent/src/public_key.ts"],"sourcesContent":["import { DerEncodedPublicKey, PublicKey } from './auth';\nimport { ED25519_OID, unwrapDER, wrapDER } from './der';\n\nexport class Ed25519PublicKey implements PublicKey {\n  public static from(key: PublicKey): Ed25519PublicKey {\n    return this.fromDer(key.toDer());\n  }\n\n  public static fromRaw(rawKey: ArrayBuffer): Ed25519PublicKey {\n    return new Ed25519PublicKey(rawKey);\n  }\n\n  public static fromDer(derKey: DerEncodedPublicKey): Ed25519PublicKey {\n    return new Ed25519PublicKey(this.derDecode(derKey));\n  }\n\n  // The length of Ed25519 public keys is always 32 bytes.\n  private static RAW_KEY_LENGTH = 32;\n\n  private static derEncode(publicKey: ArrayBuffer): DerEncodedPublicKey {\n    return wrapDER(publicKey, ED25519_OID).buffer as DerEncodedPublicKey;\n  }\n\n  private static derDecode(key: DerEncodedPublicKey): ArrayBuffer {\n    const unwrapped = unwrapDER(key, ED25519_OID);\n    if (unwrapped.length !== this.RAW_KEY_LENGTH) {\n      throw new Error('An Ed25519 public key must be exactly 32bytes long');\n    }\n    return unwrapped;\n  }\n\n  #rawKey: ArrayBuffer;\n\n  public get rawKey(): ArrayBuffer {\n    return this.#rawKey;\n  }\n\n  #derKey: DerEncodedPublicKey;\n\n  public get derKey(): DerEncodedPublicKey {\n    return this.#derKey;\n  }\n\n  // `fromRaw` and `fromDer` should be used for instantiation, not this constructor.\n  private constructor(key: ArrayBuffer) {\n    if (key.byteLength !== Ed25519PublicKey.RAW_KEY_LENGTH) {\n      throw new Error('An Ed25519 public key must be exactly 32bytes long');\n    }\n    this.#rawKey = key;\n    this.#derKey = Ed25519PublicKey.derEncode(key);\n  }\n\n  public toDer(): DerEncodedPublicKey {\n    return this.derKey;\n  }\n\n  public toRaw(): ArrayBuffer {\n    return this.rawKey;\n  }\n}\n"],"mappings":";;;;;;;;;;;;AACA,SAASA,WAAW,EAAEC,SAAS,EAAEC,OAAO,QAAQ,OAAO;AAEvD,OAAM,MAAOC,gBAAgB;EAwC3B;EACAC,YAAoBC,GAAgB;IAbpCC,wBAAA,CAAAC,GAAA;IAMAC,wBAAA,CAAAD,GAAA;IAQE,IAAIF,GAAG,CAACI,UAAU,KAAKN,gBAAgB,CAACO,cAAc,EAAE;MACtD,MAAM,IAAIC,KAAK,CAAC,oDAAoD,CAAC;;IAEvEC,sBAAA,KAAI,EAAAN,wBAAA,EAAWD,GAAG;IAClBO,sBAAA,KAAI,EAAAJ,wBAAA,EAAWL,gBAAgB,CAACU,SAAS,CAACR,GAAG,CAAC;EAChD;EA9CO,OAAOS,IAAIA,CAACT,GAAc;IAC/B,OAAO,IAAI,CAACU,OAAO,CAACV,GAAG,CAACW,KAAK,EAAE,CAAC;EAClC;EAEO,OAAOC,OAAOA,CAACC,MAAmB;IACvC,OAAO,IAAIf,gBAAgB,CAACe,MAAM,CAAC;EACrC;EAEO,OAAOH,OAAOA,CAACI,MAA2B;IAC/C,OAAO,IAAIhB,gBAAgB,CAAC,IAAI,CAACiB,SAAS,CAACD,MAAM,CAAC,CAAC;EACrD;EAKQ,OAAON,SAASA,CAACQ,SAAsB;IAC7C,OAAOnB,OAAO,CAACmB,SAAS,EAAErB,WAAW,CAAC,CAACsB,MAA6B;EACtE;EAEQ,OAAOF,SAASA,CAACf,GAAwB;IAC/C,MAAMkB,SAAS,GAAGtB,SAAS,CAACI,GAAG,EAAEL,WAAW,CAAC;IAC7C,IAAIuB,SAAS,CAACC,MAAM,KAAK,IAAI,CAACd,cAAc,EAAE;MAC5C,MAAM,IAAIC,KAAK,CAAC,oDAAoD,CAAC;;IAEvE,OAAOY,SAAS;EAClB;EAIA,IAAWL,MAAMA,CAAA;IACf,OAAOO,sBAAA,KAAI,EAAAnB,wBAAA,MAAQ;EACrB;EAIA,IAAWa,MAAMA,CAAA;IACf,OAAOM,sBAAA,KAAI,EAAAjB,wBAAA,MAAQ;EACrB;EAWOQ,KAAKA,CAAA;IACV,OAAO,IAAI,CAACG,MAAM;EACpB;EAEOO,KAAKA,CAAA;IACV,OAAO,IAAI,CAACR,MAAM;EACpB;;;AA1CA;AACef,gBAAA,CAAAO,cAAc,GAAG,EAAE","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}