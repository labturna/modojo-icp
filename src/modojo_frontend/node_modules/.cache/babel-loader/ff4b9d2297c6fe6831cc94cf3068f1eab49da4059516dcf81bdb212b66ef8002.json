{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { range } from '../../../common/arrays.js';\nimport { CancellationTokenSource } from '../../../common/cancellation.js';\nimport { Event } from '../../../common/event.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport './list.css';\nimport { List } from './listWidget.js';\nclass PagedRenderer {\n  get templateId() {\n    return this.renderer.templateId;\n  }\n  constructor(renderer, modelProvider) {\n    this.renderer = renderer;\n    this.modelProvider = modelProvider;\n  }\n  renderTemplate(container) {\n    const data = this.renderer.renderTemplate(container);\n    return {\n      data,\n      disposable: Disposable.None\n    };\n  }\n  renderElement(index, _, data, height) {\n    var _a;\n    (_a = data.disposable) === null || _a === void 0 ? void 0 : _a.dispose();\n    if (!data.data) {\n      return;\n    }\n    const model = this.modelProvider();\n    if (model.isResolved(index)) {\n      return this.renderer.renderElement(model.get(index), index, data.data, height);\n    }\n    const cts = new CancellationTokenSource();\n    const promise = model.resolve(index, cts.token);\n    data.disposable = {\n      dispose: () => cts.cancel()\n    };\n    this.renderer.renderPlaceholder(index, data.data);\n    promise.then(entry => this.renderer.renderElement(entry, index, data.data, height));\n  }\n  disposeTemplate(data) {\n    if (data.disposable) {\n      data.disposable.dispose();\n      data.disposable = undefined;\n    }\n    if (data.data) {\n      this.renderer.disposeTemplate(data.data);\n      data.data = undefined;\n    }\n  }\n}\nclass PagedAccessibilityProvider {\n  constructor(modelProvider, accessibilityProvider) {\n    this.modelProvider = modelProvider;\n    this.accessibilityProvider = accessibilityProvider;\n  }\n  getWidgetAriaLabel() {\n    return this.accessibilityProvider.getWidgetAriaLabel();\n  }\n  getAriaLabel(index) {\n    const model = this.modelProvider();\n    if (!model.isResolved(index)) {\n      return null;\n    }\n    return this.accessibilityProvider.getAriaLabel(model.get(index));\n  }\n}\nfunction fromPagedListOptions(modelProvider, options) {\n  return {\n    ...options,\n    accessibilityProvider: options.accessibilityProvider && new PagedAccessibilityProvider(modelProvider, options.accessibilityProvider)\n  };\n}\nexport class PagedList {\n  constructor(user, container, virtualDelegate, renderers) {\n    let options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n    const modelProvider = () => this.model;\n    const pagedRenderers = renderers.map(r => new PagedRenderer(r, modelProvider));\n    this.list = new List(user, container, virtualDelegate, pagedRenderers, fromPagedListOptions(modelProvider, options));\n  }\n  updateOptions(options) {\n    this.list.updateOptions(options);\n  }\n  getHTMLElement() {\n    return this.list.getHTMLElement();\n  }\n  get onDidFocus() {\n    return this.list.onDidFocus;\n  }\n  get widget() {\n    return this.list;\n  }\n  get onDidDispose() {\n    return this.list.onDidDispose;\n  }\n  get onMouseDblClick() {\n    return Event.map(this.list.onMouseDblClick, _ref => {\n      let {\n        element,\n        index,\n        browserEvent\n      } = _ref;\n      return {\n        element: element === undefined ? undefined : this._model.get(element),\n        index,\n        browserEvent\n      };\n    });\n  }\n  get onPointer() {\n    return Event.map(this.list.onPointer, _ref2 => {\n      let {\n        element,\n        index,\n        browserEvent\n      } = _ref2;\n      return {\n        element: element === undefined ? undefined : this._model.get(element),\n        index,\n        browserEvent\n      };\n    });\n  }\n  get onDidChangeSelection() {\n    return Event.map(this.list.onDidChangeSelection, _ref3 => {\n      let {\n        elements,\n        indexes,\n        browserEvent\n      } = _ref3;\n      return {\n        elements: elements.map(e => this._model.get(e)),\n        indexes,\n        browserEvent\n      };\n    });\n  }\n  get model() {\n    return this._model;\n  }\n  set model(model) {\n    this._model = model;\n    this.list.splice(0, this.list.length, range(model.length));\n  }\n  getFocus() {\n    return this.list.getFocus();\n  }\n  getSelection() {\n    return this.list.getSelection();\n  }\n  getSelectedElements() {\n    return this.getSelection().map(i => this.model.get(i));\n  }\n  style(styles) {\n    this.list.style(styles);\n  }\n  dispose() {\n    this.list.dispose();\n  }\n}","map":{"version":3,"names":["range","CancellationTokenSource","Event","Disposable","List","PagedRenderer","templateId","renderer","constructor","modelProvider","renderTemplate","container","data","disposable","None","renderElement","index","_","height","_a","dispose","model","isResolved","get","cts","promise","resolve","token","cancel","renderPlaceholder","then","entry","disposeTemplate","undefined","PagedAccessibilityProvider","accessibilityProvider","getWidgetAriaLabel","getAriaLabel","fromPagedListOptions","options","PagedList","user","virtualDelegate","renderers","arguments","length","pagedRenderers","map","r","list","updateOptions","getHTMLElement","onDidFocus","widget","onDidDispose","onMouseDblClick","_ref","element","browserEvent","_model","onPointer","_ref2","onDidChangeSelection","_ref3","elements","indexes","e","splice","getFocus","getSelection","getSelectedElements","i","style","styles"],"sources":["/home/arslan/modojo/node_modules/monaco-editor/esm/vs/base/browser/ui/list/listPaging.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { range } from '../../../common/arrays.js';\nimport { CancellationTokenSource } from '../../../common/cancellation.js';\nimport { Event } from '../../../common/event.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport './list.css';\nimport { List } from './listWidget.js';\nclass PagedRenderer {\n    get templateId() { return this.renderer.templateId; }\n    constructor(renderer, modelProvider) {\n        this.renderer = renderer;\n        this.modelProvider = modelProvider;\n    }\n    renderTemplate(container) {\n        const data = this.renderer.renderTemplate(container);\n        return { data, disposable: Disposable.None };\n    }\n    renderElement(index, _, data, height) {\n        var _a;\n        (_a = data.disposable) === null || _a === void 0 ? void 0 : _a.dispose();\n        if (!data.data) {\n            return;\n        }\n        const model = this.modelProvider();\n        if (model.isResolved(index)) {\n            return this.renderer.renderElement(model.get(index), index, data.data, height);\n        }\n        const cts = new CancellationTokenSource();\n        const promise = model.resolve(index, cts.token);\n        data.disposable = { dispose: () => cts.cancel() };\n        this.renderer.renderPlaceholder(index, data.data);\n        promise.then(entry => this.renderer.renderElement(entry, index, data.data, height));\n    }\n    disposeTemplate(data) {\n        if (data.disposable) {\n            data.disposable.dispose();\n            data.disposable = undefined;\n        }\n        if (data.data) {\n            this.renderer.disposeTemplate(data.data);\n            data.data = undefined;\n        }\n    }\n}\nclass PagedAccessibilityProvider {\n    constructor(modelProvider, accessibilityProvider) {\n        this.modelProvider = modelProvider;\n        this.accessibilityProvider = accessibilityProvider;\n    }\n    getWidgetAriaLabel() {\n        return this.accessibilityProvider.getWidgetAriaLabel();\n    }\n    getAriaLabel(index) {\n        const model = this.modelProvider();\n        if (!model.isResolved(index)) {\n            return null;\n        }\n        return this.accessibilityProvider.getAriaLabel(model.get(index));\n    }\n}\nfunction fromPagedListOptions(modelProvider, options) {\n    return {\n        ...options,\n        accessibilityProvider: options.accessibilityProvider && new PagedAccessibilityProvider(modelProvider, options.accessibilityProvider)\n    };\n}\nexport class PagedList {\n    constructor(user, container, virtualDelegate, renderers, options = {}) {\n        const modelProvider = () => this.model;\n        const pagedRenderers = renderers.map(r => new PagedRenderer(r, modelProvider));\n        this.list = new List(user, container, virtualDelegate, pagedRenderers, fromPagedListOptions(modelProvider, options));\n    }\n    updateOptions(options) {\n        this.list.updateOptions(options);\n    }\n    getHTMLElement() {\n        return this.list.getHTMLElement();\n    }\n    get onDidFocus() {\n        return this.list.onDidFocus;\n    }\n    get widget() {\n        return this.list;\n    }\n    get onDidDispose() {\n        return this.list.onDidDispose;\n    }\n    get onMouseDblClick() {\n        return Event.map(this.list.onMouseDblClick, ({ element, index, browserEvent }) => ({ element: element === undefined ? undefined : this._model.get(element), index, browserEvent }));\n    }\n    get onPointer() {\n        return Event.map(this.list.onPointer, ({ element, index, browserEvent }) => ({ element: element === undefined ? undefined : this._model.get(element), index, browserEvent }));\n    }\n    get onDidChangeSelection() {\n        return Event.map(this.list.onDidChangeSelection, ({ elements, indexes, browserEvent }) => ({ elements: elements.map(e => this._model.get(e)), indexes, browserEvent }));\n    }\n    get model() {\n        return this._model;\n    }\n    set model(model) {\n        this._model = model;\n        this.list.splice(0, this.list.length, range(model.length));\n    }\n    getFocus() {\n        return this.list.getFocus();\n    }\n    getSelection() {\n        return this.list.getSelection();\n    }\n    getSelectedElements() {\n        return this.getSelection().map(i => this.model.get(i));\n    }\n    style(styles) {\n        this.list.style(styles);\n    }\n    dispose() {\n        this.list.dispose();\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}