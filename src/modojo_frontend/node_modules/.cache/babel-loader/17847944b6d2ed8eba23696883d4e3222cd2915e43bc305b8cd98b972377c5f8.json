{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport { addDisposableListener, addStandardDisposableListener, reset } from '../../../../../base/browser/dom.js';\nimport { createTrustedTypesPolicy } from '../../../../../base/browser/trustedTypes.js';\nimport { ActionBar } from '../../../../../base/browser/ui/actionbar/actionbar.js';\nimport { DomScrollableElement } from '../../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { Action } from '../../../../../base/common/actions.js';\nimport { forEachAdjacent, groupAdjacentBy } from '../../../../../base/common/arrays.js';\nimport { Codicon } from '../../../../../base/common/codicons.js';\nimport { Disposable, toDisposable } from '../../../../../base/common/lifecycle.js';\nimport { autorun, autorunWithStore, derived, derivedWithStore, observableValue, subtransaction, transaction } from '../../../../../base/common/observable.js';\nimport { ThemeIcon } from '../../../../../base/common/themables.js';\nimport { applyFontInfo } from '../../../config/domFontInfo.js';\nimport { applyStyle } from '../utils.js';\nimport { EditorFontLigatures } from '../../../../common/config/editorOptions.js';\nimport { LineRange } from '../../../../common/core/lineRange.js';\nimport { OffsetRange } from '../../../../common/core/offsetRange.js';\nimport { Position } from '../../../../common/core/position.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { LineRangeMapping } from '../../../../common/diff/rangeMapping.js';\nimport { ILanguageService } from '../../../../common/languages/language.js';\nimport { LineTokens } from '../../../../common/tokens/lineTokens.js';\nimport { RenderLineInput, renderViewLine2 } from '../../../../common/viewLayout/viewLineRenderer.js';\nimport { ViewLineRenderingData } from '../../../../common/viewModel.js';\nimport { localize } from '../../../../../nls.js';\nimport { AccessibilitySignal, IAccessibilitySignalService } from '../../../../../platform/accessibilitySignal/browser/accessibilitySignalService.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { registerIcon } from '../../../../../platform/theme/common/iconRegistry.js';\nimport './accessibleDiffViewer.css';\nconst accessibleDiffViewerInsertIcon = registerIcon('diff-review-insert', Codicon.add, localize('accessibleDiffViewerInsertIcon', 'Icon for \\'Insert\\' in accessible diff viewer.'));\nconst accessibleDiffViewerRemoveIcon = registerIcon('diff-review-remove', Codicon.remove, localize('accessibleDiffViewerRemoveIcon', 'Icon for \\'Remove\\' in accessible diff viewer.'));\nconst accessibleDiffViewerCloseIcon = registerIcon('diff-review-close', Codicon.close, localize('accessibleDiffViewerCloseIcon', 'Icon for \\'Close\\' in accessible diff viewer.'));\nlet AccessibleDiffViewer = class AccessibleDiffViewer extends Disposable {\n  constructor(_parentNode, _visible, _setVisible, _canClose, _width, _height, _diffs, _models, _instantiationService) {\n    super();\n    this._parentNode = _parentNode;\n    this._visible = _visible;\n    this._setVisible = _setVisible;\n    this._canClose = _canClose;\n    this._width = _width;\n    this._height = _height;\n    this._diffs = _diffs;\n    this._models = _models;\n    this._instantiationService = _instantiationService;\n    this._state = derivedWithStore(this, (reader, store) => {\n      const visible = this._visible.read(reader);\n      this._parentNode.style.visibility = visible ? 'visible' : 'hidden';\n      if (!visible) {\n        return null;\n      }\n      const model = store.add(this._instantiationService.createInstance(ViewModel, this._diffs, this._models, this._setVisible, this._canClose));\n      const view = store.add(this._instantiationService.createInstance(View, this._parentNode, model, this._width, this._height, this._models));\n      return {\n        model,\n        view\n      };\n    }).recomputeInitiallyAndOnChange(this._store);\n  }\n  next() {\n    transaction(tx => {\n      const isVisible = this._visible.get();\n      this._setVisible(true, tx);\n      if (isVisible) {\n        this._state.get().model.nextGroup(tx);\n      }\n    });\n  }\n  prev() {\n    transaction(tx => {\n      this._setVisible(true, tx);\n      this._state.get().model.previousGroup(tx);\n    });\n  }\n  close() {\n    transaction(tx => {\n      this._setVisible(false, tx);\n    });\n  }\n};\nAccessibleDiffViewer._ttPolicy = createTrustedTypesPolicy('diffReview', {\n  createHTML: value => value\n});\nAccessibleDiffViewer = __decorate([__param(8, IInstantiationService)], AccessibleDiffViewer);\nexport { AccessibleDiffViewer };\nlet ViewModel = class ViewModel extends Disposable {\n  constructor(_diffs, _models, _setVisible, canClose, _accessibilitySignalService) {\n    super();\n    this._diffs = _diffs;\n    this._models = _models;\n    this._setVisible = _setVisible;\n    this.canClose = canClose;\n    this._accessibilitySignalService = _accessibilitySignalService;\n    this._groups = observableValue(this, []);\n    this._currentGroupIdx = observableValue(this, 0);\n    this._currentElementIdx = observableValue(this, 0);\n    this.groups = this._groups;\n    this.currentGroup = this._currentGroupIdx.map((idx, r) => this._groups.read(r)[idx]);\n    this.currentGroupIndex = this._currentGroupIdx;\n    this.currentElement = this._currentElementIdx.map((idx, r) => {\n      var _a;\n      return (_a = this.currentGroup.read(r)) === null || _a === void 0 ? void 0 : _a.lines[idx];\n    });\n    this._register(autorun(reader => {\n      /** @description update groups */\n      const diffs = this._diffs.read(reader);\n      if (!diffs) {\n        this._groups.set([], undefined);\n        return;\n      }\n      const groups = computeViewElementGroups(diffs, this._models.getOriginalModel().getLineCount(), this._models.getModifiedModel().getLineCount());\n      transaction(tx => {\n        const p = this._models.getModifiedPosition();\n        if (p) {\n          const nextGroup = groups.findIndex(g => (p === null || p === void 0 ? void 0 : p.lineNumber) < g.range.modified.endLineNumberExclusive);\n          if (nextGroup !== -1) {\n            this._currentGroupIdx.set(nextGroup, tx);\n          }\n        }\n        this._groups.set(groups, tx);\n      });\n    }));\n    this._register(autorun(reader => {\n      /** @description play audio-cue for diff */\n      const currentViewItem = this.currentElement.read(reader);\n      if ((currentViewItem === null || currentViewItem === void 0 ? void 0 : currentViewItem.type) === LineType.Deleted) {\n        this._accessibilitySignalService.playSignal(AccessibilitySignal.diffLineDeleted, {\n          source: 'accessibleDiffViewer.currentElementChanged'\n        });\n      } else if ((currentViewItem === null || currentViewItem === void 0 ? void 0 : currentViewItem.type) === LineType.Added) {\n        this._accessibilitySignalService.playSignal(AccessibilitySignal.diffLineInserted, {\n          source: 'accessibleDiffViewer.currentElementChanged'\n        });\n      }\n    }));\n    this._register(autorun(reader => {\n      var _a;\n      /** @description select lines in editor */\n      // This ensures editor commands (like revert/stage) work\n      const currentViewItem = this.currentElement.read(reader);\n      if (currentViewItem && currentViewItem.type !== LineType.Header) {\n        const lineNumber = (_a = currentViewItem.modifiedLineNumber) !== null && _a !== void 0 ? _a : currentViewItem.diff.modified.startLineNumber;\n        this._models.modifiedSetSelection(Range.fromPositions(new Position(lineNumber, 1)));\n      }\n    }));\n  }\n  _goToGroupDelta(delta, tx) {\n    const groups = this.groups.get();\n    if (!groups || groups.length <= 1) {\n      return;\n    }\n    subtransaction(tx, tx => {\n      this._currentGroupIdx.set(OffsetRange.ofLength(groups.length).clipCyclic(this._currentGroupIdx.get() + delta), tx);\n      this._currentElementIdx.set(0, tx);\n    });\n  }\n  nextGroup(tx) {\n    this._goToGroupDelta(1, tx);\n  }\n  previousGroup(tx) {\n    this._goToGroupDelta(-1, tx);\n  }\n  _goToLineDelta(delta) {\n    const group = this.currentGroup.get();\n    if (!group || group.lines.length <= 1) {\n      return;\n    }\n    transaction(tx => {\n      this._currentElementIdx.set(OffsetRange.ofLength(group.lines.length).clip(this._currentElementIdx.get() + delta), tx);\n    });\n  }\n  goToNextLine() {\n    this._goToLineDelta(1);\n  }\n  goToPreviousLine() {\n    this._goToLineDelta(-1);\n  }\n  goToLine(line) {\n    const group = this.currentGroup.get();\n    if (!group) {\n      return;\n    }\n    const idx = group.lines.indexOf(line);\n    if (idx === -1) {\n      return;\n    }\n    transaction(tx => {\n      this._currentElementIdx.set(idx, tx);\n    });\n  }\n  revealCurrentElementInEditor() {\n    if (!this.canClose.get()) {\n      return;\n    }\n    this._setVisible(false, undefined);\n    const curElem = this.currentElement.get();\n    if (curElem) {\n      if (curElem.type === LineType.Deleted) {\n        this._models.originalReveal(Range.fromPositions(new Position(curElem.originalLineNumber, 1)));\n      } else {\n        this._models.modifiedReveal(curElem.type !== LineType.Header ? Range.fromPositions(new Position(curElem.modifiedLineNumber, 1)) : undefined);\n      }\n    }\n  }\n  close() {\n    if (!this.canClose.get()) {\n      return;\n    }\n    this._setVisible(false, undefined);\n    this._models.modifiedFocus();\n  }\n};\nViewModel = __decorate([__param(4, IAccessibilitySignalService)], ViewModel);\nconst viewElementGroupLineMargin = 3;\nfunction computeViewElementGroups(diffs, originalLineCount, modifiedLineCount) {\n  const result = [];\n  for (const g of groupAdjacentBy(diffs, (a, b) => b.modified.startLineNumber - a.modified.endLineNumberExclusive < 2 * viewElementGroupLineMargin)) {\n    const viewElements = [];\n    viewElements.push(new HeaderViewElement());\n    const origFullRange = new LineRange(Math.max(1, g[0].original.startLineNumber - viewElementGroupLineMargin), Math.min(g[g.length - 1].original.endLineNumberExclusive + viewElementGroupLineMargin, originalLineCount + 1));\n    const modifiedFullRange = new LineRange(Math.max(1, g[0].modified.startLineNumber - viewElementGroupLineMargin), Math.min(g[g.length - 1].modified.endLineNumberExclusive + viewElementGroupLineMargin, modifiedLineCount + 1));\n    forEachAdjacent(g, (a, b) => {\n      const origRange = new LineRange(a ? a.original.endLineNumberExclusive : origFullRange.startLineNumber, b ? b.original.startLineNumber : origFullRange.endLineNumberExclusive);\n      const modifiedRange = new LineRange(a ? a.modified.endLineNumberExclusive : modifiedFullRange.startLineNumber, b ? b.modified.startLineNumber : modifiedFullRange.endLineNumberExclusive);\n      origRange.forEach(origLineNumber => {\n        viewElements.push(new UnchangedLineViewElement(origLineNumber, modifiedRange.startLineNumber + (origLineNumber - origRange.startLineNumber)));\n      });\n      if (b) {\n        b.original.forEach(origLineNumber => {\n          viewElements.push(new DeletedLineViewElement(b, origLineNumber));\n        });\n        b.modified.forEach(modifiedLineNumber => {\n          viewElements.push(new AddedLineViewElement(b, modifiedLineNumber));\n        });\n      }\n    });\n    const modifiedRange = g[0].modified.join(g[g.length - 1].modified);\n    const originalRange = g[0].original.join(g[g.length - 1].original);\n    result.push(new ViewElementGroup(new LineRangeMapping(modifiedRange, originalRange), viewElements));\n  }\n  return result;\n}\nvar LineType;\n(function (LineType) {\n  LineType[LineType[\"Header\"] = 0] = \"Header\";\n  LineType[LineType[\"Unchanged\"] = 1] = \"Unchanged\";\n  LineType[LineType[\"Deleted\"] = 2] = \"Deleted\";\n  LineType[LineType[\"Added\"] = 3] = \"Added\";\n})(LineType || (LineType = {}));\nclass ViewElementGroup {\n  constructor(range, lines) {\n    this.range = range;\n    this.lines = lines;\n  }\n}\nclass HeaderViewElement {\n  constructor() {\n    this.type = LineType.Header;\n  }\n}\nclass DeletedLineViewElement {\n  constructor(diff, originalLineNumber) {\n    this.diff = diff;\n    this.originalLineNumber = originalLineNumber;\n    this.type = LineType.Deleted;\n    this.modifiedLineNumber = undefined;\n  }\n}\nclass AddedLineViewElement {\n  constructor(diff, modifiedLineNumber) {\n    this.diff = diff;\n    this.modifiedLineNumber = modifiedLineNumber;\n    this.type = LineType.Added;\n    this.originalLineNumber = undefined;\n  }\n}\nclass UnchangedLineViewElement {\n  constructor(originalLineNumber, modifiedLineNumber) {\n    this.originalLineNumber = originalLineNumber;\n    this.modifiedLineNumber = modifiedLineNumber;\n    this.type = LineType.Unchanged;\n  }\n}\nlet View = class View extends Disposable {\n  constructor(_element, _model, _width, _height, _models, _languageService) {\n    super();\n    this._element = _element;\n    this._model = _model;\n    this._width = _width;\n    this._height = _height;\n    this._models = _models;\n    this._languageService = _languageService;\n    this.domNode = this._element;\n    this.domNode.className = 'monaco-component diff-review monaco-editor-background';\n    const actionBarContainer = document.createElement('div');\n    actionBarContainer.className = 'diff-review-actions';\n    this._actionBar = this._register(new ActionBar(actionBarContainer));\n    this._register(autorun(reader => {\n      /** @description update actions */\n      this._actionBar.clear();\n      if (this._model.canClose.read(reader)) {\n        this._actionBar.push(new Action('diffreview.close', localize('label.close', \"Close\"), 'close-diff-review ' + ThemeIcon.asClassName(accessibleDiffViewerCloseIcon), true, async () => _model.close()), {\n          label: false,\n          icon: true\n        });\n      }\n    }));\n    this._content = document.createElement('div');\n    this._content.className = 'diff-review-content';\n    this._content.setAttribute('role', 'code');\n    this._scrollbar = this._register(new DomScrollableElement(this._content, {}));\n    reset(this.domNode, this._scrollbar.getDomNode(), actionBarContainer);\n    this._register(autorun(r => {\n      this._height.read(r);\n      this._width.read(r);\n      this._scrollbar.scanDomNode();\n    }));\n    this._register(toDisposable(() => {\n      reset(this.domNode);\n    }));\n    this._register(applyStyle(this.domNode, {\n      width: this._width,\n      height: this._height\n    }));\n    this._register(applyStyle(this._content, {\n      width: this._width,\n      height: this._height\n    }));\n    this._register(autorunWithStore((reader, store) => {\n      /** @description render */\n      this._model.currentGroup.read(reader);\n      this._render(store);\n    }));\n    // TODO@hediet use commands\n    this._register(addStandardDisposableListener(this.domNode, 'keydown', e => {\n      if (e.equals(18 /* KeyCode.DownArrow */) || e.equals(2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */) || e.equals(512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */)) {\n        e.preventDefault();\n        this._model.goToNextLine();\n      }\n      if (e.equals(16 /* KeyCode.UpArrow */) || e.equals(2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */) || e.equals(512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */)) {\n        e.preventDefault();\n        this._model.goToPreviousLine();\n      }\n      if (e.equals(9 /* KeyCode.Escape */) || e.equals(2048 /* KeyMod.CtrlCmd */ | 9 /* KeyCode.Escape */) || e.equals(512 /* KeyMod.Alt */ | 9 /* KeyCode.Escape */) || e.equals(1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */)) {\n        e.preventDefault();\n        this._model.close();\n      }\n      if (e.equals(10 /* KeyCode.Space */) || e.equals(3 /* KeyCode.Enter */)) {\n        e.preventDefault();\n        this._model.revealCurrentElementInEditor();\n      }\n    }));\n  }\n  _render(store) {\n    const originalOptions = this._models.getOriginalOptions();\n    const modifiedOptions = this._models.getModifiedOptions();\n    const container = document.createElement('div');\n    container.className = 'diff-review-table';\n    container.setAttribute('role', 'list');\n    container.setAttribute('aria-label', localize('ariaLabel', 'Accessible Diff Viewer. Use arrow up and down to navigate.'));\n    applyFontInfo(container, modifiedOptions.get(50 /* EditorOption.fontInfo */));\n    reset(this._content, container);\n    const originalModel = this._models.getOriginalModel();\n    const modifiedModel = this._models.getModifiedModel();\n    if (!originalModel || !modifiedModel) {\n      return;\n    }\n    const originalModelOpts = originalModel.getOptions();\n    const modifiedModelOpts = modifiedModel.getOptions();\n    const lineHeight = modifiedOptions.get(67 /* EditorOption.lineHeight */);\n    const group = this._model.currentGroup.get();\n    for (const viewItem of (group === null || group === void 0 ? void 0 : group.lines) || []) {\n      if (!group) {\n        break;\n      }\n      let row;\n      if (viewItem.type === LineType.Header) {\n        const header = document.createElement('div');\n        header.className = 'diff-review-row';\n        header.setAttribute('role', 'listitem');\n        const r = group.range;\n        const diffIndex = this._model.currentGroupIndex.get();\n        const diffsLength = this._model.groups.get().length;\n        const getAriaLines = lines => lines === 0 ? localize('no_lines_changed', \"no lines changed\") : lines === 1 ? localize('one_line_changed', \"1 line changed\") : localize('more_lines_changed', \"{0} lines changed\", lines);\n        const originalChangedLinesCntAria = getAriaLines(r.original.length);\n        const modifiedChangedLinesCntAria = getAriaLines(r.modified.length);\n        header.setAttribute('aria-label', localize({\n          key: 'header',\n          comment: ['This is the ARIA label for a git diff header.', 'A git diff header looks like this: @@ -154,12 +159,39 @@.', 'That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.', 'Variables 0 and 1 refer to the diff index out of total number of diffs.', 'Variables 2 and 4 will be numbers (a line number).', 'Variables 3 and 5 will be \"no lines changed\", \"1 line changed\" or \"X lines changed\", localized separately.']\n        }, \"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}\", diffIndex + 1, diffsLength, r.original.startLineNumber, originalChangedLinesCntAria, r.modified.startLineNumber, modifiedChangedLinesCntAria));\n        const cell = document.createElement('div');\n        cell.className = 'diff-review-cell diff-review-summary';\n        // e.g.: `1/10: @@ -504,7 +517,7 @@`\n        cell.appendChild(document.createTextNode(`${diffIndex + 1}/${diffsLength}: @@ -${r.original.startLineNumber},${r.original.length} +${r.modified.startLineNumber},${r.modified.length} @@`));\n        header.appendChild(cell);\n        row = header;\n      } else {\n        row = this._createRow(viewItem, lineHeight, this._width.get(), originalOptions, originalModel, originalModelOpts, modifiedOptions, modifiedModel, modifiedModelOpts);\n      }\n      container.appendChild(row);\n      const isSelectedObs = derived(reader => /** @description isSelected */this._model.currentElement.read(reader) === viewItem);\n      store.add(autorun(reader => {\n        /** @description update tab index */\n        const isSelected = isSelectedObs.read(reader);\n        row.tabIndex = isSelected ? 0 : -1;\n        if (isSelected) {\n          row.focus();\n        }\n      }));\n      store.add(addDisposableListener(row, 'focus', () => {\n        this._model.goToLine(viewItem);\n      }));\n    }\n    this._scrollbar.scanDomNode();\n  }\n  _createRow(item, lineHeight, width, originalOptions, originalModel, originalModelOpts, modifiedOptions, modifiedModel, modifiedModelOpts) {\n    const originalLayoutInfo = originalOptions.get(145 /* EditorOption.layoutInfo */);\n    const originalLineNumbersWidth = originalLayoutInfo.glyphMarginWidth + originalLayoutInfo.lineNumbersWidth;\n    const modifiedLayoutInfo = modifiedOptions.get(145 /* EditorOption.layoutInfo */);\n    const modifiedLineNumbersWidth = 10 + modifiedLayoutInfo.glyphMarginWidth + modifiedLayoutInfo.lineNumbersWidth;\n    let rowClassName = 'diff-review-row';\n    let lineNumbersExtraClassName = '';\n    const spacerClassName = 'diff-review-spacer';\n    let spacerIcon = null;\n    switch (item.type) {\n      case LineType.Added:\n        rowClassName = 'diff-review-row line-insert';\n        lineNumbersExtraClassName = ' char-insert';\n        spacerIcon = accessibleDiffViewerInsertIcon;\n        break;\n      case LineType.Deleted:\n        rowClassName = 'diff-review-row line-delete';\n        lineNumbersExtraClassName = ' char-delete';\n        spacerIcon = accessibleDiffViewerRemoveIcon;\n        break;\n    }\n    const row = document.createElement('div');\n    row.style.minWidth = width + 'px';\n    row.className = rowClassName;\n    row.setAttribute('role', 'listitem');\n    row.ariaLevel = '';\n    const cell = document.createElement('div');\n    cell.className = 'diff-review-cell';\n    cell.style.height = `${lineHeight}px`;\n    row.appendChild(cell);\n    const originalLineNumber = document.createElement('span');\n    originalLineNumber.style.width = originalLineNumbersWidth + 'px';\n    originalLineNumber.style.minWidth = originalLineNumbersWidth + 'px';\n    originalLineNumber.className = 'diff-review-line-number' + lineNumbersExtraClassName;\n    if (item.originalLineNumber !== undefined) {\n      originalLineNumber.appendChild(document.createTextNode(String(item.originalLineNumber)));\n    } else {\n      originalLineNumber.innerText = '\\u00a0';\n    }\n    cell.appendChild(originalLineNumber);\n    const modifiedLineNumber = document.createElement('span');\n    modifiedLineNumber.style.width = modifiedLineNumbersWidth + 'px';\n    modifiedLineNumber.style.minWidth = modifiedLineNumbersWidth + 'px';\n    modifiedLineNumber.style.paddingRight = '10px';\n    modifiedLineNumber.className = 'diff-review-line-number' + lineNumbersExtraClassName;\n    if (item.modifiedLineNumber !== undefined) {\n      modifiedLineNumber.appendChild(document.createTextNode(String(item.modifiedLineNumber)));\n    } else {\n      modifiedLineNumber.innerText = '\\u00a0';\n    }\n    cell.appendChild(modifiedLineNumber);\n    const spacer = document.createElement('span');\n    spacer.className = spacerClassName;\n    if (spacerIcon) {\n      const spacerCodicon = document.createElement('span');\n      spacerCodicon.className = ThemeIcon.asClassName(spacerIcon);\n      spacerCodicon.innerText = '\\u00a0\\u00a0';\n      spacer.appendChild(spacerCodicon);\n    } else {\n      spacer.innerText = '\\u00a0\\u00a0';\n    }\n    cell.appendChild(spacer);\n    let lineContent;\n    if (item.modifiedLineNumber !== undefined) {\n      let html = this._getLineHtml(modifiedModel, modifiedOptions, modifiedModelOpts.tabSize, item.modifiedLineNumber, this._languageService.languageIdCodec);\n      if (AccessibleDiffViewer._ttPolicy) {\n        html = AccessibleDiffViewer._ttPolicy.createHTML(html);\n      }\n      cell.insertAdjacentHTML('beforeend', html);\n      lineContent = modifiedModel.getLineContent(item.modifiedLineNumber);\n    } else {\n      let html = this._getLineHtml(originalModel, originalOptions, originalModelOpts.tabSize, item.originalLineNumber, this._languageService.languageIdCodec);\n      if (AccessibleDiffViewer._ttPolicy) {\n        html = AccessibleDiffViewer._ttPolicy.createHTML(html);\n      }\n      cell.insertAdjacentHTML('beforeend', html);\n      lineContent = originalModel.getLineContent(item.originalLineNumber);\n    }\n    if (lineContent.length === 0) {\n      lineContent = localize('blankLine', \"blank\");\n    }\n    let ariaLabel = '';\n    switch (item.type) {\n      case LineType.Unchanged:\n        if (item.originalLineNumber === item.modifiedLineNumber) {\n          ariaLabel = localize({\n            key: 'unchangedLine',\n            comment: ['The placeholders are contents of the line and should not be translated.']\n          }, \"{0} unchanged line {1}\", lineContent, item.originalLineNumber);\n        } else {\n          ariaLabel = localize('equalLine', \"{0} original line {1} modified line {2}\", lineContent, item.originalLineNumber, item.modifiedLineNumber);\n        }\n        break;\n      case LineType.Added:\n        ariaLabel = localize('insertLine', \"+ {0} modified line {1}\", lineContent, item.modifiedLineNumber);\n        break;\n      case LineType.Deleted:\n        ariaLabel = localize('deleteLine', \"- {0} original line {1}\", lineContent, item.originalLineNumber);\n        break;\n    }\n    row.setAttribute('aria-label', ariaLabel);\n    return row;\n  }\n  _getLineHtml(model, options, tabSize, lineNumber, languageIdCodec) {\n    const lineContent = model.getLineContent(lineNumber);\n    const fontInfo = options.get(50 /* EditorOption.fontInfo */);\n    const lineTokens = LineTokens.createEmpty(lineContent, languageIdCodec);\n    const isBasicASCII = ViewLineRenderingData.isBasicASCII(lineContent, model.mightContainNonBasicASCII());\n    const containsRTL = ViewLineRenderingData.containsRTL(lineContent, isBasicASCII, model.mightContainRTL());\n    const r = renderViewLine2(new RenderLineInput(fontInfo.isMonospace && !options.get(33 /* EditorOption.disableMonospaceOptimizations */), fontInfo.canUseHalfwidthRightwardsArrow, lineContent, false, isBasicASCII, containsRTL, 0, lineTokens, [], tabSize, 0, fontInfo.spaceWidth, fontInfo.middotWidth, fontInfo.wsmiddotWidth, options.get(117 /* EditorOption.stopRenderingLineAfter */), options.get(99 /* EditorOption.renderWhitespace */), options.get(94 /* EditorOption.renderControlCharacters */), options.get(51 /* EditorOption.fontLigatures */) !== EditorFontLigatures.OFF, null));\n    return r.html;\n  }\n};\nView = __decorate([__param(5, ILanguageService)], View);\nexport class AccessibleDiffViewerModelFromEditors {\n  constructor(editors) {\n    this.editors = editors;\n  }\n  getOriginalModel() {\n    return this.editors.original.getModel();\n  }\n  getOriginalOptions() {\n    return this.editors.original.getOptions();\n  }\n  originalReveal(range) {\n    this.editors.original.revealRange(range);\n    this.editors.original.setSelection(range);\n    this.editors.original.focus();\n  }\n  getModifiedModel() {\n    return this.editors.modified.getModel();\n  }\n  getModifiedOptions() {\n    return this.editors.modified.getOptions();\n  }\n  modifiedReveal(range) {\n    if (range) {\n      this.editors.modified.revealRange(range);\n      this.editors.modified.setSelection(range);\n    }\n    this.editors.modified.focus();\n  }\n  modifiedSetSelection(range) {\n    this.editors.modified.setSelection(range);\n  }\n  modifiedFocus() {\n    this.editors.modified.focus();\n  }\n  getModifiedPosition() {\n    var _a;\n    return (_a = this.editors.modified.getPosition()) !== null && _a !== void 0 ? _a : undefined;\n  }\n}","map":{"version":3,"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","addDisposableListener","addStandardDisposableListener","reset","createTrustedTypesPolicy","ActionBar","DomScrollableElement","Action","forEachAdjacent","groupAdjacentBy","Codicon","Disposable","toDisposable","autorun","autorunWithStore","derived","derivedWithStore","observableValue","subtransaction","transaction","ThemeIcon","applyFontInfo","applyStyle","EditorFontLigatures","LineRange","OffsetRange","Position","Range","LineRangeMapping","ILanguageService","LineTokens","RenderLineInput","renderViewLine2","ViewLineRenderingData","localize","AccessibilitySignal","IAccessibilitySignalService","IInstantiationService","registerIcon","accessibleDiffViewerInsertIcon","add","accessibleDiffViewerRemoveIcon","remove","accessibleDiffViewerCloseIcon","close","AccessibleDiffViewer","constructor","_parentNode","_visible","_setVisible","_canClose","_width","_height","_diffs","_models","_instantiationService","_state","reader","store","visible","read","style","visibility","model","createInstance","ViewModel","view","View","recomputeInitiallyAndOnChange","_store","next","tx","isVisible","get","nextGroup","prev","previousGroup","_ttPolicy","createHTML","value","canClose","_accessibilitySignalService","_groups","_currentGroupIdx","_currentElementIdx","groups","currentGroup","map","idx","currentGroupIndex","currentElement","_a","lines","_register","diffs","set","undefined","computeViewElementGroups","getOriginalModel","getLineCount","getModifiedModel","p","getModifiedPosition","findIndex","g","lineNumber","range","modified","endLineNumberExclusive","currentViewItem","type","LineType","Deleted","playSignal","diffLineDeleted","source","Added","diffLineInserted","Header","modifiedLineNumber","diff","startLineNumber","modifiedSetSelection","fromPositions","_goToGroupDelta","delta","ofLength","clipCyclic","_goToLineDelta","group","clip","goToNextLine","goToPreviousLine","goToLine","line","indexOf","revealCurrentElementInEditor","curElem","originalReveal","originalLineNumber","modifiedReveal","modifiedFocus","viewElementGroupLineMargin","originalLineCount","modifiedLineCount","result","a","b","viewElements","push","HeaderViewElement","origFullRange","Math","max","original","min","modifiedFullRange","origRange","modifiedRange","forEach","origLineNumber","UnchangedLineViewElement","DeletedLineViewElement","AddedLineViewElement","join","originalRange","ViewElementGroup","Unchanged","_element","_model","_languageService","domNode","className","actionBarContainer","document","createElement","_actionBar","clear","asClassName","label","icon","_content","setAttribute","_scrollbar","getDomNode","scanDomNode","width","height","_render","e","equals","preventDefault","originalOptions","getOriginalOptions","modifiedOptions","getModifiedOptions","container","originalModel","modifiedModel","originalModelOpts","getOptions","modifiedModelOpts","lineHeight","viewItem","row","header","diffIndex","diffsLength","getAriaLines","originalChangedLinesCntAria","modifiedChangedLinesCntAria","comment","cell","appendChild","createTextNode","_createRow","isSelectedObs","isSelected","tabIndex","focus","item","originalLayoutInfo","originalLineNumbersWidth","glyphMarginWidth","lineNumbersWidth","modifiedLayoutInfo","modifiedLineNumbersWidth","rowClassName","lineNumbersExtraClassName","spacerClassName","spacerIcon","minWidth","ariaLevel","String","innerText","paddingRight","spacer","spacerCodicon","lineContent","html","_getLineHtml","tabSize","languageIdCodec","insertAdjacentHTML","getLineContent","ariaLabel","options","fontInfo","lineTokens","createEmpty","isBasicASCII","mightContainNonBasicASCII","containsRTL","mightContainRTL","isMonospace","canUseHalfwidthRightwardsArrow","spaceWidth","middotWidth","wsmiddotWidth","OFF","AccessibleDiffViewerModelFromEditors","editors","getModel","revealRange","setSelection","getPosition"],"sources":["/home/arslan/modojo/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/components/accessibleDiffViewer.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { addDisposableListener, addStandardDisposableListener, reset } from '../../../../../base/browser/dom.js';\nimport { createTrustedTypesPolicy } from '../../../../../base/browser/trustedTypes.js';\nimport { ActionBar } from '../../../../../base/browser/ui/actionbar/actionbar.js';\nimport { DomScrollableElement } from '../../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { Action } from '../../../../../base/common/actions.js';\nimport { forEachAdjacent, groupAdjacentBy } from '../../../../../base/common/arrays.js';\nimport { Codicon } from '../../../../../base/common/codicons.js';\nimport { Disposable, toDisposable } from '../../../../../base/common/lifecycle.js';\nimport { autorun, autorunWithStore, derived, derivedWithStore, observableValue, subtransaction, transaction } from '../../../../../base/common/observable.js';\nimport { ThemeIcon } from '../../../../../base/common/themables.js';\nimport { applyFontInfo } from '../../../config/domFontInfo.js';\nimport { applyStyle } from '../utils.js';\nimport { EditorFontLigatures } from '../../../../common/config/editorOptions.js';\nimport { LineRange } from '../../../../common/core/lineRange.js';\nimport { OffsetRange } from '../../../../common/core/offsetRange.js';\nimport { Position } from '../../../../common/core/position.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { LineRangeMapping } from '../../../../common/diff/rangeMapping.js';\nimport { ILanguageService } from '../../../../common/languages/language.js';\nimport { LineTokens } from '../../../../common/tokens/lineTokens.js';\nimport { RenderLineInput, renderViewLine2 } from '../../../../common/viewLayout/viewLineRenderer.js';\nimport { ViewLineRenderingData } from '../../../../common/viewModel.js';\nimport { localize } from '../../../../../nls.js';\nimport { AccessibilitySignal, IAccessibilitySignalService } from '../../../../../platform/accessibilitySignal/browser/accessibilitySignalService.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { registerIcon } from '../../../../../platform/theme/common/iconRegistry.js';\nimport './accessibleDiffViewer.css';\nconst accessibleDiffViewerInsertIcon = registerIcon('diff-review-insert', Codicon.add, localize('accessibleDiffViewerInsertIcon', 'Icon for \\'Insert\\' in accessible diff viewer.'));\nconst accessibleDiffViewerRemoveIcon = registerIcon('diff-review-remove', Codicon.remove, localize('accessibleDiffViewerRemoveIcon', 'Icon for \\'Remove\\' in accessible diff viewer.'));\nconst accessibleDiffViewerCloseIcon = registerIcon('diff-review-close', Codicon.close, localize('accessibleDiffViewerCloseIcon', 'Icon for \\'Close\\' in accessible diff viewer.'));\nlet AccessibleDiffViewer = class AccessibleDiffViewer extends Disposable {\n    constructor(_parentNode, _visible, _setVisible, _canClose, _width, _height, _diffs, _models, _instantiationService) {\n        super();\n        this._parentNode = _parentNode;\n        this._visible = _visible;\n        this._setVisible = _setVisible;\n        this._canClose = _canClose;\n        this._width = _width;\n        this._height = _height;\n        this._diffs = _diffs;\n        this._models = _models;\n        this._instantiationService = _instantiationService;\n        this._state = derivedWithStore(this, (reader, store) => {\n            const visible = this._visible.read(reader);\n            this._parentNode.style.visibility = visible ? 'visible' : 'hidden';\n            if (!visible) {\n                return null;\n            }\n            const model = store.add(this._instantiationService.createInstance(ViewModel, this._diffs, this._models, this._setVisible, this._canClose));\n            const view = store.add(this._instantiationService.createInstance(View, this._parentNode, model, this._width, this._height, this._models));\n            return { model, view, };\n        }).recomputeInitiallyAndOnChange(this._store);\n    }\n    next() {\n        transaction(tx => {\n            const isVisible = this._visible.get();\n            this._setVisible(true, tx);\n            if (isVisible) {\n                this._state.get().model.nextGroup(tx);\n            }\n        });\n    }\n    prev() {\n        transaction(tx => {\n            this._setVisible(true, tx);\n            this._state.get().model.previousGroup(tx);\n        });\n    }\n    close() {\n        transaction(tx => {\n            this._setVisible(false, tx);\n        });\n    }\n};\nAccessibleDiffViewer._ttPolicy = createTrustedTypesPolicy('diffReview', { createHTML: value => value });\nAccessibleDiffViewer = __decorate([\n    __param(8, IInstantiationService)\n], AccessibleDiffViewer);\nexport { AccessibleDiffViewer };\nlet ViewModel = class ViewModel extends Disposable {\n    constructor(_diffs, _models, _setVisible, canClose, _accessibilitySignalService) {\n        super();\n        this._diffs = _diffs;\n        this._models = _models;\n        this._setVisible = _setVisible;\n        this.canClose = canClose;\n        this._accessibilitySignalService = _accessibilitySignalService;\n        this._groups = observableValue(this, []);\n        this._currentGroupIdx = observableValue(this, 0);\n        this._currentElementIdx = observableValue(this, 0);\n        this.groups = this._groups;\n        this.currentGroup = this._currentGroupIdx.map((idx, r) => this._groups.read(r)[idx]);\n        this.currentGroupIndex = this._currentGroupIdx;\n        this.currentElement = this._currentElementIdx.map((idx, r) => { var _a; return (_a = this.currentGroup.read(r)) === null || _a === void 0 ? void 0 : _a.lines[idx]; });\n        this._register(autorun(reader => {\n            /** @description update groups */\n            const diffs = this._diffs.read(reader);\n            if (!diffs) {\n                this._groups.set([], undefined);\n                return;\n            }\n            const groups = computeViewElementGroups(diffs, this._models.getOriginalModel().getLineCount(), this._models.getModifiedModel().getLineCount());\n            transaction(tx => {\n                const p = this._models.getModifiedPosition();\n                if (p) {\n                    const nextGroup = groups.findIndex(g => (p === null || p === void 0 ? void 0 : p.lineNumber) < g.range.modified.endLineNumberExclusive);\n                    if (nextGroup !== -1) {\n                        this._currentGroupIdx.set(nextGroup, tx);\n                    }\n                }\n                this._groups.set(groups, tx);\n            });\n        }));\n        this._register(autorun(reader => {\n            /** @description play audio-cue for diff */\n            const currentViewItem = this.currentElement.read(reader);\n            if ((currentViewItem === null || currentViewItem === void 0 ? void 0 : currentViewItem.type) === LineType.Deleted) {\n                this._accessibilitySignalService.playSignal(AccessibilitySignal.diffLineDeleted, { source: 'accessibleDiffViewer.currentElementChanged' });\n            }\n            else if ((currentViewItem === null || currentViewItem === void 0 ? void 0 : currentViewItem.type) === LineType.Added) {\n                this._accessibilitySignalService.playSignal(AccessibilitySignal.diffLineInserted, { source: 'accessibleDiffViewer.currentElementChanged' });\n            }\n        }));\n        this._register(autorun(reader => {\n            var _a;\n            /** @description select lines in editor */\n            // This ensures editor commands (like revert/stage) work\n            const currentViewItem = this.currentElement.read(reader);\n            if (currentViewItem && currentViewItem.type !== LineType.Header) {\n                const lineNumber = (_a = currentViewItem.modifiedLineNumber) !== null && _a !== void 0 ? _a : currentViewItem.diff.modified.startLineNumber;\n                this._models.modifiedSetSelection(Range.fromPositions(new Position(lineNumber, 1)));\n            }\n        }));\n    }\n    _goToGroupDelta(delta, tx) {\n        const groups = this.groups.get();\n        if (!groups || groups.length <= 1) {\n            return;\n        }\n        subtransaction(tx, tx => {\n            this._currentGroupIdx.set(OffsetRange.ofLength(groups.length).clipCyclic(this._currentGroupIdx.get() + delta), tx);\n            this._currentElementIdx.set(0, tx);\n        });\n    }\n    nextGroup(tx) { this._goToGroupDelta(1, tx); }\n    previousGroup(tx) { this._goToGroupDelta(-1, tx); }\n    _goToLineDelta(delta) {\n        const group = this.currentGroup.get();\n        if (!group || group.lines.length <= 1) {\n            return;\n        }\n        transaction(tx => {\n            this._currentElementIdx.set(OffsetRange.ofLength(group.lines.length).clip(this._currentElementIdx.get() + delta), tx);\n        });\n    }\n    goToNextLine() { this._goToLineDelta(1); }\n    goToPreviousLine() { this._goToLineDelta(-1); }\n    goToLine(line) {\n        const group = this.currentGroup.get();\n        if (!group) {\n            return;\n        }\n        const idx = group.lines.indexOf(line);\n        if (idx === -1) {\n            return;\n        }\n        transaction(tx => {\n            this._currentElementIdx.set(idx, tx);\n        });\n    }\n    revealCurrentElementInEditor() {\n        if (!this.canClose.get()) {\n            return;\n        }\n        this._setVisible(false, undefined);\n        const curElem = this.currentElement.get();\n        if (curElem) {\n            if (curElem.type === LineType.Deleted) {\n                this._models.originalReveal(Range.fromPositions(new Position(curElem.originalLineNumber, 1)));\n            }\n            else {\n                this._models.modifiedReveal(curElem.type !== LineType.Header\n                    ? Range.fromPositions(new Position(curElem.modifiedLineNumber, 1))\n                    : undefined);\n            }\n        }\n    }\n    close() {\n        if (!this.canClose.get()) {\n            return;\n        }\n        this._setVisible(false, undefined);\n        this._models.modifiedFocus();\n    }\n};\nViewModel = __decorate([\n    __param(4, IAccessibilitySignalService)\n], ViewModel);\nconst viewElementGroupLineMargin = 3;\nfunction computeViewElementGroups(diffs, originalLineCount, modifiedLineCount) {\n    const result = [];\n    for (const g of groupAdjacentBy(diffs, (a, b) => (b.modified.startLineNumber - a.modified.endLineNumberExclusive < 2 * viewElementGroupLineMargin))) {\n        const viewElements = [];\n        viewElements.push(new HeaderViewElement());\n        const origFullRange = new LineRange(Math.max(1, g[0].original.startLineNumber - viewElementGroupLineMargin), Math.min(g[g.length - 1].original.endLineNumberExclusive + viewElementGroupLineMargin, originalLineCount + 1));\n        const modifiedFullRange = new LineRange(Math.max(1, g[0].modified.startLineNumber - viewElementGroupLineMargin), Math.min(g[g.length - 1].modified.endLineNumberExclusive + viewElementGroupLineMargin, modifiedLineCount + 1));\n        forEachAdjacent(g, (a, b) => {\n            const origRange = new LineRange(a ? a.original.endLineNumberExclusive : origFullRange.startLineNumber, b ? b.original.startLineNumber : origFullRange.endLineNumberExclusive);\n            const modifiedRange = new LineRange(a ? a.modified.endLineNumberExclusive : modifiedFullRange.startLineNumber, b ? b.modified.startLineNumber : modifiedFullRange.endLineNumberExclusive);\n            origRange.forEach(origLineNumber => {\n                viewElements.push(new UnchangedLineViewElement(origLineNumber, modifiedRange.startLineNumber + (origLineNumber - origRange.startLineNumber)));\n            });\n            if (b) {\n                b.original.forEach(origLineNumber => {\n                    viewElements.push(new DeletedLineViewElement(b, origLineNumber));\n                });\n                b.modified.forEach(modifiedLineNumber => {\n                    viewElements.push(new AddedLineViewElement(b, modifiedLineNumber));\n                });\n            }\n        });\n        const modifiedRange = g[0].modified.join(g[g.length - 1].modified);\n        const originalRange = g[0].original.join(g[g.length - 1].original);\n        result.push(new ViewElementGroup(new LineRangeMapping(modifiedRange, originalRange), viewElements));\n    }\n    return result;\n}\nvar LineType;\n(function (LineType) {\n    LineType[LineType[\"Header\"] = 0] = \"Header\";\n    LineType[LineType[\"Unchanged\"] = 1] = \"Unchanged\";\n    LineType[LineType[\"Deleted\"] = 2] = \"Deleted\";\n    LineType[LineType[\"Added\"] = 3] = \"Added\";\n})(LineType || (LineType = {}));\nclass ViewElementGroup {\n    constructor(range, lines) {\n        this.range = range;\n        this.lines = lines;\n    }\n}\nclass HeaderViewElement {\n    constructor() {\n        this.type = LineType.Header;\n    }\n}\nclass DeletedLineViewElement {\n    constructor(diff, originalLineNumber) {\n        this.diff = diff;\n        this.originalLineNumber = originalLineNumber;\n        this.type = LineType.Deleted;\n        this.modifiedLineNumber = undefined;\n    }\n}\nclass AddedLineViewElement {\n    constructor(diff, modifiedLineNumber) {\n        this.diff = diff;\n        this.modifiedLineNumber = modifiedLineNumber;\n        this.type = LineType.Added;\n        this.originalLineNumber = undefined;\n    }\n}\nclass UnchangedLineViewElement {\n    constructor(originalLineNumber, modifiedLineNumber) {\n        this.originalLineNumber = originalLineNumber;\n        this.modifiedLineNumber = modifiedLineNumber;\n        this.type = LineType.Unchanged;\n    }\n}\nlet View = class View extends Disposable {\n    constructor(_element, _model, _width, _height, _models, _languageService) {\n        super();\n        this._element = _element;\n        this._model = _model;\n        this._width = _width;\n        this._height = _height;\n        this._models = _models;\n        this._languageService = _languageService;\n        this.domNode = this._element;\n        this.domNode.className = 'monaco-component diff-review monaco-editor-background';\n        const actionBarContainer = document.createElement('div');\n        actionBarContainer.className = 'diff-review-actions';\n        this._actionBar = this._register(new ActionBar(actionBarContainer));\n        this._register(autorun(reader => {\n            /** @description update actions */\n            this._actionBar.clear();\n            if (this._model.canClose.read(reader)) {\n                this._actionBar.push(new Action('diffreview.close', localize('label.close', \"Close\"), 'close-diff-review ' + ThemeIcon.asClassName(accessibleDiffViewerCloseIcon), true, async () => _model.close()), { label: false, icon: true });\n            }\n        }));\n        this._content = document.createElement('div');\n        this._content.className = 'diff-review-content';\n        this._content.setAttribute('role', 'code');\n        this._scrollbar = this._register(new DomScrollableElement(this._content, {}));\n        reset(this.domNode, this._scrollbar.getDomNode(), actionBarContainer);\n        this._register(autorun(r => {\n            this._height.read(r);\n            this._width.read(r);\n            this._scrollbar.scanDomNode();\n        }));\n        this._register(toDisposable(() => { reset(this.domNode); }));\n        this._register(applyStyle(this.domNode, { width: this._width, height: this._height }));\n        this._register(applyStyle(this._content, { width: this._width, height: this._height }));\n        this._register(autorunWithStore((reader, store) => {\n            /** @description render */\n            this._model.currentGroup.read(reader);\n            this._render(store);\n        }));\n        // TODO@hediet use commands\n        this._register(addStandardDisposableListener(this.domNode, 'keydown', (e) => {\n            if (e.equals(18 /* KeyCode.DownArrow */)\n                || e.equals(2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */)\n                || e.equals(512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */)) {\n                e.preventDefault();\n                this._model.goToNextLine();\n            }\n            if (e.equals(16 /* KeyCode.UpArrow */)\n                || e.equals(2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */)\n                || e.equals(512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */)) {\n                e.preventDefault();\n                this._model.goToPreviousLine();\n            }\n            if (e.equals(9 /* KeyCode.Escape */)\n                || e.equals(2048 /* KeyMod.CtrlCmd */ | 9 /* KeyCode.Escape */)\n                || e.equals(512 /* KeyMod.Alt */ | 9 /* KeyCode.Escape */)\n                || e.equals(1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */)) {\n                e.preventDefault();\n                this._model.close();\n            }\n            if (e.equals(10 /* KeyCode.Space */)\n                || e.equals(3 /* KeyCode.Enter */)) {\n                e.preventDefault();\n                this._model.revealCurrentElementInEditor();\n            }\n        }));\n    }\n    _render(store) {\n        const originalOptions = this._models.getOriginalOptions();\n        const modifiedOptions = this._models.getModifiedOptions();\n        const container = document.createElement('div');\n        container.className = 'diff-review-table';\n        container.setAttribute('role', 'list');\n        container.setAttribute('aria-label', localize('ariaLabel', 'Accessible Diff Viewer. Use arrow up and down to navigate.'));\n        applyFontInfo(container, modifiedOptions.get(50 /* EditorOption.fontInfo */));\n        reset(this._content, container);\n        const originalModel = this._models.getOriginalModel();\n        const modifiedModel = this._models.getModifiedModel();\n        if (!originalModel || !modifiedModel) {\n            return;\n        }\n        const originalModelOpts = originalModel.getOptions();\n        const modifiedModelOpts = modifiedModel.getOptions();\n        const lineHeight = modifiedOptions.get(67 /* EditorOption.lineHeight */);\n        const group = this._model.currentGroup.get();\n        for (const viewItem of (group === null || group === void 0 ? void 0 : group.lines) || []) {\n            if (!group) {\n                break;\n            }\n            let row;\n            if (viewItem.type === LineType.Header) {\n                const header = document.createElement('div');\n                header.className = 'diff-review-row';\n                header.setAttribute('role', 'listitem');\n                const r = group.range;\n                const diffIndex = this._model.currentGroupIndex.get();\n                const diffsLength = this._model.groups.get().length;\n                const getAriaLines = (lines) => lines === 0 ? localize('no_lines_changed', \"no lines changed\")\n                    : lines === 1 ? localize('one_line_changed', \"1 line changed\")\n                        : localize('more_lines_changed', \"{0} lines changed\", lines);\n                const originalChangedLinesCntAria = getAriaLines(r.original.length);\n                const modifiedChangedLinesCntAria = getAriaLines(r.modified.length);\n                header.setAttribute('aria-label', localize({\n                    key: 'header',\n                    comment: [\n                        'This is the ARIA label for a git diff header.',\n                        'A git diff header looks like this: @@ -154,12 +159,39 @@.',\n                        'That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.',\n                        'Variables 0 and 1 refer to the diff index out of total number of diffs.',\n                        'Variables 2 and 4 will be numbers (a line number).',\n                        'Variables 3 and 5 will be \"no lines changed\", \"1 line changed\" or \"X lines changed\", localized separately.'\n                    ]\n                }, \"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}\", (diffIndex + 1), diffsLength, r.original.startLineNumber, originalChangedLinesCntAria, r.modified.startLineNumber, modifiedChangedLinesCntAria));\n                const cell = document.createElement('div');\n                cell.className = 'diff-review-cell diff-review-summary';\n                // e.g.: `1/10: @@ -504,7 +517,7 @@`\n                cell.appendChild(document.createTextNode(`${diffIndex + 1}/${diffsLength}: @@ -${r.original.startLineNumber},${r.original.length} +${r.modified.startLineNumber},${r.modified.length} @@`));\n                header.appendChild(cell);\n                row = header;\n            }\n            else {\n                row = this._createRow(viewItem, lineHeight, this._width.get(), originalOptions, originalModel, originalModelOpts, modifiedOptions, modifiedModel, modifiedModelOpts);\n            }\n            container.appendChild(row);\n            const isSelectedObs = derived(reader => /** @description isSelected */ this._model.currentElement.read(reader) === viewItem);\n            store.add(autorun(reader => {\n                /** @description update tab index */\n                const isSelected = isSelectedObs.read(reader);\n                row.tabIndex = isSelected ? 0 : -1;\n                if (isSelected) {\n                    row.focus();\n                }\n            }));\n            store.add(addDisposableListener(row, 'focus', () => {\n                this._model.goToLine(viewItem);\n            }));\n        }\n        this._scrollbar.scanDomNode();\n    }\n    _createRow(item, lineHeight, width, originalOptions, originalModel, originalModelOpts, modifiedOptions, modifiedModel, modifiedModelOpts) {\n        const originalLayoutInfo = originalOptions.get(145 /* EditorOption.layoutInfo */);\n        const originalLineNumbersWidth = originalLayoutInfo.glyphMarginWidth + originalLayoutInfo.lineNumbersWidth;\n        const modifiedLayoutInfo = modifiedOptions.get(145 /* EditorOption.layoutInfo */);\n        const modifiedLineNumbersWidth = 10 + modifiedLayoutInfo.glyphMarginWidth + modifiedLayoutInfo.lineNumbersWidth;\n        let rowClassName = 'diff-review-row';\n        let lineNumbersExtraClassName = '';\n        const spacerClassName = 'diff-review-spacer';\n        let spacerIcon = null;\n        switch (item.type) {\n            case LineType.Added:\n                rowClassName = 'diff-review-row line-insert';\n                lineNumbersExtraClassName = ' char-insert';\n                spacerIcon = accessibleDiffViewerInsertIcon;\n                break;\n            case LineType.Deleted:\n                rowClassName = 'diff-review-row line-delete';\n                lineNumbersExtraClassName = ' char-delete';\n                spacerIcon = accessibleDiffViewerRemoveIcon;\n                break;\n        }\n        const row = document.createElement('div');\n        row.style.minWidth = width + 'px';\n        row.className = rowClassName;\n        row.setAttribute('role', 'listitem');\n        row.ariaLevel = '';\n        const cell = document.createElement('div');\n        cell.className = 'diff-review-cell';\n        cell.style.height = `${lineHeight}px`;\n        row.appendChild(cell);\n        const originalLineNumber = document.createElement('span');\n        originalLineNumber.style.width = (originalLineNumbersWidth + 'px');\n        originalLineNumber.style.minWidth = (originalLineNumbersWidth + 'px');\n        originalLineNumber.className = 'diff-review-line-number' + lineNumbersExtraClassName;\n        if (item.originalLineNumber !== undefined) {\n            originalLineNumber.appendChild(document.createTextNode(String(item.originalLineNumber)));\n        }\n        else {\n            originalLineNumber.innerText = '\\u00a0';\n        }\n        cell.appendChild(originalLineNumber);\n        const modifiedLineNumber = document.createElement('span');\n        modifiedLineNumber.style.width = (modifiedLineNumbersWidth + 'px');\n        modifiedLineNumber.style.minWidth = (modifiedLineNumbersWidth + 'px');\n        modifiedLineNumber.style.paddingRight = '10px';\n        modifiedLineNumber.className = 'diff-review-line-number' + lineNumbersExtraClassName;\n        if (item.modifiedLineNumber !== undefined) {\n            modifiedLineNumber.appendChild(document.createTextNode(String(item.modifiedLineNumber)));\n        }\n        else {\n            modifiedLineNumber.innerText = '\\u00a0';\n        }\n        cell.appendChild(modifiedLineNumber);\n        const spacer = document.createElement('span');\n        spacer.className = spacerClassName;\n        if (spacerIcon) {\n            const spacerCodicon = document.createElement('span');\n            spacerCodicon.className = ThemeIcon.asClassName(spacerIcon);\n            spacerCodicon.innerText = '\\u00a0\\u00a0';\n            spacer.appendChild(spacerCodicon);\n        }\n        else {\n            spacer.innerText = '\\u00a0\\u00a0';\n        }\n        cell.appendChild(spacer);\n        let lineContent;\n        if (item.modifiedLineNumber !== undefined) {\n            let html = this._getLineHtml(modifiedModel, modifiedOptions, modifiedModelOpts.tabSize, item.modifiedLineNumber, this._languageService.languageIdCodec);\n            if (AccessibleDiffViewer._ttPolicy) {\n                html = AccessibleDiffViewer._ttPolicy.createHTML(html);\n            }\n            cell.insertAdjacentHTML('beforeend', html);\n            lineContent = modifiedModel.getLineContent(item.modifiedLineNumber);\n        }\n        else {\n            let html = this._getLineHtml(originalModel, originalOptions, originalModelOpts.tabSize, item.originalLineNumber, this._languageService.languageIdCodec);\n            if (AccessibleDiffViewer._ttPolicy) {\n                html = AccessibleDiffViewer._ttPolicy.createHTML(html);\n            }\n            cell.insertAdjacentHTML('beforeend', html);\n            lineContent = originalModel.getLineContent(item.originalLineNumber);\n        }\n        if (lineContent.length === 0) {\n            lineContent = localize('blankLine', \"blank\");\n        }\n        let ariaLabel = '';\n        switch (item.type) {\n            case LineType.Unchanged:\n                if (item.originalLineNumber === item.modifiedLineNumber) {\n                    ariaLabel = localize({ key: 'unchangedLine', comment: ['The placeholders are contents of the line and should not be translated.'] }, \"{0} unchanged line {1}\", lineContent, item.originalLineNumber);\n                }\n                else {\n                    ariaLabel = localize('equalLine', \"{0} original line {1} modified line {2}\", lineContent, item.originalLineNumber, item.modifiedLineNumber);\n                }\n                break;\n            case LineType.Added:\n                ariaLabel = localize('insertLine', \"+ {0} modified line {1}\", lineContent, item.modifiedLineNumber);\n                break;\n            case LineType.Deleted:\n                ariaLabel = localize('deleteLine', \"- {0} original line {1}\", lineContent, item.originalLineNumber);\n                break;\n        }\n        row.setAttribute('aria-label', ariaLabel);\n        return row;\n    }\n    _getLineHtml(model, options, tabSize, lineNumber, languageIdCodec) {\n        const lineContent = model.getLineContent(lineNumber);\n        const fontInfo = options.get(50 /* EditorOption.fontInfo */);\n        const lineTokens = LineTokens.createEmpty(lineContent, languageIdCodec);\n        const isBasicASCII = ViewLineRenderingData.isBasicASCII(lineContent, model.mightContainNonBasicASCII());\n        const containsRTL = ViewLineRenderingData.containsRTL(lineContent, isBasicASCII, model.mightContainRTL());\n        const r = renderViewLine2(new RenderLineInput((fontInfo.isMonospace && !options.get(33 /* EditorOption.disableMonospaceOptimizations */)), fontInfo.canUseHalfwidthRightwardsArrow, lineContent, false, isBasicASCII, containsRTL, 0, lineTokens, [], tabSize, 0, fontInfo.spaceWidth, fontInfo.middotWidth, fontInfo.wsmiddotWidth, options.get(117 /* EditorOption.stopRenderingLineAfter */), options.get(99 /* EditorOption.renderWhitespace */), options.get(94 /* EditorOption.renderControlCharacters */), options.get(51 /* EditorOption.fontLigatures */) !== EditorFontLigatures.OFF, null));\n        return r.html;\n    }\n};\nView = __decorate([\n    __param(5, ILanguageService)\n], View);\nexport class AccessibleDiffViewerModelFromEditors {\n    constructor(editors) {\n        this.editors = editors;\n    }\n    getOriginalModel() {\n        return this.editors.original.getModel();\n    }\n    getOriginalOptions() {\n        return this.editors.original.getOptions();\n    }\n    originalReveal(range) {\n        this.editors.original.revealRange(range);\n        this.editors.original.setSelection(range);\n        this.editors.original.focus();\n    }\n    getModifiedModel() {\n        return this.editors.modified.getModel();\n    }\n    getModifiedOptions() {\n        return this.editors.modified.getOptions();\n    }\n    modifiedReveal(range) {\n        if (range) {\n            this.editors.modified.revealRange(range);\n            this.editors.modified.setSelection(range);\n        }\n        this.editors.modified.focus();\n    }\n    modifiedSetSelection(range) {\n        this.editors.modified.setSelection(range);\n    }\n    modifiedFocus() {\n        this.editors.modified.focus();\n    }\n    getModifiedPosition() {\n        var _a;\n        return (_a = this.editors.modified.getPosition()) !== null && _a !== void 0 ? _a : undefined;\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}